[issue#1] 使用gradio配置前端页面，方便配置参数。
[issue#2] 新增 接入本地chatglm。
[issue#3] 修复全局字符替换时出现的部分替换失败导致的部分功能失效的bug。
[issue#4] 优化说明文档。
[issue#5] 新增FAQ +1。
[issue#6] 增加Edge-TTS的语速、音量调节参数；优化说明文档。
[issue#7] 结合claude和本地向量数据库实现langchain_pdf。
[issue#8] 优化langchain_pdf_local代码和prompt，使回答更人性化。
[issue#9] 改为GUI版；config.json结构调整；兼容langchain_pdf_local模式。
[issue#10] 冲突文件恢复。
[issue#11] 补充tiktoken依赖。
[issue#12] 本地违禁词检测改用Aho-Corasick 算法实现。
[issue#13] 新增Live2D板块，增加web服务驱动live2d。
[issue#14] live2d和配置相关说明更新。
[issue#15] 补充遗漏的main.py。
[issue#16] 修复无法从本地向量数据库加载的bug。
[issue#17] 补充遗漏依赖；补充打包懒人包的说明。
[issue#18] 删除不用的QtWebEngineWidgets；尝试追加重置Claude机制（未果。
[issue#19] 音频合成更改多线程为队列结构，解决高并发的崩溃问题。
[issue#20] 补充遗漏的queue依赖；增加弹幕触发,回复部分日志记录时，每20字符自动换行的机制。
[issue#21] 优化代码。langchain_pdf_local增加GanymedeNil/text2vec-large-chinese 模型。
[issue#22] README.md 增加colab云端解析向量数据库。
[issue#23] 补充说明文档。
[issue#24] 补充说明文档。
[issue#25] 修改edge-tts合成音频的文件名范围；更换抖音方案为dy-barrage-grab。
[issue#26] GUI新增 弹幕日志类型、修改langchain_pdf_local的模型下拉选择；优化文档，新增待办事项。
[issue#27] 怎么回事，call命令需要哪个环境包。> ![image](https://user-images.githubusercontent.com/13833404/247215730-cffee858-9e6b-4dc5-b5c4-661c41181c7d.png)。。win10下运行是不是问题有点多，还必须装conda？。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/13833404/f20eba54-130b-4c28-825f-0e582ec84ffd)。。
[issue#28] 修复语音合成内容错误的bug。
[issue#29] 补充说明文档。
[issue#30] 删除多余的queue。
[issue#31] 补充遗漏的requests。
[issue#32] 修复claude模式代码的小bug。
[issue#33] 使用抽象层统一模型，方便模型的拓展与维护。TODO：统一langchain_pdf和langchain_pdf_local两个模式。
[issue#34] readme更新。
[issue#35] 补充遗漏的ui文件；bug修复：vits配置项依赖问题。
[issue#36] GUI补充缺失的vits的speed、增加SD的配置。
[issue#37] GUI修改Edge-TTS的说话人配置为下拉菜单，数据文件在data下，可以自行编辑修改。
[issue#38] 修复保存配置时，edge-tts配置报错错误导致程序无法正常工作的bug。
[issue#39] 音频合成部分，Edge-TTS改直接调用库来合成，并被迫改为异步。（不过架构确实有问题）。
[issue#40] 将langchain_pdf和langchain_pdf_local统一为chat_with_file模式。
[issue#41] 将langchain_pdf和langchain_pdf_local两个模式统一为chat_with_file模式；GUI适配；bug修复。
[issue#42] 补上遗漏的依赖，部分需要用户使用时自行安装补。
[issue#43] 修订懒人包打包说明。
[issue#44] 新增强制拉取脚本。
[issue#45] 文件格式优化。
[issue#46] 修复chat_with_file中openai_gpt模式的bug。
[issue#47] bug修复。
[issue#48] 0630 - bug修复&文档优化。
[issue#49] 修改chat_mode的gpt为chatgpt，适配调整。。
[issue#50] 补充待办事项；MD增加目录。
[issue#51] 追加对text-generation-webui的兼容。
[issue#52] 修复chat_with_file，openai相关模式下的无法使用的bug；补充缺失的faiss-cpu依赖；后置create_faiss_index_from_zip的加载。。
[issue#53] 语音合成逻辑升级，会先对中文长文本进行切分，然后多线程队列合成，从而可以通过多次合成的方式处理长回复。。
[issue#54] GUI部分优化。
[issue#55] 修复音频分割部分对短音频丢失问题的恶性bug。。
[issue#56] chat_with_file模式支持加载本地模型，无需链接huggingface仓库。
[issue#57] 延长audio合成部分，合成队列的循环延时，一定程度上降低对Edge-TTS的压力；vits没有启动时的数据解析追加try异常捕获。。
[issue#58] 修复chat_with_file模式下openai读取本地zip文件错误的bug。
[issue#59] 修复 回复文本切分时，对空字符串的过滤遗漏，并对.的过滤进行删除，默认中文环境的过滤。
[issue#60] 音频合成部分基本上都进行了异常捕获。。
[issue#61] 新增功能 点歌模式 触发优先级高于LLM和弹幕过滤机制，可以通过 自定义点歌和取消点歌命令 播放本机已有音频。。
[issue#62] 补充GUI部分 画图功能的配置项提示。
[issue#63] 备份新的懒人包脚本。
[issue#64] 新增so-vits-svc的接入，可以对edge-tts/vits-fast合成后的音频进行变声后在输出；优化链接过滤的实现，提升准确性。
[issue#65] 补充文档说明。
[issue#66] 如果想要適配Youtube需要提供哪些接口?。油管的弹幕捕获就可以了。> 油管的弹幕捕获就可以了。。油管直播应该可以开放更多限制，比国内直播平台玩得开一点。> > 油管的弹幕捕获就可以了。> 。> 油管直播应该可以开放更多限制，比国内直播平台玩得开一点。。放荡不羁（）。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/7e573019-f515-464e-9765-8b1309c21f58)。> 油管的弹幕捕获就可以了。。找到了一個Youtube live讀取聊天室留言的。https://github.com/dghkd/KomeTube。。。實測了一下可以成功讀取到。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/49543451/ae535804-425a-4f52-a3b0-5945cee0c85f)。。不曉得能不能把那些留言讀取出來餵給AI。好家伙，喂给AI 那肯定是可以喂的，但是效果好不好那就是另一回事了0.0。> 好家伙，喂给AI 那肯定是可以喂的，但是效果好不好那就是另一回事了0.0。。行吧，大老有空能不能做個支援，我先點個star。> > 好家伙，喂给AI 那肯定是可以喂的，但是效果好不好那就是另一回事了0.0。> 。> 行吧，大老有空能不能做個支援，我先點個star。。模型训练我也不熟。![(U}6}N~MZ5@LPK) I42TO D](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/b61985e0-ae15-4a59-9cb4-20bcc127ddb6)。。已接入youtube。
[issue#67] 微调了语音合成前的文本切分算法，会控制在10-30字，结合合成时间大概可能也许可以达到不错的连续性。。
[issue#68] 点歌模式 支持子文件夹的音频文件搜索，不用拘泥于一级目录了。。
[issue#69] 修复source_data因为路径已存在而没有定义的bug；音频合成输出日志；补充chat_with_file相关依赖。
[issue#70] 修复点歌完成后，还进行LLM对话的bug；更新说明文档。
[issue#71] 【问题】b站获取不到弹幕。
[issue#72] 修复点歌完成后，还进行LLM对话的bug。
[issue#73] 文案功能开发中；给启动脚本加个cmd保持，方便看崩溃报错。
[issue#74] 修复chat_with_file openai_gpt模式，数据切分丢失数据的恶性bug。。
[issue#75] 初步实现文案音频合成功能；优化文档说明。
[issue#76] 补充懒人包依赖安装脚本。
[issue#77] 补充 文档说明。
[issue#78] 新增 文案模式，基本完成功能。可以自定义文案、合成音频、配置相关信息、循环暂停播放文案。。
[issue#79] 修复 文案模式 合成音频失败的bug。
[issue#80] 修复 文案模式 没有运行就可以进行合成、播放、暂停操作的bug。
[issue#81] 优化 文案模式 音频播放部分的实现逻辑。新增加载文案不存在就创建的机制。追加了文案页的各个配置和相关说明。。
[issue#82] 更新文档。
[issue#83] 修复 audio子线程sleep阻塞主线程弹幕监听的问题。。
[issue#84] 修复 文案音频暂停后 会被弹幕重新激活的bug。优化 文案模式 GUI相关交互。
[issue#85] 新增 聊天模式-谷歌。可以本地直接与LLM进行语音聊天。（依赖魔法）。
[issue#86] 新增 SD模型下 LLM对提示词优化的功能。。
[issue#87] SD模型下 LLM对提示词优化的功能。GUI同步适配。。
[issue#88] 通过js控制live2d模型加载；更新依赖更新脚本。
[issue#89] GUI可以检索Live2D路径下的模型进行动态修改配置;追加 Live2D官网所有的免费模型。
[issue#90] 增加api-example.py 接口的调用。
[issue#91] 新增 答谢功能（入场欢迎、礼物答谢），暂时只支持B站，GUI同步进行配置; 部分live2d文件命名更正。
[issue#92] chat_with_file.py 和 gpt.py match case 语法报错。py3.10.11可以支持。。换语法直接 if了（）。
[issue#93] 补充缺失的新依赖。
[issue#94] 优化文档。
[issue#95] 重新生成目录，调整目录顺序。
[issue#96] 【报错】ERROR: Conmunicate.__init__() got an unexpected keyword argument 'text'。
[issue#97] 【报错】更新依赖时报错 ERROR: Cannot install -r requirements_bilibili.txt (line 23), aiohttp and langchain==0.0.142 because these package versions have conflicting dependencies.。
[issue#98] 【报错】openai 接口报错: <empty message>。
[issue#99] 补充FAQ;指定edge-tts版本。
[issue#100] 优化文本切分算法；删除部分大Live2D模型和不好看的模型。
[issue#101] 增加项目的思维导图。
[issue#102] 新增简易流程图。
[issue#103] 补充目录。
[issue#104] 更新流程图。
[issue#105] 新增TTS模式 genshinvoice_top,调用第三方接口完成语音合成。
[issue#106] 完善思维导图。
[issue#107] 增加so-vits-svc4.1的bug解决方案；恢复默认配置。
[issue#108] 🙋 File ".\flask_api_full_song.py", line 38, in wav2wav out_audio, out_sr = svc_model.infer(spk, tran, raw_path) ValueError: too many values to unpack (expected 2)。解决方案。注意！！！如果你是`4.1`版本的整合包，很可能就有这个bug，需要修改`flask_api_full_song.py`的38行左右：  。改  。```。out_audio, out_sr = svc_model.infer(spk, tran, raw_path)。```。为。```。out_audio, out_sr, n_frames = svc_model.infer(spk, tran, raw_path)。```。
[issue#109] 补充live2d板块的描述。
[issue#110] GUI聊天页运行不跳转；增加测试记录。
[issue#111] 修改 聊天模式-谷歌 为 聊天模式，新增语音识别 百度接口。。
[issue#112] 优化聊天页UI。
[issue#113] 录音文件 talk.py。大小写问题之后解决。不阻塞其他感觉做不到，其他按键触发是会进入到按键触发，但会直接return。。持续录音功能之后会做。。大佬 不如直接一个pr带我走吧。![E{ZMTHZO YPQ NW 5IC_Y L](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/7e570174-f46d-45f3-816e-46aafaa6c165)。。- 聊天模式 按键触发兼容英文大小写字母。。- 聊天模式 支持循环录音功能，新增停止触发按键。。https://github.com/Ikaros-521/AI-Vtuber/pull/115。
[issue#114] 追加线程进程退出处理（部分有效）；补充chatgpt代理站使用方法。
[issue#115] 聊天模式 按键触发兼容英文大小写字母；聊天模式 支持循环录音功能，新增停止触发按键。
[issue#116] 优化cluade协程处理方式。
[issue#117] 优化cluade协程处理方式。
[issue#118] chat_with_file的openai_gpt同样使用提示词模板来自定义回答方式。
[issue#119] 补充遗漏的百度api库。
[issue#120] 更新依赖安装脚本。
[issue#121] 新增字幕日志，只会输出即将播放的音频文本，用于直播时的字幕显示；音频合成的消息队列改成阻塞队列。
[issue#122] 抖音版增加入场欢迎和礼物答谢（礼物答谢的金额需要手动维护价格表）。
[issue#123] 修改字幕输出文件名（输出在log/字幕.txt)。
[issue#124] 新增字幕启用、路径自定义配置；b站弹幕监听丢失弹幕问题（请升级监听库）。
[issue#125] 🙋 b站弹幕监听不到，弹幕丢失。b站弹幕监听出现弹幕丢失情况，紧急更新。`pip install bilibili-api-python==15.5.1b0`。升级监听库。整合包用户请用。`Miniconda3\python.exe -m pip install bilibili-api-python==15.5.1b0`。。已更新的镜像源` https://mirrors.cloud.tencent.com/pypi/simple`。
[issue#126] 新增 同拼音的违禁拼音过滤机制；GUI适配字幕日志的配置。
[issue#127] 增加注释装饰。
[issue#128] 新增抖音礼物价格数据，礼物价值下限将生效；优化抖音日志信息，只输出info日志。
[issue#129] 接入DDSP-SVC，简单测试了下，效果好像不太对。优化了变声部分的代码。
[issue#130] GUI适配DDSP-SVC；补充说明文档。
[issue#131] 优化audio中vits接口的设计&优化代码减少冗余；新增投资方和赞助渠道。
[issue#132] 美化投资人展示部分。
[issue#133] 更新投资人信息。
[issue#134] 更新投资消息。
[issue#135] 更新投资消息。
[issue#136] 更新投资消息。
[issue#137] 新增本地问答音频库，机制类似点歌，匹配命中后直接播放；新增自定义上下限音频随机变速(GUI未适配)。
[issue#138] 更新投资人信息。
[issue#139] 文案模式增加了一组文案配置，也就是说有2块文案，会进行左右切换的播放，都播放完毕后会进行新的一轮播放。
[issue#140] 更新思维导图。
[issue#141] 更新配置说明。
[issue#142] 新增LLM后的第二重过滤（违禁词、链接、拼音）；违禁拼音配置内容需要是中文，需要注意，已更正。
[issue#143] 新增合作伙伴。
[issue#144] 更新投资人信息。
[issue#145] 新增 念用户名的功能，例：回复xxx。你好；新增用户名过滤（违禁词、链接、拼音）；新增本地问答库匹配 最低相似度配置，用于微调需要的关键词匹配度，已自定义触发灵敏度。。
[issue#146] 音频随机变速 GUI适配。
[issue#147] 修复edge-tts + so-vits-svc协同下，相对路径无法变声的bug。
[issue#148] 针对部分用户绝对路径音频加载仍有系统找不到指定文件的情况，恢复相对路径，只在变声条件下转绝对路径。
[issue#149] 音频变速部分改默认变速变调为默认变速不变调且函数兼容变速变调。
[issue#150] 修复音频播放部分，音频变速调用缺失缩进导致变速必定执行的bug。
[issue#151] 更新投资人信息。
[issue#152] 更新投资人信息。
[issue#153] 更新投资人信息。
[issue#154] 更新投资人信息。
[issue#155] 修复变速时，语速低于1导致音频合成出错的bug；改变弹幕处理逻辑，先由process_data进行指定时间内的数据丢弃，再进行处理，降低高并发问题。
[issue#156] 增加投资人信息。
[issue#157] 在监听程序不能使用的情况下，使用第三方大佬提供的免费监听ws；更新投资人信息。
[issue#158] 本地问答库支持自定义变量的形式来开发动态语句；本地问答库-文本 改为相似度匹配，共用一个相似度值。
[issue#159] 文本切分算法，可以通过max_limit_len来对强制切分做自定义，对显卡高的，可提高语句连贯。。
[issue#160] 文案模式，文案格式修改，可以无限拓展文案路径数量来达到多类型文案切换的效果，GUI带适配动态加载。。
[issue#161] 支持关闭聊天（LLM等）,既可以应用于直播助理等场景，只负责欢迎和感谢。。
[issue#162] 接入科大讯飞 星火；优化文档；新增测试文件夹；新增讯飞星火 单测程序。
[issue#163] 补充遗漏的星火依赖。
[issue#164] 修复text-Gen max_new_tokens保存失败bug。
[issue#165] 文案页，音频文件格式支持大写的MP3和WAV；文案页 支持配置连续播放音频条件（超时切换&数量上限）—— GUI暂未适配。
[issue#166] 文案页文案切换播放逻辑变更，某一文案列表播放放完会重载列表内容，不再等待其他列表均播放完毕后才能重载。
[issue#167] 文案页 配置连续播放音频条件（超时切换&数量上限）GUI适配。
[issue#168] ChatGLM支持上下文，默认启动（GUI未适配）。
[issue#169] 抖音版增加 定时播报任务功能，用户可以自定义是否启用，循环时间和定时任务文案（变量修改源码追加功能）。
[issue#170] 修复遗漏的切分字符长度变量。
[issue#171] 去除edge-tts部分，对合成内容空格转逗号，英语方面兼容性会好一些。
[issue#172] 修复elevenlabs配置不匹配导致无法使用的bug；新增bark-gui的接入（GUI暂未）。
[issue#173] bark的gui部分先绘制上（待编码）。
[issue#174] 新增bark-gui的接入。
[issue#175] 补充遗漏的依赖。
[issue#176] 文本替换部分删除空格替换为空，改换行替换为。。
[issue#177] 修复ChatGLM上下文记忆bug，并新增GUI相关配置，可以启用和设置最大记忆字符长度。
[issue#178] 数据丢弃机制补全GUI配置。
[issue#179] 修复点歌搜索失败bug;修改默认的切分算法的最大长度为40字；优化弹幕处理部分代码；下调默认遗忘间隔。
[issue#180] 补充遗漏的schedule依赖；补上时间点的分单位。
[issue#181] 入场&礼物处理追加用户名违禁词过滤。
[issue#182] 回复用户名支持选择变声开关&自定义前回复、后回复的文案，且支持多文案随机抽取(GUI未匹配)。
[issue#183] 更新思维导图（新增bark-gui）。
[issue#184] 本地问答库升级，支持选择2种匹配算法。旧版本 一问一答，新版本 自定义json（更具灵活性）。文本和音频的相似度也分离了。。
[issue#185] 设置dy的定时任务为默认禁用。
[issue#186] 回复用户名板块 GUI适配，顺便优化了GUI部分对多行文本处理的源码实现。
[issue#187] 新增demo数据删除脚本，用于更新后删除无用数据。
[issue#188] 增加中文路径导致Qt找不到的FAQ；补充遗漏文件删除。
[issue#189] 🙋 qt.qpa.plugin: Could not find the Qt platform plugin "windows" in "" This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.。问题：无法找到Qt。  。解决方案：。如果你是整合包，那请检查是否在`中文路径`下！！！。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/4082ba52-aa78-43a0-b8a4-31d43bf741c2)。。。如果是自行安装的，可以尝试重装pyqt5。。
[issue#190] 定时任务GUI支持动态加载；b站接入定时任务；定时任务默认不启用。
[issue#191] 更新glm文档；更新投资人信息。
[issue#192]  保存配置后没有自动重启 [Errno 2] No such file or directory。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/48523cfc-a930-4e27-88ce-2d35d7cb45e2)。注意路径，路径有空格，导致报错失败！！！。另外中文路径也不行！！！。特殊符号也不行！！！。。正确路径参考：D:\GitHub_pro\AI-Vtuber-20230729。
[issue#193] 补充空格路径情况无法自动重启的解决方案。
[issue#194] 定时任务 报时任务补充分钟的播报。
[issue#195] 修复定时任务同时存在多个变量时，无法正常运行的bug。
[issue#196] 更换快手监听方案，新方案是playwright的形式，建议使用小号。暂时只支持弹幕回复。。
[issue#197] 快手 追加礼物Id和连击数日志，礼物价格和礼物名有待后期维护礼物表；补充默认cookie文件夹；快手 补充定时任务（暂只支持 报时任务）。
[issue#198] 闻达接入。ChatGPT改为ChatGPT/闻达，配合闻达启动器可以融入openai接口使用。。
[issue#199] 投资人信息更新。
[issue#200] 聊天页 支持直接合成复读内容，适用于直播中有人值守时直接进行交流。。
[issue#201] 补充快手依赖和说明。
[issue#202] 点歌模式支持新功能-随机点歌，命令在配置文件中可以自定义。
[issue#203] 随机点歌支持GUI中配置命令。
[issue#204] GUI新增 自定义板块显隐，用户可以根据自己喜好配置显示的box板块，让配置页面不再臃肿。
[issue#205] 文案页，文案配置改为动态加载，即无限文案;修复文案和聊天同时使用时，音频播放会播放2个的bug；删除重复调用的代码。
[issue#206] 文案页 新增文案编号配置项和增删按钮，用于对文案配置进行动态的增删操作。。
[issue#207] 更新待办事项。
[issue#208] ERROR: list index out of range。看着好像是用户名不存在导致的，需要重新定位一下问题点。需要确认下 回复的用户，其用户昵称是什么。暂时无法复现。
[issue#209] VITS全面改为VITS-Fast，新增VITS（原版，配合vits-simple-api使用），此更新变动较大，可能存在隐患，需要注意；部分代码优化。
[issue#210] 细化issue模板，提供例子。
[issue#211] 优化audio部分代码，tts部分源码全部拆到audio_handle\my_tts.py中。
[issue#212] 修复VITS配置保存后错乱的bug。
[issue#213] 补充懒人包playwright安装说明。
[issue#214] 怎样连接自己部署的langchain-chatglm。还未接入，待办。有兴趣的话，可以自行开发补充功能。。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/b3ba890b-32e6-4684-abdb-3012504d9267)。。> 还未接入，待办。。刚更新，怎么寄了。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/13833404/683cc12b-2aef-47e6-ba04-0a851b764f3d)。。langchain+glm已接入。。> > 还未接入，待办。> 。> 刚更新，怎么寄了 ![image](https://user-images.githubusercontent.com/13833404/259649920-683cc12b-2aef-47e6-ba04-0a851b764f3d.png)。。看着应该是科大讯飞的库有版本变更，部分不兼容了。。参考版本：。parkdesk-api           1.0.3。websocket-client        1.6.0。websocket-client-py3    0.15.0。websockets              11.0.3。所有库版本 可以参考 requirement common。
[issue#215] 主干分支最新code在win11下安装报错。文档写了解决方案，手动安装bilibili-api，aiohttp装更高的版本，可以向下兼容。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/56586c75-312a-4484-82cb-816f6be6b133)。。
[issue#216] 补充免责声明。
[issue#217] 修复违禁拼音在拼音部分包含违禁拼音的情况下也被过滤的bug；audio全部改为打印堆栈错误。
[issue#218] 修复本地违禁词库不配置时无法正常工作的bug；修复so-vits-svc+ddsp套娃变声失败的bug。
[issue#219] 新增langchain_chatglm的接入（GUI未适配）;修复音频变声bug。
[issue#220] langchain_chatglm的GUI视频。
[issue#221] 补充langchain-ChatGLM文档。
[issue#222] 补充langchain glm整合包和模型链接。
[issue#223] 补充说明。
[issue#224] vits修改语言配置为下拉框，改默认为自动，修复bug。
[issue#225] 投资人信息更新。
[issue#226] 🙋 b站 模式下无法获取到弹幕。参考issue解决方案，更新bilibili-api-python到最新版本，修改库代码。https://github.com/Nemo2011/bilibili-api/issues/419  。参考路径`AI-Vtuber-20230811\Miniconda3\Lib\site-packages\bilibili_api\live.py`  。```。--- a/bilibili_api/live.py。+++ b/bilibili_api/live.py。@@ -960,7 +960,7 @@ class LiveDanmaku(AsyncEvent):。             self.logger.info(f"正在尝试连接主机： {uri}")。。             try:。-                async with session.ws_connect(uri) as ws:。+                async with session.ws_connect(uri, headers={"User-Agent": "Mozilla/5.0"}) as ws:。。                     @self.on("VERIFICATION_SUCCESSFUL")。                     async def on_verification_successful(data):。```。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/89f30a5d-9030-4c7a-9bf4-47fe10f8b3c3)。。用户可以直接更新v0.17.0 整合包。> 参考issue解决方案，更新bilibili-api-python到最新版本，修改库代码 [Nemo2011/bilibili-api#419](https://github.com/Nemo2011/bilibili-api/issues/419) 参考路径`AI-Vtuber-20230811\Miniconda3\Lib\site-packages\bilibili_api\live.py`。> 。> ```。> --- a/bilibili_api/live.py。> +++ b/bilibili_api/live.py。> @@ -960,7 +960,7 @@ class LiveDanmaku(AsyncEvent):。>              self.logger.info(f"正在尝试连接主机： {uri}")。> 。>              try:。> -                async with session.ws_connect(uri) as ws:。> +                async with session.ws_connect(uri, headers={"User-Agent": "Mozilla/5.0"}) as ws:。> 。>                      @self.on("VERIFICATION_SUCCESSFUL")。>                      async def on_verification_successful(data):。> ```。> 。> ![image](https://user-images.githubusercontent.com/40910637/260030915-89f30a5d-9030-4c7a-9bf4-47fe10f8b3c3.png)。。23-08-20 23:09:44,935 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。2023-08-20 23:10:15,611 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。2023-08-20 23:10:47,156 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。2023-08-20 23:11:17,840 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。2023-08-20 23:11:49,416 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。2023-08-20 23:12:20,434 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。2023-08-20 23:12:51,134 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。> > 参考issue解决方案，更新bilibili-api-python到最新版本，修改库代码 [Nemo2011/bilibili-api#419](https://github.com/Nemo2011/bilibili-api/issues/419) 参考路径`AI-Vtuber-20230811\Miniconda3\Lib\site-packages\bilibili_api\live.py`。> > ```。> > --- a/bilibili_api/live.py。> > +++ b/bilibili_api/live.py。> > @@ -960,7 +960,7 @@ class LiveDanmaku(AsyncEvent):。> >              self.logger.info(f"正在尝试连接主机： {uri}")。> > 。> >              try:。> > -                async with session.ws_connect(uri) as ws:。> > +                async with session.ws_connect(uri, headers={"User-Agent": "Mozilla/5.0"}) as ws:。> > 。> >                      @self.on("VERIFICATION_SUCCESSFUL")。> >                      async def on_verification_successful(data):。> > ```。> > 。> > 。> >     。> >       。> >     。> > 。> >       。> >     。> > 。> >     。> >   。> > ![image](https://user-images.githubusercontent.com/40910637/260030915-89f30a5d-9030-4c7a-9bf4-47fe10f8b3c3.png)。> 。> 23-08-20 23:09:44,935 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK" 2023-08-20 23:10:15,611 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK" 2023-08-20 23:10:47,156 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK" 2023-08-20 23:11:17,840 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK" 2023-08-20 23:11:49,416 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK" 2023-08-20 23:12:20,434 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK" 2023-08-20 23:12:51,134 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDF8MXww "HTTP/1.1 200 OK"。。还是获取不到弹幕数据吗，我本地测过没问题。或者可以直接升级最新版的依赖库，我看官方又发版了，可能已经修复了。还是获取不到弹幕，这是返回的数据。ww "HTTP/1.1 200 OK"。2023-08-22 10:58:20,668 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 10:58:52,614 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。[71004][2023-08-22 10:59:20,235][WARNING] 非正常关闭连接。2023-08-22 10:59:20,235 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:943] - WARNING: 非正常关闭连接。[71004][2023-08-22 10:59:20,255][INFO] 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub。2023-08-22 10:59:20,255 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:908] - INFO: 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub。[71004][2023-08-22 10:59:21,437][INFO] 连接服务器并认证成功。2023-08-22 10:59:21,437 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:981] - INFO: 连接服务器并认证成功。2023-08-22 10:59:25,461 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。。> 还是获取不到弹幕，这是返回的数据 ww "HTTP/1.1 200 OK" 2023-08-22 10:58:20,668 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" 2023-08-22 10:58:52,614 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" [71004][2023-08-22 10:59:20,235][WARNING] 非正常关闭连接 2023-08-22 10:59:20,235 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:943] - WARNING: 非正常关闭连接 [71004][2023-08-22 10:59:20,255][INFO] 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub 2023-08-22 10:59:20,255 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:908] - INFO: 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub [71004][2023-08-22 10:59:21,437][INFO] 连接服务器并认证成功 2023-08-22 10:59:21,437 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:981] - INFO: 连接服务器并认证成功 2023-08-22 10:59:25,461 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。。刚测了下，弹幕是能捕获的，不过日志确实一直在跳动，可能连接不稳定了。触发下弹幕后，倒是稳定了一些。2023-08-22 11:12:11,186 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:12:26,238 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:12:42,339 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。这是返回控制台的数据，还是获取不了弹幕。jB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:12:26,238 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:12:42,339 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:13:02,410 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:13:21,226 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:13:36,121 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:13:51,144 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:14:06,883 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:14:22,290 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:14:37,762 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。> 2023-08-22 11:12:11,186 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" 2023-08-22 11:12:26,238 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" 2023-08-22 11:12:42,339 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" 这是返回控制台的数据，还是获取不了弹幕。。是已经更新了最新版并且修改源码追加了请求头了吗。是的。。> 是的。。要不换个直播间试试。。。 还不行 那就不好说了，去库项目提个issue催更新（）。> 是的。。另外，你可以确认下配置是否保存成功了，可能你监听错直播间了。一定要自己的直播间么。try:。                #async with session.ws_connect(uri) as ws:。                #async with session.ws_connect(uri, headers=HEADERS.copy()) as ws:。                async with session.ws_connect(uri, headers={"User-Agent": "Mozilla/5.0"}) as ws:。                    @self.on("VERIFICATION_SUCCESSFUL")。。                    async def on_verification_successful(data):。                        # 新建心跳任务。                        self.__tasks.append(asyncio.create_task(self.__heartbeat(ws)))。。                    self.__ws = ws。                    self.logger.debug("连接主机成功, 准备发送认证信息")。                    await self.__send_verify_data(ws, conf["token"])。。> 一定要自己的直播间么。。当然不是 任一直播间 。2023-08-22 11:24:29,859 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:232] - INFO: 创建entrance表。2023-08-22 11:24:29,862 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:245] - INFO: 创建gift表。[71001][2023-08-22 11:24:30,050][INFO] 准备连接直播间 71001。2023-08-22 11:24:30,050 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:866] - INFO: 准备连接直播间 71001。2023-08-22 11:24:30,837 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。[71001][2023-08-22 11:24:33,748][INFO] 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub。2023-08-22 11:24:33,748 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:908] - INFO: 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub。[71001][2023-08-22 11:24:34,405][INFO] 连接服务器并认证成功。2023-08-22 11:24:34,405 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:982] - INFO: 连接服务器并认证成功。2023-08-22 11:25:01,706 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。。不更新源码的话没有反应，更新源码返回。NFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:25:32,486 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:26:03,399 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:26:34,299 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。2023-08-22 11:27:05,308 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx\_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。。> 2023-08-22 11:24:29,859 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:232] - INFO: 创建entrance表 2023-08-22 11:24:29,862 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:245] - INFO: 创建gift表 [71001][2023-08-22 11:24:30,050][INFO] 准备连接直播间 71001 2023-08-22 11:24:30,050 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:866] - INFO: 准备连接直播间 71001 2023-08-22 11:24:30,837 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" [71001][2023-08-22 11:24:33,748][INFO] 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub 2023-08-22 11:24:33,748 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:908] - INFO: 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub [71001][2023-08-22 11:24:34,405][INFO] 连接服务器并认证成功 2023-08-22 11:24:34,405 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:982] - INFO: 连接服务器并认证成功 2023-08-22 11:25:01,706 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。。`https://live.bilibili.com/71001`,你试试。> 。。心跳其实倒是无所谓。我本地的版本给你参考下。```。bilibili-api            4.1.0。bilibili-api-python     15.5.5。```。最新版吧，源码没改的情况。https://github.com/Ikaros-521/AI-Vtuber/pull/278。更新bilibili-api-python库。```。pip install bilibili-api-python -U。```。更新项目到最新版，使用手机登录 or 手动配置cookie。> 2023-08-22 11:24:29,859 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:232] - INFO: 创建entrance表 2023-08-22 11:24:29,862 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:245] - INFO: 创建gift表 [71001][2023-08-22 11:24:30,050][INFO] 准备连接直播间 71001 2023-08-22 11:24:30,050 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:866] - INFO: 准备连接直播间 71001 2023-08-22 11:24:30,837 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" [71001][2023-08-22 11:24:33,748][INFO] 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub 2023-08-22 11:24:33,748 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:908] - INFO: 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub [71001][2023-08-22 11:24:34,405][INFO] 连接服务器并认证成功 2023-08-22 11:24:34,405 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:982] - INFO: 连接服务器并认证成功 2023-08-22 11:25:01,706 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。。尝试填写  `room_display_id` ，而不是 `room_id` 。 `room_display_id` 需要调用哔哩哔哩官方api获取（好像是原id什么什么的）。> > 2023-08-22 11:24:29,859 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:232] - INFO: 创建entrance表 2023-08-22 11:24:29,862 - C:\Users\86158\Desktop\AI-Vtuber\utils\my_handle.py[line:245] - INFO: 创建gift表 [71001][2023-08-22 11:24:30,050][INFO] 准备连接直播间 71001 2023-08-22 11:24:30,050 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:866] - INFO: 准备连接直播间 71001 2023-08-22 11:24:30,837 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK" [71001][2023-08-22 11:24:33,748][INFO] 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub 2023-08-22 11:24:33,748 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:908] - INFO: 正在尝试连接主机： wss://broadcastlv.chat.bilibili.com:443/sub [71001][2023-08-22 11:24:34,405][INFO] 连接服务器并认证成功 2023-08-22 11:24:34,405 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\bilibili_api\live.py[line:982] - INFO: 连接服务器并认证成功 2023-08-22 11:25:01,706 - C:\Users\86158\miniconda3\envs\Vtuber\lib\site-packages\httpx_client.py[line:1729] - INFO: HTTP Request: GET https://live-trace.bilibili.com/xlive/rdata-interface/v1/heartbeat/webHeartBeat?pf=web&hb=NjB8NzEwMDR8MXww "HTTP/1.1 200 OK"。> 。> 尝试填写 `room_display_id` ，而不是 `room_id` 。 `room_display_id` 需要调用哔哩哔哩官方api获取（好像是原id什么什么的）。。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/3980383f-8f4f-432e-8d8c-812fa06cff2d)。。
[issue#227] 过滤板块 新增遗忘保留数的配置项，从默认的1个数改为可以根据自定义配置保留，在定时触发后依次响应。。
[issue#228] 更新目录。
[issue#229] 更新思维导图。
[issue#230] 新增 斗鱼平台的接入（初步接入，仅有弹幕数据的监听）。
[issue#231] 修改commit为comment（大改动，单词拼错了，现在才发现，难绷）。
[issue#232] 新增弹幕、入场、礼物的数据库日志记录(GUI未适配)；新增Claude2的接入。
[issue#233] 更新投资人信息。
[issue#234] 弹幕、入场、礼物的数据库日志记录GUI适配。
[issue#235] 增加基于docsify的文档。
[issue#236] 🐛 一些问题。。。 | [Bug] Some problem...。是否安装配置了ffmpeg，我这确认下Genshinvoice是否正常。Genshinvoice服务没有问题。总记得有人有类似的问题，也一样的E盘，但就是获取不到文件。。。。谢谢你，我想应该没事了，我重新配置了一下ffmpeg就好了。可以的。
[issue#237] 补充文档相关开发；美化logo。
[issue#238] 简单的初步美化下GUI。
[issue#239] 🐛 一些问题。。。 | [Bug] Some problem...。问题已经解决，需要删除requirements_bilibili.txt 文档中bilibili-api 后面的版本号，因为原作者由于参加工作的原因，已经停止更新版本，换做其他人继续接受更新，最新的版本是15.5.4 地址是:https://github.com/Nemo2011/bilibili-api. 。> 问题已经解决，需要删除requirements_bilibili.txt 文档中bilibili-api 后面的版本号，因为原作者由于参加工作的原因，已经停止更新版本，换做其他人继续接受更新，最新的版本是15.5.4 地址是:https://github.com/Nemo2011/bilibili-api.。。装的就是python版，冲突需要手动处理下，文档其实有写的。。https://github.com/Ikaros-521/AI-Vtuber/pull/241。
[issue#240] 投资人更新；补充文档。
[issue#241] 修改依赖库问题。
[issue#242] 后置部分GPT_MODEL配置，规避一次性全加载问题；修复 LLM部分GUI板块显隐bug。
[issue#243] 优化日志部分的文档。
[issue#244] 更新投资人信息。
[issue#245] 更新投资人；补充Claude2文档。
[issue#246] 讯飞星火库需要升级才能恢复兼容（已更新依赖）；修复部分GUI显示bug；补充仓库链接。
[issue#247] 恢复Claude2的兼容。
[issue#248] 新增 音频播放板块，暂时只提供音频播放的开关。。
[issue#249] GUI优化按钮无边框问题；关于新增 在线文档 跳转入口。
[issue#250] 更新思维导图。
[issue#251] 更换bilibili-api依赖位置。
[issue#252] 更新投资人信息。
[issue#253] 新增 动态文案 版本GUI部分的实现（功能还未实现）。
[issue#254] 补充vits-simple-api运行bug问题;近期发现有第三方直接套娃售卖项目，可怜的娃呀，收手吧。另外，套娃的，不分钱给我，我觉得这不合适吧（。
[issue#255] audio合成 音频合成部分新增合成内容的日志，方便后期合成音频时的bug定位；补充NVIDIA Omniverse Audio2Face文档。
[issue#256] 请问考虑加入WebUI么？。> 。。开发精力不够，短时间内没有计划。。> > 。> 。> 开发精力不够，短时间内没有计划。。。electron 🏳️‍⚧️ 👍 。> 。。写过点，不过感觉还是麻烦了点。![TUD~V_ `BTEOO`G_5PFVQSK](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/0df16890-319c-4427-92cf-bfb3b4bf9fde)。。webui大部分功能已经实现，内测阶段。
[issue#257] 补充'sync' from 'bilibili_api'报错解决方案。
[issue#258] 更新投资人信息。
[issue#259] 新增web字幕打印机的接入。
[issue#260] 默认不启用web字幕打印机。
[issue#261] TTS新增VALL-E-X的接入。
[issue#262] 更新思维导图。
[issue#263] 补充vits-fast文档。
[issue#264] 补充闻达安装相关说明；增加文心一言测试程序。
[issue#265] 更新。
[issue#266] 新增 智谱AI的接入，支持上下文记忆。
[issue#267] 更新思维导图和说明文档。
[issue#268] 更换协议为apache2.0。
[issue#269] 修复智谱AI返回内容有\n时，也会进行语音合成的bug；删除部分违禁词。
[issue#270] 补充vits-simple-api使用说明。
[issue#271] 念用户名时，删除用户名中存在的特殊符号。
[issue#272] 顶部菜单栏新增Q群跳转，改名 帮助。
[issue#273] 补充、删减部分违禁词; 补充遗漏的zhipuai库。
[issue#274] 入场和礼物感谢部分删除用户名中存在的特殊符号。
[issue#275] 抖音关注事件可以触发关注感谢话术。
[issue#276] 基本实现动态文案功能，待后续使用体验中完善。
[issue#277] 补充说明。
[issue#278] 更新b站监听库到16.0.0版本，新增b站登录板块，获取cookie等信息解决弹幕监听丢失问题。
[issue#279] 更新b站相关文档和依赖；补充提示信息。
[issue#280] 修复GUI b站部分配置项描述错误。
[issue#281] 投资人更新说明。
[issue#282] 新增 谷歌bard的接入，支持上下文记忆。。
[issue#283] 补充遗漏的bardapi库。
[issue#284] 投资人更新。
[issue#285] b站板块可以选择不登录（部分用户不登录也可以正常使用）。
[issue#286] 🚀 一些功能。。。 | [Feature]Some feature...。加入待办。已更新 https://github.com/Ikaros-521/AI-Vtuber/pull/289。看到了大佬牛啊速度真快。
[issue#287] 投资人信息更新。
[issue#288] 修复后置回复没法关闭 念用户名 的bug；删除部分无关紧要的违禁词。
[issue#289] 本地问答文本库 新增动态变量{username}，用于替换用户名。
[issue#290] 新增待办事项。
[issue#291] 动态文案问题。解决了，原来是我有个文件没有更新。> 解决了，原来是我有个文件没有更新。。啊这。
[issue#292] 🚀 GUI 聊天页 支持回车发送。https://github.com/Ikaros-521/AI-Vtuber/pull/302。
[issue#293] 🙋 GUI卡顿，性能问题讨论帖。无解决方案，准备弃用。webui大部分功能已经实现。
[issue#294] 补充gpt使用过程中问题FAQ；VITS下，兼容bert-vits2。
[issue#295] 🐛 本地问答音频库会存在合成日志的情况。无法复现。<img width="947" alt="CMKKUZNBVV2ELGBXPQVV856" src="https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/0e45ecf0-095b-4d94-bb58-cf49b4d9b6b9">。聊天模式下，也有出现，猜测和路径或者逻辑有关。https://github.com/Ikaros-521/AI-Vtuber/pull/372。修复。
[issue#296] 补充bert_vits2接入使用说明。
[issue#298] 恢复MIT。
[issue#299] 删除过期群内容；格式化json，改4空格缩进。
[issue#300] 删除过期的bilibili-api库。
[issue#301] update readme.md。
[issue#302] 聊天页 文本输入框支持回车按键直接发送内容。
[issue#303] 新增 念弹幕功能，可以对直播间弹幕进行复读，更有针对性，试用助理场景。
[issue#304] 更新GUI内置文档。
[issue#305] 考虑把ai.ie.cx域名更换成luna-ai.ie.cx。或者是luna.ie.cx，各位给点建议（。已替换。
[issue#306] 更新GUI在线文档链接。
[issue#307] 🐛 vits-fast推理时中文内容时，会出现zh前缀。临时强制改为 Mix 可以解决。配置新增语言选择项，供用户自行选择，已适应多种应用场景。
[issue#308] 🙋 b站弹幕无法获取到用户全名。解决方案参考：https://github.com/Nemo2011/bilibili-api/issues/486。。临时更改为开发版，`pip install bilibili-api-dev==16.0.1b2`。修复这个问题的正式版已发布。。```python。pip install bilibili-api-python==16.1.0。```。> 修复这个问题的正式版已发布
> 
> ```python
> pip install bilibili-api-python==16.1.0
> ```

感谢大佬。
[issue#309] 🐛 聊天页 ctrl+c会关闭程序问题。https://github.com/Ikaros-521/AI-Vtuber/pull/310  。已更新。
[issue#310] 删除聊天页ctrl+c或z的程序退出功能。
[issue#311] 🙋 使用vits-simple-api接入bert-vits2时，报错如下。解决方案参考：https://github.com/Artrajz/vits-simple-api/issues/72。。改`bert_vits2/models.py`中第646行`if n_speakers > 1:`修改为`if n_speakers >= 1:`。
[issue#312] vits-fast新增配置项语言，可以固定合成语言或自动识别。
[issue#313] 星火api报错。不好意思是这个报错。2023-09-12 12:36:42,794 - D:\AI-Vtuber\utils\my_handle.py[line:870] - INFO: [主人]: 你好啊。Exception in thread Thread-11:。Traceback (most recent call last):。  File "D:\AI-Vtuber\Miniconda3\lib\threading.py", line 1016, in _bootstrap_inner。    self.run()。  File "D:\AI-Vtuber\Miniconda3\lib\threading.py", line 1378, in run。    self.function(*self.args, **self.kwargs)。  File "D:\AI-Vtuber\utils\my_handle.py", line 1229, in process_last_data。    self.comment_handle(data)。  File "D:\AI-Vtuber\utils\my_handle.py", line 953, in comment_handle。    resp_content = self.llm_handle(self.chat_type, data_json)。  File "D:\AI-Vtuber\utils\my_handle.py", line 800, in llm_handle。    resp_content = self.sparkdesk.get_sparkdesk_resp(data["content"])。  File "D:\AI-Vtuber\utils\gpt_model\sparkdesk.py", line 55, in get_sparkdesk_resp。    return self.sparkAPI.chat(prompt)。  File "D:\AI-Vtuber\Miniconda3\lib\site-packages\sparkdesk_api\core.py", line 115, in chat。    ws = create_connection(url)。  File "D:\AI-Vtuber\Miniconda3\lib\site-packages\websocket\__init__.py", line 227, in create_connection。    websock.connect(url, **options)。  File "D:\AI-Vtuber\Miniconda3\lib\site-packages\websocket\__init__.py", line 523, in connect。    self.sock = ssl.wrap_socket(self.sock, **sslopt)。  File "D:\AI-Vtuber\Miniconda3\lib\ssl.py", line 1442, in wrap_socket。    return context.wrap_socket(。  File "D:\AI-Vtuber\Miniconda3\lib\ssl.py", line 513, in wrap_socket。    return self.sslsocket_class._create(。  File "D:\AI-Vtuber\Miniconda3\lib\ssl.py", line 1071, in _create。    self.do_handshake()。  File "D:\AI-Vtuber\Miniconda3\lib\ssl.py", line 1342, in do_handshake。    self._sslobj.do_handshake()。ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate (_ssl.c:1007)。。待ming修复bug。https://github.com/HildaM/sparkdesk-api。下午弄，上午HR面😭



---- 回复的原邮件 ----
| 发件人 | ***@***.***> |
| 日期 | 2023年09月13日 00:30 |
| 收件人 | ***@***.***> |
| 抄送至 | ***@***.***>***@***.***> |
| 主题 | Re: [Ikaros-521/AI-Vtuber] 星火api报错 (Issue #313) |

Assigned #313 to @HildaM.

—
Reply to this email directly, view it on GitHub, or unsubscribe.
You are receiving this because you were assigned.Message ID: ***@***.***>。> 下午弄，上午HR面😭
> 
> 
> 
> ---- 回复的原邮件 ----
> | 发件人 | ***@***.***> |
> | 日期 | 2023年09月13日 00:30 |
> | 收件人 | ***@***.***> |
> | 抄送至 | ***@***.***>***@***.***> |
> | 主题 | Re: [Ikaros-521/AI-Vtuber] 星火api报错 (Issue #313) |
> 
> Assigned #313 to @HildaM.
> 
> —
> Reply to this email directly, view it on GitHub, or unsubscribe.
> You are receiving this because you were assigned.Message ID: ***@***.***>

工作要紧。重装解决 `websocket-client`  。。`pip uninstall websocket-client`  。。`pip install websocket-client`  。@HildaM 虚拟机有类似问题，感觉治标不治本了。```。2023-10-03 22:30:13,358 - E:\AI-Vtuber-20230924\utils\my_handle.py[line:1557] - ERROR: Traceback (most recent call last):。  File "E:\AI-Vtuber-20230924\utils\my_handle.py", line 1431, in comment_handle。    resp_content = self.llm_handle(self.chat_type, data_json)。  File "E:\AI-Vtuber-20230924\utils\my_handle.py", line 851, in llm_handle。    resp_content = self.sparkdesk.get_sparkdesk_resp(data["content"])。  File "E:\AI-Vtuber-20230924\utils\gpt_model\sparkdesk.py", line 51, in get_sparkdesk_resp。    return self.sparkAPI.chat(prompt)。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\site-packages\sparkdesk_api\core.py", line 114, in chat。    ws = create_connection(url)。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\site-packages\websocket\_core.py", line 610, in create_connection。    websock.connect(url, **options)。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\site-packages\websocket\_core.py", line 251, in connect。    self.sock, addrs = connect(url, self.sock_opt, proxy_info(**options),。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\site-packages\websocket\_http.py", line 135, in connect。    sock = _ssl_socket(sock, options.sslopt, hostname)。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\site-packages\websocket\_http.py", line 275, in _ssl_socket。    sock = _wrap_sni_socket(sock, sslopt, hostname, check_hostname)。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\site-packages\websocket\_http.py", line 251, in _wrap_sni_socket。    return context.wrap_socket(。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\ssl.py", line 513, in wrap_socket。    return self.sslsocket_class._create(。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\ssl.py", line 1071, in _create。    self.do_handshake()。  File "E:\AI-Vtuber-20230924\Miniconda3\lib\ssl.py", line 1342, in do_handshake。    self._sslobj.do_handshake()。ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1007)。```。升级星火库到1.5.0。https://github.com/HildaM/sparkdesk-api。
[issue#314] 新增文心一言web版API接入。
[issue#315] GUI缩短配置项长度，给右侧预留10%的空间，方便鼠标在此处停留使用滚轮功能；尝试实现保活失败。
[issue#316] 动态文案切分问题。待分析具体原因。已更新 https://github.com/Ikaros-521/AI-Vtuber/commit/70f522cceda439b86599402de45b357b1a08182a。
[issue#317] 针对星火问题升级websocket-client库。
[issue#318] 更新切分算法，没有最长字符的强制切分，读句子会丝滑，但是千万要断句啊，怕你电脑吃不消。
[issue#319] Update requirements_common.txt。
[issue#320] Update requirements_common.txt。
[issue#321] 聊天页面增加快捷键。加入待办。已更新 https://github.com/Ikaros-521/AI-Vtuber/pull/325。。~ ` · 中文输入法下 · 的触发测试正常。。实际配置项对应的为 ` 键，位于配置项最底部。
[issue#322] 🐛 字幕打印机乱码 | [Bug] Some problem...。可以提供下乱码是否 对应的发送的字幕日志吗？。字体大小和消失速度 没有完全开放出来是在后期计划中的。。暂时想要修改得直接修订源码。后续更新于 https://github.com/Ikaros-521/captions_printer。。https://github.com/Ikaros-521/captions_printer/releases/tag/v0.2.0。。v0.2.0。支持字体设置，支持显示隐藏参数自定义。乱码问题无法复现。> 乱码问题无法复现

据说是斜杠问题。还有乱码情况出现吗，具体在输出什么文本下是乱码呢。如果问题解决了，准备关issue了。没了，唯一出现乱码就是最小化浏览器再打开会错行，不算bug。辛苦伊卡佬了。。。。。------------------&nbsp;原始邮件&nbsp;------------------。发件人: ***@***.***&gt;; 。发送时间: 2023年10月25日(星期三) 下午2:17。收件人: ***@***.***&gt;; 。抄送: ***@***.***&gt;; ***@***.***&gt;; 。主题: Re: [Ikaros-521/AI-Vtuber] 🐛 字幕打印机乱码 | [Bug] Some problem... (Issue #322)。。。。。。 。还有乱码情况出现吗，具体在输出什么文本下是乱码呢。 如果问题解决了，准备关issue了。 。—。Reply to this email directly, view it on GitHub, or unsubscribe.。You are receiving this because you authored the thread.Message ID: ***@***.***&gt;。> 没了，唯一出现乱码就是最小化浏览器再打开会错行，不算bug。辛苦伊卡佬了。> […](#)。> ------------------&nbsp;原始邮件&nbsp;------------------ 发件人: ***@***.***&gt;; 发送时间: 2023年10月25日(星期三) 下午2:17 收件人: ***@***.***&gt;; 抄送: ***@***.***&gt;; ***@***.***&gt;; 主题: Re: [Ikaros-521/AI-Vtuber] 🐛 字幕打印机乱码 | [Bug] Some problem... (Issue #322) 还有乱码情况出现吗，具体在输出什么文本下是乱码呢 如果问题解决了，准备关issue了 — Reply to this email directly, view it on GitHub, or unsubscribe. You are receiving this because you authored the thread.Message ID: ***@***.***&gt;。。错行emmm 这个应该和最小化没关系，得看看。https://github.com/Ikaros-521/captions_printer/commit/21d02d7edf28764fca547b5edfb36a09b982ad32。
[issue#323] 新增积分表，暂时只做了b站的签到部分功能，GUI未适配。其实其他平台稍微写了点，但是没有测试。
[issue#324] 恢复文档部分重要信息。
[issue#325] 录音页 新增录音按键` 数字1左边按键。
[issue#326] 后移web字幕打印机调用的位置，让其可以对其音频合成部分；更新思维导图。
[issue#327] 积分机制 新增礼物和入场积分记录的实现，GUI未适配；默认配置修改。
[issue#328] 优化web字幕打印机错误日志输出内容。
[issue#329] 积分表 新增查询功能，用户可以查询积分情况。
[issue#330] 新增游戏demo例程;修改默认配置关闭积分机制。
[issue#331] 智谱回复部分如果存在多\情况，则会删除重复的\仅保留一个。
[issue#332] 弹幕处理新增全标点符号的弹幕过滤。
[issue#333] 追加几个本地问答，让ai有所b数；更新投资人信息。
[issue#334] 更新违禁词库。
[issue#335] AI-Vtuber接入langchain-ChatGLM报错405错误问题 。不支持 webui的接口，请运行`api.py`使用。运行api.py然后接入AI-Vtuber       显示下边这个错误，感觉像是端口错误。。。E:\langchain-ChatGLM>Miniconda3\python.exe api.py。INFO  2023-09-23 20:56:37,979-1d:。loading model config。llm device: cuda。embedding device: cuda。dir: E:\langchain-ChatGLM。flagging username: 121810459855493f8119b570363fbd23。。load_model_config E:\ChatGLM\model\chatglm-6b...。Loading E:\ChatGLM\model\chatglm-6b...。Loading checkpoint shards: 100%|█████████████████████████████████████████████████████████| 8/8 [00:04<00:00,  1.76it/s]。Loaded the model in 11.41 seconds.。INFO  2023-09-23 20:56:49,882-1d: Load pretrained SentenceTransformer: E:\langchain-ChatGLM\THUDM\text2vec-large-chinese。WARNING 2023-09-23 20:56:49,883-1d: No sentence-transformers model found with name E:\langchain-ChatGLM\THUDM\text2vec-large-chinese. Creating a new one with MEAN pooling.。INFO:     Started server process [4020]。INFO:     Waiting for application startup.。INFO:     Application startup complete.。INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)。INFO:     127.0.0.1:52045 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52046 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52047 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52049 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52050 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52051 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52052 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52054 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52055 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52056 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52059 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52060 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52061 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52063 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52064 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52065 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52066 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52067 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52069 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52070 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52071 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52072 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52073 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52074 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52075 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52076 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52077 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52078 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52079 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52080 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52081 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52082 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52083 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52084 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52085 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52086 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52087 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52088 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52089 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52090 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52091 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52092 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52093 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52094 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52095 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52098 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52099 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52100 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52101 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52102 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52103 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52104 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52105 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52106 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52107 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52109 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52110 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52111 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52112 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52113 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52114 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52115 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52116 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52117 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52118 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52119 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52120 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52121 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52122 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52123 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52125 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52126 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52127 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52128 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52129 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52130 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52131 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52132 - "POST / HTTP/1.1" 405 Method Not Allowed。INFO:     127.0.0.1:52200 - "GET / HTTP/1.1" 307 Temporary Redirect。INFO:     127.0.0.1:52200 - "GET /docs HTTP/1.1" 200 OK。INFO:     127.0.0.1:52200 - "GET /openapi.json HTTP/1.1" 200 OK    。。就报错来看这个post请求不被允许，感觉是版本问题的出入。```。#encoding:utf-8。import argparse。import json。import os。import shutil。from typing import List, Optional。import urllib。import asyncio。import nltk。import pydantic。import uvicorn。from fastapi import Body, Request, FastAPI, File, Form, Query, UploadFile, WebSocket。from fastapi.middleware.cors import CORSMiddleware。from fastapi.responses import StreamingResponse。from pydantic import BaseModel。from typing_extensions import Annotated。from starlette.responses import RedirectResponse。。from chains.local_doc_qa import LocalDocQA。from configs.model_config import (KB_ROOT_PATH, EMBEDDING_DEVICE,。                                  EMBEDDING_MODEL, NLTK_DATA_PATH,。                                  VECTOR_SEARCH_TOP_K, LLM_HISTORY_LEN, OPEN_CROSS_DOMAIN)。import models.shared as shared。from models.loader.args import parser。from models.loader import LoaderCheckPoint。。nltk.data.path = [NLTK_DATA_PATH] + nltk.data.path。。。class BaseResponse(BaseModel):。    code: int = pydantic.Field(200, description="HTTP status code")。    msg: str = pydantic.Field("success", description="HTTP status message")。。    class Config:。        schema_extra = {。            "example": {。                "code": 200,。                "msg": "success",。            }。        }。。。class ListDocsResponse(BaseResponse):。    data: List[str] = pydantic.Field(..., description="List of document names")。。    class Config:。        schema_extra = {。            "example": {。                "code": 200,。                "msg": "success",。                "data": ["doc1.docx", "doc2.pdf", "doc3.txt"],。            }。        }。。。class ChatMessage(BaseModel):。    question: str = pydantic.Field(..., description="Question text")。    response: str = pydantic.Field(..., description="Response text")。    history: List[List[Optional[str]]] = pydantic.Field(..., description="History text")。    source_documents: List[str] = pydantic.Field(。        ..., description="List of source documents and their scores"。    )。。    class Config:。        schema_extra = {。            "example": {。                "question": "工伤保险如何办理？",。                "response": "根据已知信息，可以总结如下：\n\n1. 参保单位为员工缴纳工伤保险费，以保障员工在发生工伤时能够获得相应的待遇。\n2. 不同地区的工伤保险缴费规定可能有所不同，需要向当地社保部门咨询以了解具体的缴费标准和规定。\n3. 工伤从业人员及其近亲属需要申请工伤认定，确认享受的待遇资格，并按时缴纳工伤保险费。\n4. 工伤保险待遇包括工伤医疗、康复、辅助器具配置费用、伤残待遇、工亡待遇、一次性工亡补助金等。\n5. 工伤保险待遇领取资格认证包括长期待遇领取人员认证和一次性待遇领取人员认证。\n6. 工伤保险基金支付的待遇项目包括工伤医疗待遇、康复待遇、辅助器具配置费用、一次性工亡补助金、丧葬补助金等。",。                "history": [。                    [。                        "工伤保险是什么？",。                        "工伤保险是指用人单位按照国家规定，为本单位的职工和用人单位的其他人员，缴纳工伤保险费，由保险机构按照国家规定的标准，给予工伤保险待遇的社会保险制度。",。                    ]。                ],。                "source_documents": [。                    "出处 [1] 广州市单位从业的特定人员参加工伤保险办事指引.docx：\n\n\t( 一)  从业单位  (组织)  按“自愿参保”原则，  为未建 立劳动关系的特定从业人员单项参加工伤保险 、缴纳工伤保 险费。",。                    "出处 [2] ...",。                    "出处 [3] ...",。                ],。            }。        }。。。def get_kb_path(local_doc_id: str):。    return os.path.join(KB_ROOT_PATH, local_doc_id)。。。def get_doc_path(local_doc_id: str):。    return os.path.join(get_kb_path(local_doc_id), "content")。。。def get_vs_path(local_doc_id: str):。    return os.path.join(get_kb_path(local_doc_id), "vector_store")。。。def get_file_path(local_doc_id: str, doc_name: str):。    return os.path.join(get_doc_path(local_doc_id), doc_name)。。。def validate_kb_name(knowledge_base_id: str) -> bool:。    # 检查是否包含预期外的字符或路径攻击关键字。    if "../" in knowledge_base_id:。        return False。    return True。。。async def upload_file(。        file: UploadFile = File(description="A single binary file"),。        knowledge_base_id: str = Form(..., description="Knowledge Base Name", example="kb1"),。):。    if not validate_kb_name(knowledge_base_id):。        return BaseResponse(code=403, msg="Don't attack me", data=[])。。    saved_path = get_doc_path(knowledge_base_id)。    if not os.path.exists(saved_path):。        os.makedirs(saved_path)。。    file_content = await file.read()  # 读取上传文件的内容。。    file_path = os.path.join(saved_path, file.filename)。    if os.path.exists(file_path) and os.path.getsize(file_path) == len(file_content):。        file_status = f"文件 {file.filename} 已存在。"。        return BaseResponse(code=200, msg=file_status)。。    with open(file_path, "wb") as f:。        f.write(file_content)。。    vs_path = get_vs_path(knowledge_base_id)。    vs_path, loaded_files = local_doc_qa.init_knowledge_vector_store([file_path], vs_path)。    if len(loaded_files) > 0:。        file_status = f"文件 {file.filename} 已上传至新的知识库，并已加载知识库，请开始提问。"。        return BaseResponse(code=200, msg=file_status)。    else:。        file_status = "文件上传失败，请重新上传"。        return BaseResponse(code=500, msg=file_status)。。。async def upload_files(。        files: Annotated[。            List[UploadFile], File(description="Multiple files as UploadFile")。        ],。        knowledge_base_id: str = Form(..., description="Knowledge Base Name", example="kb1"),。):。    if not validate_kb_name(knowledge_base_id):。        return BaseResponse(code=403, msg="Don't attack me", data=[])。。    saved_path = get_doc_path(knowledge_base_id)。    if not os.path.exists(saved_path):。        os.makedirs(saved_path)。    filelist = []。    for file in files:。        file_content = ''。        file_path = os.path.join(saved_path, file.filename)。        file_content = await file.read()。        if os.path.exists(file_path) and os.path.getsize(file_path) == len(file_content):。            continue。        with open(file_path, "wb") as f:。            f.write(file_content)。        filelist.append(file_path)。    if filelist:。        vs_path = get_vs_path(knowledge_base_id)。        vs_path, loaded_files = local_doc_qa.init_knowledge_vector_store(filelist, vs_path)。        if len(loaded_files):。            file_status = f"documents {', '.join([os.path.split(i)[-1] for i in loaded_files])} upload success"。            return BaseResponse(code=200, msg=file_status)。    file_status = f"documents {', '.join([os.path.split(i)[-1] for i in loaded_files])} upload fail"。    return BaseResponse(code=500, msg=file_status)。。。async def list_kbs():。    # Get List of Knowledge Base。    if not os.path.exists(KB_ROOT_PATH):。        all_doc_ids = []。    else:。        all_doc_ids = [。            folder。            for folder in os.listdir(KB_ROOT_PATH)。            if os.path.isdir(os.path.join(KB_ROOT_PATH, folder))。               and os.path.exists(os.path.join(KB_ROOT_PATH, folder, "vector_store", "index.faiss"))。        ]。。    return ListDocsResponse(data=all_doc_ids)。。。async def list_docs(。        knowledge_base_id: str = Query(..., description="Knowledge Base Name", example="kb1")。):。    if not validate_kb_name(knowledge_base_id):。        return ListDocsResponse(code=403, msg="Don't attack me", data=[])。。    knowledge_base_id = urllib.parse.unquote(knowledge_base_id)。    kb_path = get_kb_path(knowledge_base_id)。    local_doc_folder = get_doc_path(knowledge_base_id)。    if not os.path.exists(kb_path):。        return ListDocsResponse(code=404, msg=f"Knowledge base {knowledge_base_id} not found", data=[])。    if not os.path.exists(local_doc_folder):。        all_doc_names = []。    else:。        all_doc_names = [。            doc。            for doc in os.listdir(local_doc_folder)。            if os.path.isfile(os.path.join(local_doc_folder, doc))。        ]。    return ListDocsResponse(data=all_doc_names)。。。async def delete_kb(。        knowledge_base_id: str = Query(...,。                                       description="Knowledge Base Name",。                                       example="kb1"),。):。    if not validate_kb_name(knowledge_base_id):。        return BaseResponse(code=403, msg="Don't attack me")。。    # TODO: 确认是否支持批量删除知识库。    knowledge_base_id = urllib.parse.unquote(knowledge_base_id)。    kb_path = get_kb_path(knowledge_base_id)。    if not os.path.exists(kb_path):。        return BaseResponse(code=404, msg=f"Knowledge base {knowledge_base_id} not found")。    shutil.rmtree(kb_path)。    return BaseResponse(code=200, msg=f"Knowledge Base {knowledge_base_id} delete success")。。。async def delete_doc(。        knowledge_base_id: str = Query(...,。                                       description="Knowledge Base Name",。                                       example="kb1"),。        doc_name: str = Query(。            ..., description="doc name", example="doc_name_1.pdf"。        ),。):。    if not validate_kb_name(knowledge_base_id):。        return BaseResponse(code=403, msg="Don't attack me")。。    knowledge_base_id = urllib.parse.unquote(knowledge_base_id)。    if not os.path.exists(get_kb_path(knowledge_base_id)):。        return BaseResponse(code=404, msg=f"Knowledge base {knowledge_base_id} not found")。    doc_path = get_file_path(knowledge_base_id, doc_name)。    if os.path.exists(doc_path):。        os.remove(doc_path)。        remain_docs = await list_docs(knowledge_base_id)。        if len(remain_docs.data) == 0:。            shutil.rmtree(get_kb_path(knowledge_base_id), ignore_errors=True)。            return BaseResponse(code=200, msg=f"document {doc_name} delete success")。        else:。            status = local_doc_qa.delete_file_from_vector_store(doc_path, get_vs_path(knowledge_base_id))。            if "success" in status:。                return BaseResponse(code=200, msg=f"document {doc_name} delete success")。            else:。                return BaseResponse(code=500, msg=f"document {doc_name} delete fail")。    else:。        return BaseResponse(code=404, msg=f"document {doc_name} not found")。。。async def update_doc(。        knowledge_base_id: str = Query(...,。                                       description="知识库名",。                                       example="kb1"),。        old_doc: str = Query(。            ..., description="待删除文件名，已存储在知识库中", example="doc_name_1.pdf"。        ),。        new_doc: UploadFile = File(description="待上传文件"),。):。    if not validate_kb_name(knowledge_base_id):。        return BaseResponse(code=403, msg="Don't attack me")。。    knowledge_base_id = urllib.parse.unquote(knowledge_base_id)。    if not os.path.exists(get_kb_path(knowledge_base_id)):。        return BaseResponse(code=404, msg=f"Knowledge base {knowledge_base_id} not found")。    doc_path = get_file_path(knowledge_base_id, old_doc)。    if not os.path.exists(doc_path):。        return BaseResponse(code=404, msg=f"document {old_doc} not found")。    else:。        os.remove(doc_path)。        delete_status = local_doc_qa.delete_file_from_vector_store(doc_path, get_vs_path(knowledge_base_id))。        if "fail" in delete_status:。            return BaseResponse(code=500, msg=f"document {old_doc} delete failed")。        else:。            saved_path = get_doc_path(knowledge_base_id)。            if not os.path.exists(saved_path):。                os.makedirs(saved_path)。。            file_content = await new_doc.read()  # 读取上传文件的内容。。            file_path = os.path.join(saved_path, new_doc.filename)。            if os.path.exists(file_path) and os.path.getsize(file_path) == len(file_content):。                file_status = f"document {new_doc.filename} already exists"。                return BaseResponse(code=200, msg=file_status)。。            with open(file_path, "wb") as f:。                f.write(file_content)。。            vs_path = get_vs_path(knowledge_base_id)。            vs_path, loaded_files = local_doc_qa.init_knowledge_vector_store([file_path], vs_path)。            if len(loaded_files) > 0:。                file_status = f"document {old_doc} delete and document {new_doc.filename} upload success"。                return BaseResponse(code=200, msg=file_status)。            else:。                file_status = f"document {old_doc} success but document {new_doc.filename} upload fail"。                return BaseResponse(code=500, msg=file_status)。。。。async def local_doc_chat(。        knowledge_base_id: str = Body(..., description="Knowledge Base Name", example="kb1"),。        question: str = Body(..., description="Question", example="工伤保险是什么？"),。        streaming: bool = Body(False, description="是否开启流式输出，默认false，有些模型可能不支持。"),。        history: List[List[Optional[str]]] = Body(。            [],。            description="History of previous questions and answers",。            example=[。                [。                    "工伤保险是什么？",。                    "工伤保险是指用人单位按照国家规定，为本单位的职工和用人单位的其他人员，缴纳工伤保险费，由保险机构按照国家规定的标准，给予工伤保险待遇的社会保险制度。",。                ]。            ],。        ),。):。    vs_path = get_vs_path(knowledge_base_id)。    if not os.path.exists(vs_path):。        # return BaseResponse(code=404, msg=f"Knowledge base {knowledge_base_id} not found")。        return ChatMessage(。            question=question,。            response=f"Knowledge base {knowledge_base_id} not found",。            history=history,。            source_documents=[],。        )。    else:。        if (streaming):。            def generate_answer ():。                last_print_len = 0。                for resp, next_history in local_doc_qa.get_knowledge_based_answer(。                    query=question, vs_path=vs_path, chat_history=history, streaming=True。                ):。                    yield resp["result"][last_print_len:]。                    last_print_len=len(resp["result"])。。            return StreamingResponse(generate_answer())。        else:。            for resp, history in local_doc_qa.get_knowledge_based_answer(。                    query=question, vs_path=vs_path, chat_history=history, streaming=True。            ):。                pass。                    。            source_documents = [。                f"""出处 [{inum + 1}] {os.path.split(doc.metadata['source'])[-1]}：\n\n{doc.page_content}\n\n"""。                f"""相关度：{doc.metadata['score']}\n\n"""。                for inum, doc in enumerate(resp["source_documents"])。            ]。。            return ChatMessage(。                question=question,。                response=resp["result"],。                history=history,。                source_documents=source_documents,。            )。。。async def bing_search_chat(。        question: str = Body(..., description="Question", example="工伤保险是什么？"),。        history: Optional[List[List[Optional[str]]]] = Body(。            [],。            description="History of previous questions and answers",。            example=[。                [。                    "工伤保险是什么？",。                    "工伤保险是指用人单位按照国家规定，为本单位的职工和用人单位的其他人员，缴纳工伤保险费，由保险机构按照国家规定的标准，给予工伤保险待遇的社会保险制度。",。                ]。            ],。        ),。):。    for resp, history in local_doc_qa.get_search_result_based_answer(。            query=question, chat_history=history, streaming=True。    ):。        pass。    source_documents = [。        f"""出处 [{inum + 1}] [{doc.metadata["source"]}]({doc.metadata["source"]}) \n\n{doc.page_content}\n\n"""。        for inum, doc in enumerate(resp["source_documents"])。    ]。。    return ChatMessage(。        question=question,。        response=resp["result"],。        history=history,。        source_documents=source_documents,。    )。。。async def chat(。        question: str = Body(..., description="Question", example="工伤保险是什么？"),。        streaming: bool = Body(False, description="是否开启流式输出，默认false，有些模型可能不支持。"),。        history: List[List[Optional[str]]] = Body(。            [],。            description="History of previous questions and answers",。            example=[。                [。                    "工伤保险是什么？",。                    "工伤保险是指用人单位按照国家规定，为本单位的职工和用人单位的其他人员，缴纳工伤保险费，由保险机构按照国家规定的标准，给予工伤保险待遇的社会保险制度。",。                ]。            ],。        ),。):。    if (streaming):。        def generate_answer ():。            last_print_len = 0。            answer_result_stream_result = local_doc_qa.llm_model_chain(。                {"prompt": question, "history": history, "streaming": True})。            for answer_result in answer_result_stream_result['answer_result_stream']:。                yield answer_result.llm_output["answer"][last_print_len:]。                last_print_len = len(answer_result.llm_output["answer"])。            。        return StreamingResponse(generate_answer())。    else:。        answer_result_stream_result = local_doc_qa.llm_model_chain(。            {"prompt": question, "history": history, "streaming": True})。        for answer_result in answer_result_stream_result['answer_result_stream']:。            resp = answer_result.llm_output["answer"]。            history = answer_result.history。            pass。。        return ChatMessage(。            question=question,。            response=resp,。            history=history,。            source_documents=[],。        )。    answer_result_stream_result = local_doc_qa.llm_model_chain(。        {"prompt": question, "history": history, "streaming": True})。。    for answer_result in answer_result_stream_result['answer_result_stream']:。        resp = answer_result.llm_output["answer"]。        history = answer_result.history。        pass。    return ChatMessage(。        question=question,。        response=resp,。        history=history,。        source_documents=[],。    )。。。async def stream_chat(websocket: WebSocket):。    await websocket.accept()。    turn = 1。    while True:。        input_json = await websocket.receive_json()。        question, history, knowledge_base_id = input_json["question"], input_json["history"], input_json[。            "knowledge_base_id"]。        vs_path = get_vs_path(knowledge_base_id)。。        if not os.path.exists(vs_path):。            await websocket.send_json({"error": f"Knowledge base {knowledge_base_id} not found"})。            await websocket.close()。            return。。        await websocket.send_json({"question": question, "turn": turn, "flag": "start"})。。        last_print_len = 0。        for resp, history in local_doc_qa.get_knowledge_based_answer(。                query=question, vs_path=vs_path, chat_history=history, streaming=True。        ):。            await asyncio.sleep(0)。            await websocket.send_text(resp["result"][last_print_len:])。            last_print_len = len(resp["result"])。。        source_documents = [。            f"""出处 [{inum + 1}] {os.path.split(doc.metadata['source'])[-1]}：\n\n{doc.page_content}\n\n"""。            f"""相关度：{doc.metadata['score']}\n\n"""。            for inum, doc in enumerate(resp["source_documents"])。        ]。。        await websocket.send_text(。            json.dumps(。                {。                    "question": question,。                    "turn": turn,。                    "flag": "end",。                    "sources_documents": source_documents,。                },。                ensure_ascii=False,。            )。        )。        turn += 1。。async def stream_chat_bing(websocket: WebSocket):。    """。    基于bing搜索的流式问答。    """。    await websocket.accept()。    turn = 1。    while True:。        input_json = await websocket.receive_json()。        question, history = input_json["question"], input_json["history"]。。        await websocket.send_json({"question": question, "turn": turn, "flag": "start"})。。        last_print_len = 0。        for resp, history in local_doc_qa.get_search_result_based_answer(question, chat_history=history, streaming=True):。            await websocket.send_text(resp["result"][last_print_len:])。            last_print_len = len(resp["result"])。。        source_documents = [。            f"""出处 [{inum + 1}] {os.path.split(doc.metadata['source'])[-1]}：\n\n{doc.page_content}\n\n"""。            f"""相关度：{doc.metadata['score']}\n\n"""。            for inum, doc in enumerate(resp["source_documents"])。        ]。。        await websocket.send_text(。            json.dumps(。                {。                    "question": question,。                    "turn": turn,。                    "flag": "end",。                    "sources_documents": source_documents,。                },。                ensure_ascii=False,。            )。        )。        turn += 1。。async def document():。    return RedirectResponse(url="/docs")。。。def api_start(host, port, **kwargs):。    global app。    global local_doc_qa。。    llm_model_ins = shared.loaderLLM()。。    app = FastAPI()。    # Add CORS middleware to allow all origins。    # 在config.py中设置OPEN_DOMAIN=True，允许跨域。    # set OPEN_DOMAIN=True in config.py to allow cross-domain。    if OPEN_CROSS_DOMAIN:。        app.add_middleware(。            CORSMiddleware,。            allow_origins=["*"],。            allow_credentials=True,。            allow_methods=["*"],。            allow_headers=["*"],。        )。    # 修改了stream_chat的接口，直接通过ws://localhost:7861/local_doc_qa/stream_chat建立连接，在请求体中选择knowledge_base_id。    app.websocket("/local_doc_qa/stream_chat")(stream_chat)。。    app.get("/", response_model=BaseResponse, summary="swagger 文档")(document)。。    # 增加基于bing搜索的流式问答。    # 需要说明的是，如果想测试websocket的流式问答，需要使用支持websocket的测试工具，如postman,insomnia。    # 强烈推荐开源的insomnia。    # 在测试时选择new websocket request,并将url的协议改为ws,如ws://localhost:7861/local_doc_qa/stream_chat_bing。    app.websocket("/local_doc_qa/stream_chat_bing")(stream_chat_bing)。。    app.post("/chat", response_model=ChatMessage, summary="与模型对话")(chat)。。    app.post("/local_doc_qa/upload_file", response_model=BaseResponse, summary="上传文件到知识库")(upload_file)。    app.post("/local_doc_qa/upload_files", response_model=BaseResponse, summary="批量上传文件到知识库")(upload_files)。    app.post("/local_doc_qa/local_doc_chat", response_model=ChatMessage, summary="与知识库对话")(local_doc_chat)。    app.post("/local_doc_qa/bing_search_chat", response_model=ChatMessage, summary="与必应搜索对话")(bing_search_chat)。    app.get("/local_doc_qa/list_knowledge_base", response_model=ListDocsResponse, summary="获取知识库列表")(list_kbs)。    app.get("/local_doc_qa/list_files", response_model=ListDocsResponse, summary="获取知识库内的文件列表")(list_docs)。    app.delete("/local_doc_qa/delete_knowledge_base", response_model=BaseResponse, summary="删除知识库")(delete_kb)。    app.delete("/local_doc_qa/delete_file", response_model=BaseResponse, summary="删除知识库内的文件")(delete_doc)。    app.post("/local_doc_qa/update_file", response_model=BaseResponse, summary="上传文件到知识库，并删除另一个文件")(update_doc)。。    local_doc_qa = LocalDocQA()。    local_doc_qa.init_cfg(。        llm_model=llm_model_ins,。        embedding_model=EMBEDDING_MODEL,。        embedding_device=EMBEDDING_DEVICE,。        top_k=VECTOR_SEARCH_TOP_K,。    )。    if kwargs.get("ssl_keyfile") and kwargs.get("ssl_certfile"):。        uvicorn.run(app, host=host, port=port, ssl_keyfile=kwargs.get("ssl_keyfile"),。                    ssl_certfile=kwargs.get("ssl_certfile"))。    else:。        uvicorn.run(app, host=host, port=port)。。。if __name__ == "__main__":。    parser.add_argument("--host", type=str, default="0.0.0.0")。    parser.add_argument("--port", type=int, default=7861)。    parser.add_argument("--ssl_keyfile", type=str)。    parser.add_argument("--ssl_certfile", type=str)。    # 初始化消息。。    args = parser.parse_args()。    args_dict = vars(args)。    shared.loaderCheckPoint = LoaderCheckPoint(args_dict)。    api_start(args.host, args.port, ssl_keyfile=args.ssl_keyfile, ssl_certfile=args.ssl_certfile)。。```。如何，没问题的话，就关issue了。
[issue#336] 聊天类型 本地问答问题。加入待办。聊天类型：不启用 应该就可以。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/7cee548f-b170-480d-b6ea-24735c6a5907)。。
[issue#337] 🚀 GUI优化。![动画1](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/58d96e4b-beef-4283-a41b-f04be86c00f0)。暂时就这样了。凑合用。。。。后期改用webui，弃用pyqt。
[issue#338] 新增积分页的GUI实现，并且优化了UI部分动态加载数据的源码。
[issue#339] 新增通义千问的接入；更新投资人信息。
[issue#340] 补充通义千问依赖；GUI的下拉选择框支持编辑，可以填入关键词进行直接的搜索。
[issue#341] 补充遗漏依赖库；更新违禁词库；。
[issue#342] 🙋 1.智谱AI弹幕斜杠产生的乱码。 2.违禁词不能提前触达导致的生成内容和弹幕朗读（以及恶意关闭） 3.本地库的模糊调用效果不佳，且弹幕姬与读弹无生成。 4.问题前预输入文字是否可更改为能及时调整或批次输入。。1.https://github.com/Ikaros-521/AI-Vtuber/commit/654c4a20656b5a678a87aea02c5d3781e8b03f5d （待验证）。2.https://github.com/Ikaros-521/AI-Vtuber/commit/8e8c8da3d781e205881939c3a65e96eaf392e74f （恶意关闭问题待细化问题点）。3. https://github.com/Ikaros-521/AI-Vtuber/commit/224316e53a409deeff3243ecec8d2e783ccb3946  （问答库匹配本身就是模糊命中，换llm做这效果，建议直接关掉本地问答库功能，直接在llm实现；单独的调教页倒是可以考虑看看）。4. 实时调整配置项确实有点麻烦，虽然可以每次重新读取config配置，但会涉及到保存问题。预估在webui版本中有所优化。智谱回复内容过滤：https://github.com/Ikaros-521/AI-Vtuber/pull/365。无TTS合成的LLM调教形式，排入开发计划。调教功能：https://github.com/Ikaros-521/AI-Vtuber/pull/552。
[issue#343] 更新投资人；修复通义千问必须配置文件的bug。
[issue#344] 音频部分相关的优化（音频输出路径自定义等）。
[issue#345] 🚀 关于智谱characterglm调用实现的请求。基本功能已经实现：https://github.com/Ikaros-521/AI-Vtuber/pull/346。GUI未适配。GUI已适配：https://github.com/Ikaros-521/AI-Vtuber/pull/347。牛批。![N24NL(JSDE3$}A1G6~9ZQ~J](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/3b073590-c752-4963-8c34-8923ca293aac)。。
[issue#346] 智谱AI新增CharacterGLM模型，GUI未适配；追加部分通用配置内容；删除部分违禁词。
[issue#347] 智谱AI characterglm模型GUI适配。
[issue#348] 更新投资人信息。
[issue#349] 文案语音合成失败。更新版本 https://github.com/Ikaros-521/AI-Vtuber/commit/36ab43d12d46f6840f18df5174eace5770393608。
[issue#350] 智谱AI新增characterglm相关配置；新增按键映射配置，执行晚于其他3个模式（GUI未适配）；更新投资人信息。
[issue#351] 按键映射功能，新增配置项-起始命令。
[issue#352] 修复文案音频合成bug补充genshinvoice的兼容（不确保没新bug）。
[issue#353] 补充遗漏的pyautogui库。
[issue#354] webui新增答谢、按键映射板块的配置功能；按键映射增加日志输出；更新投资人。
[issue#355] 更新文档和思维导图。
[issue#356] 修复图片路径错误问题。
[issue#357] 虚拟身体部分对接xuniren项目（具体使用待讲解）。
[issue#358] 改默认虚拟身体配置为其他。
[issue#359] 补充webui整合包启动脚本。
[issue#360] 修复投资人图片路径问题。
[issue#361] 补充遗漏的nicegui依赖。
[issue#362] 修改按键映射的函数调用为按下释放，配置结构调整为单个按键多行配置的形式。
[issue#363] 修复平台配置bug；新增音频随机变速、Live2D、定时任务的配置项；删减部分违禁词。
[issue#364] 补全通用配置页；修复配置上部分bug。
[issue#365] 智谱AI新增无用内容删除，让回复更加正常点，不用把相关描述也输出。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/a33a1bb4-e9d9-4d34-9b96-19e5873a66d4)。。
[issue#366] 提供多按键映射的配置实例；修复多按键映射bug。
[issue#367] GUI增加按键映射配置板块；修改相似度配置项为字符串类型。
[issue#368] 希望添加积分排行榜网页前端。前端开发工作量较大，后期暂时以日志形式输出前x个用户排名。
[issue#369] webui新增文案页部分配置功能；补充积分页配置功能（修复部分bug）。
[issue#370] webui新增部分聊天页配置功能；修改watchfiles日志等级。
[issue#371] webui增加聊天输入框及发送按钮；修复webui运行都是b站的问题；优化webui的UI样式。
[issue#372] 提高httpx日志等级；修复本地问答音频库触发后，会合成多余内容的bug。
[issue#373] 接入YouTube。
[issue#374] 修复webui，语音合成配置不生效bug。
[issue#375] 接入twitch；部分优化。
[issue#376] 修正twitch依赖库库名。
[issue#377] 修复斗鱼监听失败bug。
[issue#378] b站登录新增2种登录方式。
[issue#379] 更新思维导图。
[issue#380] 新增哔哩哔哩监听方案2（后期实测稳定性）。。![FL $KD@LC2FEP`KS@LCKWGS](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/a9b8c31a-9fdb-480d-834d-504e05e9072d)。。![AOT~`9EG1BF( U34H{RI)74](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/de7c73de-cfdc-482a-b898-8dae98950a5c)。。
[issue#381] 🙋 ModuleNotFoundError: No module named 'blivedm.models.web'; 'blivedm.models' is not a package。https://github.com/xfgryujk/blivedm 下载源码。手动拷贝源码到第三方库。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/544851e5-c737-49ed-9564-38e49119a93d)。。
[issue#383] 修复b站监听方案2的用户名获取失败bug。
[issue#384] webui增加登录页；美化UI。
[issue#385] webui新增登录页使能，咱本地使用不需要登录！。
[issue#386] 删除遗漏的登录页按钮。
[issue#387] 更新投资人信息。
[issue#389] 新增更简易的流程图；更新合作伙伴等。
[issue#390] webui新增虚拟身体配置页面；修改webui图标和标题，拉出关键传参。
[issue#391] 支持智谱新模型32k；webui补充虚拟身体配置项；webui新增开关灯功能；删减部分违禁词。
[issue#392] 优化webui文本错误部分及UI排版；删减部分违禁词。
[issue#393] 优化webui的排版。
[issue#394] 删除部分Live2D模型。
[issue#395] 🙋 twitch无法监听到弹幕。！！！注意：如果 你的token 和你监听的直播间是 同一个账号！！！，那会自动过滤你自己发送的弹幕！！！。
[issue#396] 按键映射新增配置项 类型，可支持弹幕或回复触发；升级星火库到1.5.0；修订违禁词。
[issue#397] 按键映射 回复类型下，其触发规则改为 回复内容包含关键词即触发；星火新增版本配置项。
[issue#398] 删减违禁词；新增audio_player的对接，内测阶段，bug较多，不建议使用。
[issue#399] 更新投资人信息。
[issue#400] 使用文案页合成音频时报错，但聊天页可正常合成音频。文案音频的合成并没有兼容所有的tts，bert估计没做兼容。应该是这个问题，已经更新 https://github.com/Ikaros-521/AI-Vtuber/pull/404。> 应该是这个问题，已经更新 #404。。你好，我刚刚用了您更新过的完整版本文件（覆盖原整合包，可正常运行），发现问题依旧存在，已检查过audio.py更新代码，确认有更新成功，可能还得麻烦您再看一下，辛苦了！。<img width="705" alt="QQ20231107-151142@2x" src="https://github.com/Ikaros-521/AI-Vtuber/assets/16449708/3128d381-fa6a-40dc-9b97-99a2b769bfa1">。。看看你tts的配置，这个type怎么会错呢，这个type我记得是下拉选择框呀。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/ccfe4dc7-8fe6-4381-aa4e-e16ef1306fff)。。> 看看你tts的配置，这个type怎么会错呢，这个type我记得是下拉选择框呀 ![image](https://user-images.githubusercontent.com/40910637/280952907-ccfe4dc7-8fe6-4381-aa4e-e16ef1306fff.png)。。你好，我检查了下，类型刚才是有选错。但后来我选择“Bert-vits2”之后再尝试，依旧是相同的报错。。<img width="646" alt="QQ20231107-153039@2x" src="https://github.com/Ikaros-521/AI-Vtuber/assets/16449708/c02dc124-d5dd-45ef-adeb-3edd001a31e9">。。目前的情况是，VITS类型换为“Bert-vits2”，使用“聊天页”可正常生成语音，相关指令有被 vits-simple-api 识别转换：。<img width="679" alt="QQ20231107-153151@2x" src="https://github.com/Ikaros-521/AI-Vtuber/assets/16449708/4e1d0803-420d-4b5f-92de-3db66a6cdcad">。。但在“文案页”生成语音，vits-simple-api 并没有接收到新消息，运行页依旧有如下报错：。<img width="658" alt="QQ20231107-153330@2x" src="https://github.com/Ikaros-521/AI-Vtuber/assets/16449708/568ad9f3-009a-44a9-8c9d-da3177046e01">。。。ok 回头我看看，那就问题不简单了。> ok 回头我看看，那就问题不简单了。。嗯嗯，辛苦您了！。不过其实我是不建议使用内置的进行文案合成的，还是外面单独合成后，把音频合并下比较好。。内置的这块合成 之后也是准备拆一个单独的项目出来重新优化下。> 不过其实我是不建议使用内置的进行文案合成的，还是外面单独合成后，把音频合并下比较好。 内置的这块合成 之后也是准备拆一个单独的项目出来重新优化下。。嗯，主要是体感上集成在一起确实能方便不少，文案页能正常运作的话还是很给力的！。暂时还是能修一修的（）。> 暂时还是能修一修的（）。。那太好了，感恩感恩！。已修复 https://github.com/Ikaros-521/AI-Vtuber/pull/413。文案合成 单独项目，已排入开发计划。
[issue#401] 🙋 讯飞星火 报错 version问题。更新库整合包命令参考，项目根目录执行 `Miniconda3\python.exe -m pip install sparkdesk-api -U`。
[issue#402] 通义千问不再适用;修复audio_player模式下，取消点歌失效的bug。
[issue#403] 新增纯特殊字符和空格组成的文本的合成过滤，避免tts合成错误音频。
[issue#404] 文案页 文案合成 vits传参补充遗漏的sdp_radio。
[issue#405] 删减违禁词。
[issue#406] 优化chatgpt特殊情况下token一直超长问题。
[issue#407] 优化chatgpt特殊情况下token一直超长问题,2次都超长，直接清空上下文。
[issue#408] 增加伊卡洛斯本地问答数据。
[issue#409] 优化chatgpt特殊情况下token一直超长问题。
[issue#410] 优化chatgpt特殊情况下token一直超长问题。
[issue#411] 新增闲时任务功能（UI未适配）。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/b5441ce9-a504-4eec-a5bb-254ff53b8c3f)。。
[issue#412] 闲时任务-本地音频 传递的内容改为文件名，而非完整路径。
[issue#413] 修复文案页-tts用vits时，无法合成文案音频的bug。
[issue#414] 闲时任务功能UI适配；删减违禁词。
[issue#415] 对闲时任务的闲时时间强制转型为int；更新投资人。
[issue#416] 新增openai tts接入；删减违禁词。
[issue#417] 补充GUI遗漏的OpenAI TTS配置。
[issue#418] 补充遗漏的依赖。
[issue#419] webui新增 页面配置页，暂时支持设置UI主题。
[issue#420] 优化webui提示框。
[issue#421] 🙋 twitch无限打印错误日志问题。做了重连和多次重连失败关闭程序的机制。
[issue#422] TTS新增tts.ai-lab.top的接入（webui已适配）。
[issue#423] 🙋 Mac部署问题讨论。pyaudio安装失败，先`brew install portaudio`，再安装pyaudio。。pyqt5手动安装一下，走清华源。。pyqt5-tools 安装失败，跳过，不影响使用。。`brew install ffmpeg`安装。。同样手动安装 blivedm。。`pip install pure_protobuf==3.0.0a5`。pyvirtualcam 不支持Mac，需要屏蔽SD相关的功能。```。Traceback (most recent call last):。  File "/Users/fameidetuoyanghetanghesuan/Desktop/AI-Vtuber/main.py", line 9, in <module>。    from PyQt5.QtWidgets import QApplication, QMainWindow, QMessageBox, QLabel, QComboBox, QLineEdit, QTextEdit, QCheckBox, QGroupBox。ImportError: dlopen(/Users/fameidetuoyanghetanghesuan/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/PyQt5/QtWidgets.abi3.so, 0x0002): Symbol not found: __ZTVNSt3__13pmr25monotonic_buffer_resourceE。  Referenced from: <8239A761-D3BE-396C-A445-F703655273B5> /Users/fameidetuoyanghetanghesuan/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/PyQt5/Qt5/lib/QtWidgets.framework/Versions/5/QtWidgets。  Expected in:     <3EE92404-8FC3-374B-A598-D5C9A8CD64B5> /usr/lib/libc++.1.dylib。```。。暂时无法解决，放弃pyqt5。```。2023-11-11 21:01:01,653 - /Users/1/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/app/app.py[line:118] - ERROR: [Errno 2] No such file or directory: 'data\\edge-tts-voice-list.txt'。Traceback (most recent call last):。  File "/Users/1/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/events.py", line 401, in handle_event。    result = handler(arguments) if expects_arguments else handler()。  File "/Users/1/Desktop/AI-Vtuber/webui.py", line 1776, in <lambda>。    button_login = ui.button('登录', on_click=lambda: my_login()).style("width:250px;")。  File "/Users/1/Desktop/AI-Vtuber/webui.py", line 1760, in my_login。    goto_func_page()。  File "/Users/1/Desktop/AI-Vtuber/webui.py", line 1299, in goto_func_page。    with open('data\edge-tts-voice-list.txt', 'r') as file:。FileNotFoundError: [Errno 2] No such file or directory: 'data\\edge-tts-voice-list.txt'。```。。路径语法改为 /。```。Traceback (most recent call last):。  File "/Users/fameidetuoyanghetanghesuan/Desktop/AI-Vtuber/bilibili2.py", line 16, in <module>。    import blivedm。  File "/Users/fameidetuoyanghetanghesuan/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/blivedm/__init__.py", line 2, in <module>。    from .handlers import *。  File "/Users/fameidetuoyanghetanghesuan/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/blivedm/handlers.py", line 5, in <module>。    from .clients import ws_base。  File "/Users/fameidetuoyanghetanghesuan/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/blivedm/clients/__init__.py", line 2, in <module>。    from .web import *。  File "/Users/fameidetuoyanghetanghesuan/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/blivedm/clients/web.py", line 9, in <module>。    from . import ws_base。  File "/Users/fameidetuoyanghetanghesuan/opt/miniconda3/envs/aivtb/lib/python3.10/site-packages/blivedm/clients/ws_base.py", line 11, in <module>。    import brotli。ModuleNotFoundError: No module named 'brotli'。```。。`pip install brotli`。。虚拟声卡 VB-audio不支持Mac。改用 `brew install blackhole-16ch` https://github.com/ExistentialAudio/BlackHole。运行后退出仍然存在端口占用，进程挂在后台问题，请kill掉相关进程后重启。> D5C9A8CD64B5。。brew 去安装PyQt@5，安装完将sit包里面的 PyQt@5 相关拷贝到 python包里面的sit包里面。> > D5C9A8CD64B5。> 。> brew 去安装PyQt@5，安装完将sit包里面的 PyQt@5 相关拷贝到 python包里面的sit包里面。![()_3TW8J$WO~62{ 3VROL A](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/e454be20-ecd8-4e05-b490-dea98a9a1b9c)。。。> pyvirtualcam。。pyvirtualcam GitHub 说支持 Mac，但我在 M1 上直接安装失败。M1 使用这个命令源码安装成功。https://github.com/letmaik/pyvirtualcam/issues/97#issuecomment-1537219406。> > pyvirtualcam
> 
> pyvirtualcam GitHub 说支持 Mac，但我在 M1 上直接安装失败
> M1 使用这个命令源码安装成功
> https://github.com/letmaik/pyvirtualcam/issues/97#issuecomment-1537219406

好好好。mac想弄抖音是不是够呛了 我看文档还得安装第三方的exe依赖。> mac想弄抖音是不是够呛了 我看文档还得安装第三方的exe依赖

确实，得自行编译。16G 512G mac m1使用PD虚拟机运行windows整包行吗 。Mac M1在使用keyboard库时百分百复现问题Process finished with exit code 139 (interrupted by signal 11: SIGSEGV)，注释后可以正常使用。> 16G 512G mac m1使用PD虚拟机运行windows整包行吗 

试试 配置肯定是够的 主要是虚拟机好不好用。> Mac M1在使用keyboard库时百分百复现问题Process finished with exit code 139 (interrupted by signal 11: SIGSEGV)，注释后可以正常使用

这库没记错好像确实不兼容mac。AttributeError: module 'pygetwindow' has no attribute 'getWindowsWithTitle' mac。。> AttributeError: module 'pygetwindow' has no attribute 'getWindowsWithTitle' mac。。`pip install pygetwindow`试试，不行的话 那只能删掉对应功能了。Traceback (most recent call last):。  File "/Users/fengluo/AI-Vtuber/webui.py", line 15, in <module>。    from utils.audio import Audio。  File "/Users/fengluo/AI-Vtuber/utils/audio.py", line 16, in <module>。    from elevenlabs import generate, play, set_api_key。ImportError: cannot import name 'generate' from 'elevenlabs' (/opt/miniconda3/envs/py310/lib/python3.10/site-packages/elevenlabs/__init__.py)。这个咋解决呢？。。> elevenlabs。。降低elevenlabs版本到1.x。> > elevenlabs。> 。> 降低elevenlabs版本到1.x。。(py310)  ➜ AI-Vtuber % pip show elevenlabs。Name: elevenlabs。Version: 1.0.5。Summary:。Home-page:。Author:。Author-email:。License:。Location: /opt/miniconda3/envs/py310/lib/python3.10/site-packages。Requires: httpx, ipython, pydantic, requests, typing_extensions, websockets。。就是1.0.5的版本呢~~ 。python webui.py。pygame 2.5.2 (SDL 2.28.3, Python 3.12.3)。Hello from the pygame community. https://www.pygame.org/contribute.html。Traceback (most recent call last):。  File "/Users/macbook/project/AI-Vtuber/webui.py", line 15, in <module>。    from utils.audio import Audio。  File "/Users/macbook/project/AI-Vtuber/utils/audio.py", line 16, in <module>。    from elevenlabs import generate, play, set_api_key。ImportError: cannot import name 'generate' from 'elevenlabs' (/usr/local/lib/python3.12/site-packages/elevenlabs/__init__.py)。。。$ pip show elevenlabs。Name: elevenlabs。Version: 1.2.0。Summary: 。Home-page: 。Author: 。Author-email: 。License: 。Location: /usr/local/lib/python3.12/site-packages。Requires: httpx, ipython, pydantic, requests, typing_extensions, websockets。Required-by: 。。我遇到这个问题。。。 pip install pydantic===2.0.3。pip install elevenlabs===0.2.27。。就好了。> > > elevenlabs。> > 。> > 。> > 降低elevenlabs版本到1.x。> 。> (py310) ➜ AI-Vtuber % pip show elevenlabs Name: elevenlabs Version: 1.0.5 Summary: Home-page: Author: Author-email: License: Location: /opt/miniconda3/envs/py310/lib/python3.10/site-packages Requires: httpx, ipython, pydantic, requests, typing_extensions, websockets。> 。> 就是1.0.5的版本呢~~。。降到0.x 记错了 emm。
[issue#424] twitch增加重连机制和多次失败停止运行机制；gpt默认token提升到4096；使用linux兼容路径语法；bug修复。
[issue#425] gpt默认token提升到4096。
[issue#426] 优化闲时任务日志输出内容。
[issue#427] 修复webui闲时任务日志bug；webui重启前先停止程序。
[issue#428] 文案机制增加自动播放功能，至此，webui开发已完全覆盖pyqt，开始推进废弃pyqt计划。
[issue#429] 优化配置描述。
[issue#430] 新增 unity第三方项目对接，将LLM等响应数据传给HTTP中转站（可以用于对接其他项目使用）。
[issue#431] 恢复genshinvoice的API调用。
[issue#432] 移动unity对接的启用方式到虚拟身体配置项；恢复错误配置项。
[issue#433] 修复vits不能切换类型的bug；默认不启用webui的登录功能。
[issue#434] 哔哩哔哩方案2新增开放平台对接，使用官方API进行监听，应该是最稳定方案了；禁用文案的自动播放；gpt新增gpt-4-1106-preview。
[issue#435] 音频合成后的路径统一为绝对路径，稳妥点。
[issue#436] 新增翻译功能，暂时接入百度翻译API，可以配置弹幕或回复内容翻译。
[issue#438] 修复百度翻译配置读取错误问题。
[issue#439] 更新思维导图和文档。
[issue#440] 🚀 程序异常报警机制。初步实现：https://github.com/Ikaros-521/AI-Vtuber/pull/536。https://github.com/Ikaros-521/AI-Vtuber/pull/553。
[issue#441] webui 页面配置 新增 账号管理配置，可以自定义是否启用登录功能、修改账号密码；webui修复 聊天页 直接复读bug。
[issue#442] 更新logo。
[issue#443] 修复pyqt b站配置项错误问题；webui 文档页直接内嵌在线文档，方便用户直接查看。
[issue#444] webui补充遗漏的 点歌模式 配置。
[issue#445] 紧急关闭webui公网访问。
[issue#446] unity对接新增密码；着手开发异常报警功能。
[issue#447] 修复webui 过滤配置 文字描述错误问题。
[issue#448] 修复webui 睿声AI配置项描述错误问题。
[issue#449] 🐛 genshinvoice.top合成语音异常。
[issue#450] 按键映射改为实际使用情况下的配置情况；webui补充遗漏的内置Live2D启动功能；优化webui配置项描述。
[issue#451] 修复webui 聊天页 直接复读无法使用的bug。
[issue#452] 🐛 聊天页 发送文案后，会出现同时播放2个音频的问题。#https://github.com/Ikaros-521/AI-Vtuber/pull/457。
[issue#453] 🐛 聊天页tts和弹幕回复不同步。聊天页 audio实例独立运行的机制会有bug存在，待优化。实现修改为http请求，https://github.com/Ikaros-521/AI-Vtuber/pull/457。
[issue#454] 更新投资人；删减违禁词；webui配置描述bug修复。
[issue#455] chatgpt增加请求超时时间，默认30s。
[issue#456] 修复按键映射描述错误问题。
[issue#457] 平台程序新增flask，创建http接口，修改webui的聊天页文本框为http请求对接的形式。平台程序新增flask，创建http接口，修改webui的聊天页文本框为http请求对接的形式，修复了聊天页发送内容实例化2次My_handle类造成双重音频的问题。
[issue#458] 补充遗漏的依赖。
[issue#459] 修复talk缺失的全局变量。
[issue#460] 更新投资人。
[issue#461] 更新投资人。
[issue#462] 新增备份配置和数据脚本，懒人包脚本位于Scripts文件夹内。
[issue#463] 🐛智谱ai设定在webui上无法保存更改。已修复 https://github.com/Ikaros-521/AI-Vtuber/pull/465。
[issue#464] 更新文档和思维导图；更新投资人。
[issue#465] 修复webui 智谱AI部分配置无法保存的bug。
[issue#466] 补充实例情况下的按键映射配置。
[issue#467] 点歌模式命令改为多命令形式。
[issue#468] 更新投资人。
[issue#469] 更新投资人。
[issue#470] 🙋 pydantic.errors.PydanticUserError: If you use `@root_validator` with pre=False (the default) you MUST specify `skip_on_failure=True`.。降低版本 `pip install pydantic==1.10.7`。
[issue#471] 升级备份脚本，补充遗漏的out文件夹，改备份为强制覆盖。
[issue#472] 接入langchain_chatchat；tts请求新增请求超时，默认60s；优化talk部分源码。
[issue#473] chatgpt兼容0.x.x和1.x.x版本。
[issue#474] 更新投资人。
[issue#475] 接入文心一言官方API。
[issue#476] 更新投资人。
[issue#477] 聊天模式 支持动态修改语音识别相关配置，从而实现多语言识别；config类删除单例（待测试）。
[issue#478] 优化聊天页UI。
[issue#480] 文案页 支持增删文案组。
[issue#481] talk 后移线程到麦克风监听后，规避麦克风监听异常的bug。
[issue#482] 优化tts异常日志。
[issue#483] 追加违禁词。
[issue#484] 智谱AI 新增chatglm_turbo。
[issue#485] 恢复tts.ai-lab.top的兼容，新使用方法参考文档说明。
[issue#486] 优化tts、webui代码。
[issue#487] 恢复对claude2的支持。哦吼！干得好呀。
[issue#488] 新增huggingface bert_vits2的gradio接口调用demo。
[issue#489] 优化简介。
[issue#490] 🙋 RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)。问题：pydub依赖ffmpeg，但环境不存在ffmpeg。。解决方案：安装ffmpeg并配置环境变量。。ffmpeg安装教程：[ffmpeg安装教程](https://blog.csdn.net/HYEHYEHYE/article/details/122000352)。。ffmpeg官方下载：[ffmpeg.org/download.html](https://ffmpeg.org/download.html)。。ffmpeg本仓库内下载：[releases](https://github.com/Ikaros-521/AI-Vtuber/releases/tag/v0.13.0)。。简述就是下载，解压，配置 ffmpeg 的 bin 到系统环境变量path中，完事。。
[issue#491] 🙋 使用ChatGPT API，报错：error_message='You exceeded your current quota, please check your plan and billing details.'。可能是API KEY过期了/额度没了，请检查API KEY是否可用。。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/2ac9583a-4667-4d17-abe2-8051deeff08e)。。在线测试参考：。[ChatGPT-Html](https://ikaros521.eu.org/chatgpt-html/)。[ChatGPT-Next-Web](https://chat-gpt-next-web-ikaros-521.vercel.app/)。
[issue#492] 🙋 Miniconda3\Scripts\playwright.exe install Fatal error in launcher: Unable to create process using '"D:\GitHub_pro\AI-Vtuber-20230729\Miniconda3\python.exe" "D:\ai3\AI-Vtuber-20230825\Miniconda3\Scripts\playwright.exe" install': ???????????。playwright安装浏览器内核失败。。。解决方案：重新安装playwright，需要注意，前提是激活了本地环境。```。pip uninstall playwright。pip install playwright。playwright install。```。快手需要安装火狐内核，参考：playwright install firefox。
[issue#493] 优化线程启动实现，功能没启用不启动线程。
[issue#494] 更新投资人。
[issue#495] 聊天模式 翻译配置支持热加载，优化代码实现。
[issue#496] 🚀 根据直播间数据，动态的调整配置。由于数据源本身的原因，暂时只适配了抖音 https://github.com/Ikaros-521/AI-Vtuber/pull/507。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/4f84b5eb-4622-44a0-887e-1f490424838d)。。
[issue#497] text_generation_webui支持上下文记忆；修复百度语音输入，不知道什么时候速率多了个1的问题。
[issue#498] 🐛哔哩哔哩方案1 手机扫描 不能使用。被官方风控了,建议更换方案2。```Error: HTTP 412 - <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">。<html lang="zh-cn">。。<head>。    <meta http-equiv="Access-Control-Allow-Origin" content="*" />。    <meta http-equiv="Page-Enter" content="blendTrans(Duration=0.5)">。    <meta http-equiv="Page-Exit" content="blendTrans(Duration=0.5)">。    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">。    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">。    <meta name="spm_prefix" content="333.937">。    <title>出错啦! - bilibili.com</title>。    <link rel="shortcut icon" href="//static.hdslb.com/images/favicon.ico">。    <script type="text/javascript" src="//s1.hdslb.com/bfs/static/jinkela/long/js/jquery/jquery1.7.2.min.js"></script>。。</head>。。<body>。    <div class="error-container">。        <div class="txt-item err-code">错误号:412</div>。        <div class="txt-item err-text">由于触发哔哩哔哩安全风控策略，该次访问请求被拒绝。</div>。        <div class="txt-item">The request was rejected because of the bilibili security control policy.</div>。        <div class="txt-item datetime_now"></div>。        <div class="txt-item user_url"></div>。        <div class="txt-item user_ip"></div>。        <div class="txt-item user_id"></div>。        <div class="check-input">。            <div class="title"></div>。            <div class="box-pic"></div>。            <div class="box"></div>。            <div class="state"></div>。        </div>。    </div>。    <script type="text/javascript" charset="utf-8" src="//security.bilibili.com/static/js/sha256.min.js"></script>。    <script type="text/javascript" charset="utf-8" src="//security.bilibili.com/static/js/js.cookie.min.js"></script>。    <script type="text/javascript" charset="utf-8" src="//security.bilibili.com/static/js/412.js"></script>。</body>。</html>。2023-12-07 23:20:46,150 - D:\GitHub_pro\AI-Vtuber\bilibili.py[line:422] - ERROR: Traceback (most recent call last):。  File "D:\GitHub_pro\AI-Vtuber\bilibili.py", line 406, in start_server。    credential = login.login_with_qrcode()。  File "D:\GitHub_pro\AI-Vtuber\venv\lib\site-packages\bilibili_api\login.py", line 129, in login_with_qrcode。    qrcode_data = update_qrcode_data()。  File "D:\GitHub_pro\AI-Vtuber\venv\lib\site-packages\bilibili_api\login.py", line 103, in update_qrcode_data。    return qrcode_data。UnboundLocalError: local variable 'qrcode_data' referenced before assignment。```。https://github.com/Ikaros-521/AI-Vtuber/issues/513。
[issue#499] 更新投资人。
[issue#500] 🚀 对接 微信视频号。https://github.com/Ikaros-521/AI-Vtuber/pull/524。
[issue#501] 接入 通义星尘；删减违禁词。https://xingchen.aliyun.com/。
[issue#502] 更新思维导图。
[issue#503] 答谢模块 文案部分改为多行文案随机获取。
[issue#504] 补充遗漏依赖。
[issue#505] 统一依赖文件，全下载得了，麻烦。
[issue#506] 优化通义千问报错日志。
[issue#507] 新增 动态配置功能，暂时仅针对抖音，可以根据在线人数动态切换配置内容实现改话术、配音等功能（大改动！可能有很大的bug)；增加了恢复出厂的功能，但隐藏了按钮。
[issue#508] 聊天模式 新增自定义声卡输入，可以用于实现直播连麦互动效果。
[issue#509] docker。整合包了解一下。。docker不会。docker跑ai vtb不太行，声卡加载有问题，pyautogui加载也有问题（模拟键鼠）。。
[issue#510] 通用配置-音频播放 新增 文本切分启用开关，关闭可以语句一次性合成（TTS吃得消的情况下，吃不消就完蛋）。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/cd285bf3-bcfb-4046-b6f8-9eae484d24fa)。。
[issue#511] 更新投资人。
[issue#512] Add license scan report and status。
[issue#513] 🐛 哔哩哔哩方案1 风控412。
[issue#514] 新增了千帆大模型的接入，但由于版本原因，存在冲突库，导致无法使用。暂时保留源码，后续想其他方案。优化了gpt.py代码。主要问题在pydantic上。
[issue#515] 新增 千帆大模型的接入；对llm相关源码加载和逻辑处理做了大优化，可能有bug，待测试。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/eeef185e-305d-4d10-b7bd-8fdc4b81372f)。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/25b24c00-3afc-41f8-ba57-f4e48404dd1e)。。
[issue#516] 新增API程序，第三方可以通过api控制程序运行、配置修改、直播数据发送等，后续系统全部功能皆可通过api进行操作。 初版发布测试，暂时仅测试了哔哩哔哩2。。
[issue#517] 补充懒人包api运行脚本。
[issue#518] 修复配置文件和源码不匹配的问题。
[issue#519] 新增 极地极光UI配色；修复api 聊天模式相关bug。
[issue#520] 🙋 Linux环境部署专用讨论帖。我想在远程服务器上跑，结果出现了。TypeError: Jinja2Templates.TemplateResponse() got an unexpected keyword argument 'request'。> 我想在远程服务器上跑，结果出现了
> TypeError: Jinja2Templates.TemplateResponse() got an unexpected keyword argument 'request'

jinja2 嘶，具体是哪段代码报的错，看看。这错误还是第一次看见。不好意思，应该是nicegui的版本问题，程序报错没提示哪一行，然后写了一行说是nicegui环境报错了，我更新了一下好了。因为开始报别的错了哈哈哈。。> 不好意思，应该是nicegui的版本问题，程序报错没提示哪一行，然后写了一行说是nicegui环境报错了，我更新了一下好了。因为开始报别的错了哈哈哈
> 

那没事了。您好，我在Linux部署时pip产生了依赖，但是我不懂深度学习，请问一下这个问题该怎么解决？。INFO: pip is looking at multiple versions of gradio to determine which version is compatible with other requirements. This could take a while.。ERROR: Cannot install -r requirements.txt (line 19) and -r requirements.txt (line 76) because these package versions have conflicting dependencies.。。The conflict is caused by:。    langchain 0.0.142 depends on pydantic<2 and >=1。    gradio 4.16.0 depends on pydantic>=2.0。。To fix this you could try to:。1. loosen the range of package versions you've specified。2. remove package versions to allow pip attempt to solve the dependency conflict。。ERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts。我是ubuntu20.04，我的python版本是3.10.13。此外requirements.txt的逻辑应该是存在问题的，如果不先安装requests这个库那么执行pip install -r requirements.txt时就会因为无法完成请求而错误退出。> 您好，我在Linux部署时pip产生了依赖，但是我不懂深度学习，请问一下这个问题该怎么解决？ INFO: pip is looking at multiple versions of gradio to determine which version is compatible with other requirements. This could take a while. ERROR: Cannot install -r requirements.txt (line 19) and -r requirements.txt (line 76) because these package versions have conflicting dependencies.。> 。> The conflict is caused by: langchain 0.0.142 depends on pydantic<2 and >=1 gradio 4.16.0 depends on pydantic>=2.0。> 。> To fix this you could try to:。> 。> 1. loosen the range of package versions you've specified。> 2. remove package versions to allow pip attempt to solve the dependency conflict。> 。> ERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts 我是ubuntu20.04，我的python版本是3.10.13。此外requirements.txt的逻辑应该是存在问题的，如果不先安装requests这个库那么执行pip install -r requirements.txt时就会因为无法完成请求而错误退出。。手动安装一下冲突库就行了，pydantic维持在1.10.13。          import aiohttp。      ModuleNotFoundError: No module named 'aiohttp'。      [end of output]。  。  note: This error originates from a subprocess, and is likely not a problem with pip.。error: subprocess-exited-with-error。。× Getting requirements to build wheel did not run successfully.。│ exit code: 1。╰─> See above for output.。。note: This error originates from a subprocess, and is likely not a problem with pip.。运行安装pip install -r requirements.txt报错，手动安装 pip install aiohttp和 pip install openai后再运行pip install -r requirements.txt 还是报错。另外Python包（langchain和gradio）在requirements.txt文件中指定了对pydantic包的不同版本依赖引起的  我用的是阿里云的云服务器，版本ubuntu22.04。> ```。>       import aiohttp。>   ModuleNotFoundError: No module named 'aiohttp'。>   [end of output]。> ```。> 。> note: This error originates from a subprocess, and is likely not a problem with pip. error: subprocess-exited-with-error。> 。> × Getting requirements to build wheel did not run successfully. │ exit code: 1 ╰─> See above for output.。> 。> note: This error originates from a subprocess, and is likely not a problem with pip. 运行安装pip install -r requirements.txt报错，手动安装 pip install aiohttp和 pip install openai后再运行pip install -r requirements.txt 还是报错。另外Python包（langchain和gradio）在requirements.txt文件中指定了对pydantic包的不同版本依赖引起的 我用的是阿里云的云服务器，版本ubuntu22.04。。删除冲突依赖部分，全部手动安装。。Xlib.error.ConnectionClosedError: Display connection closed by server: Connection reset by peer。。linux部署，运行main.py启动，提示要图形界面打不开，出现报错。能不能换成浏览器加端口访问呢，不如你本地演示的直接端口访问。> Xlib.error.ConnectionClosedError: Display connection closed by server: Connection reset by peer。> 。> linux部署，运行main.py启动，提示要图形界面打不开，出现报错。能不能换成浏览器加端口访问呢，不如你本地演示的直接端口访问。。看下完整的报错。在Ubuntu20.0.4环境下。1.使用webui的 文本转语音-通用-试听 合成出的音频在webui中播放正常，声音正常。2.使用webui的 聊天-聊天框-发送/直接复读，log输出正常，如下：。```。2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/main.py[line:104] - INFO: API收到数据：{'type': 'reread', 'username': '主人', 'content': '你好'}。2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/my_handle.py[line:1021] - INFO: 复读内容：你好。2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:809] - INFO: bert_vits2合成成功，合成内容：【你好】，输出到=/media/prayer/chat/AI-Vtuber-20240224/out/bert_vits2_5.wav。2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/common.py[line:725] - INFO: 内容已成功写入文件:log/字幕.txt。```。但是完全没有音频声音。。其实有如下怀疑：。是否是ALSA出现问题？在python webui.py时，有如下奇怪输出：。```。Error processing line 1 of /opt/anaconda3/envs/ai/lib/python3.11/site-packages/distutils-precedence.pth:。。  Traceback (most recent call last):。    File "<frozen site>", line 195, in addpackage。    File "<string>", line 1, in <module>。  ModuleNotFoundError: No module named '_distutils_hack'。。Remainder of file ignored。pygame 2.3.0 (SDL 2.24.2, Python 3.11.8)。Hello from the pygame community. https://www.pygame.org/contribute.html。2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:75] - INFO: 文案模式的Audio初始化...。2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/webui.py[line:3078] - INFO: 本地Live2D模型名列表：['chitose', 'Haru', 'haru2', 'haruto', 'hibiki', 'Hiyori', 'koharu', 'Mao', 'miara_pro_en', 'Natori', 'nito', 'sizuku', 'tororo', 'tsumiki']。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'。ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi。ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'。ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi。ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0。ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0。ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline。ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。NiceGUI ready to go on http://localhost:8081。```。执行sudo apt-get reinstall alsa-utils之后仍然报这个错误(感觉还是驱动问题，不识别usb耳机，可是暂时没有3.5mm的音响/耳机测试)。> 在Ubuntu20.0.4环境下
> 1.使用webui的 文本转语音-通用-试听 合成出的音频在webui中播放正常，声音正常
> 2.使用webui的 聊天-聊天框-发送/直接复读，log输出正常，如下：
> ```
> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/main.py[line:104] - INFO: API收到数据：{'type': 'reread', 'username': '主人', 'content': '你好'}
> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/my_handle.py[line:1021] - INFO: 复读内容：你好
> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:809] - INFO: bert_vits2合成成功，合成内容：【你好】，输出到=/media/prayer/chat/AI-Vtuber-20240224/out/bert_vits2_5.wav
> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/common.py[line:725] - INFO: 内容已成功写入文件:log/字幕.txt
> ```
> 但是完全没有音频声音。
> 其实有如下怀疑：
> 是否是ALSA出现问题？在python webui.py时，有如下奇怪输出：
> ```
> Error processing line 1 of /opt/anaconda3/envs/ai/lib/python3.11/site-packages/distutils-precedence.pth:
> 
>   Traceback (most recent call last):
>     File "<frozen site>", line 195, in addpackage
>     File "<string>", line 1, in <module>
>   ModuleNotFoundError: No module named '_distutils_hack'
> 
> Remainder of file ignored
> pygame 2.3.0 (SDL 2.24.2, Python 3.11.8)
> Hello from the pygame community. https://www.pygame.org/contribute.html
> 2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:75] - INFO: 文案模式的Audio初始化...
> 2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/webui.py[line:3078] - INFO: 本地Live2D模型名列表：['chitose', 'Haru', 'haru2', 'haruto', 'hibiki', 'Hiyori', 'koharu', 'Mao', 'miara_pro_en', 'Natori', 'nito', 'sizuku', 'tororo', 'tsumiki']
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'
> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi
> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'
> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi
> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'
> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0
> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'
> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0
> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'
> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline
> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'
> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory
> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory
> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline
> ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port
> ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port
> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused
> 
> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused
> 
> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card
> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card
> NiceGUI ready to go on http://localhost:8081
> ```
> 执行sudo apt-get reinstall alsa-utils之后仍然报这个错误(感觉还是驱动问题，不识别usb耳机，可是暂时没有3.5mm的音响/耳机测试)

确实 估计还是声卡驱动问题的样子。QFactoryLoader::QFactoryLoader() checking directory path "/usr/local/python3.10/bin/platforms" ...。2024-03-20 09:17:00,485 - /root/xfliu11/luna-ai/main.py[line:3695] - INFO: 可以直接访问Live2D页， http://127.0.0.1:12345/Live2D/。loaded library "/usr/local/python3.10/lib/python3.10/site-packages/PyQt5/Qt5/plugins/platforms/libqxcb.so"。qt.qpa.xcb: could not connect to display localhost:10.0。qt.qpa.plugin: Could not load the Qt platform plugin "xcb" in "" even though it was found.。This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.。。Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, webgl, xcb.。。Aborted。这个咋解决，博主。> QFactoryLoader::QFactoryLoader() checking directory path "/usr/local/python3.10/bin/platforms" ... 2024-03-20 09:17:00,485 - /root/xfliu11/luna-ai/main.py[line:3695] - INFO: 可以直接访问Live2D页， http://127.0.0.1:12345/Live2D/ loaded library "/usr/local/python3.10/lib/python3.10/site-packages/PyQt5/Qt5/plugins/platforms/libqxcb.so" qt.qpa.xcb: could not connect to display localhost:10.0 qt.qpa.plugin: Could not load the Qt platform plugin "xcb" in "" even though it was found. This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.。> 。> Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, webgl, xcb.。> 。> Aborted 这个咋解决，博主。。好家伙 为什么你还在用qt，qt已经废弃了。啊，直接拉的master的代码，构建的，现在使用哪个版本比较好。> 啊，直接拉的master的代码，构建的，现在使用哪个版本比较好。。git clone https://github.com/Ikaros-521/AI-Vtuber.git。> 在Ubuntu20.0.4环境下 1.使用webui的 文本转语音-通用-试听 合成出的音频在webui中播放正常，声音正常 2.使用webui的 聊天-聊天框-发送/直接复读，log输出正常，如下：。> 。> ```。> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/main.py[line:104] - INFO: API收到数据：{'type': 'reread', 'username': '主人', 'content': '你好'}。> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/my_handle.py[line:1021] - INFO: 复读内容：你好。> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:809] - INFO: bert_vits2合成成功，合成内容：【你好】，输出到=/media/prayer/chat/AI-Vtuber-20240224/out/bert_vits2_5.wav。> 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/common.py[line:725] - INFO: 内容已成功写入文件:log/字幕.txt。> ```。> 。> 但是完全没有音频声音。 其实有如下怀疑： 是否是ALSA出现问题？在python webui.py时，有如下奇怪输出：。> 。> ```。> Error processing line 1 of /opt/anaconda3/envs/ai/lib/python3.11/site-packages/distutils-precedence.pth:。> 。>   Traceback (most recent call last):。>     File "<frozen site>", line 195, in addpackage。>     File "<string>", line 1, in <module>。>   ModuleNotFoundError: No module named '_distutils_hack'。> 。> Remainder of file ignored。> pygame 2.3.0 (SDL 2.24.2, Python 3.11.8)。> Hello from the pygame community. https://www.pygame.org/contribute.html。> 2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:75] - INFO: 文案模式的Audio初始化...。> 2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/webui.py[line:3078] - INFO: 本地Live2D模型名列表：['chitose', 'Haru', 'haru2', 'haruto', 'hibiki', 'Hiyori', 'koharu', 'Mao', 'miara_pro_en', 'Natori', 'nito', 'sizuku', 'tororo', 'tsumiki']。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'。> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi。> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'。> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi。> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0。> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0。> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline。> ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline。> ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。> ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。> NiceGUI ready to go on http://localhost:8081。> ```。> 。> 执行sudo apt-get reinstall alsa-utils之后仍然报这个错误(感觉还是驱动问题，不识别usb耳机，可是暂时没有3.5mm的音响/耳机测试)。。博主您好，在Ubuntu20.0.4环境下。1.使用webui的 文本转语音-通用-试听 合成出的音频在webui中播放正常，声音正常。2.使用webui的 聊天-聊天框-发送/直接复读， 声音正常。我遇到的问题如下： 运行程序，按q键进行录音的时候报错，请您看一下报错信息分析下原因，感谢！。报错信息输出如下：。pygame 2.5.2 (SDL 2.28.2, Python 3.10.11)。Hello from the pygame community. https://www.pygame.org/contribute.html。2024-03-24 10:20:00 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:75] - INFO: 文案模式的Audio初始化...。2024-03-24 10:20:00 - /mnt/data2/project/company/AI-Vtuber/webui.py[line:3611] - INFO: 本地Live2D模型名列表：['hibiki', 'chitose', 'tsumiki', 'koharu', 'Natori', 'haru2', 'tororo', 'Mao', 'haruto', 'Hiyori', 'Haru']。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。NiceGUI ready to go on http://localhost:8081。2024-03-24 10:20:12 - /mnt/data2/project/company/AI-Vtuber/webui.py[line:258] - INFO: 程序开始运行。pygame 2.5.2 (SDL 2.28.2, Python 3.10.11)。Hello from the pygame community. https://www.pygame.org/contribute.html。2024-03-24 10:20:13 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:75] - INFO: 初始化My_handle...。2024-03-24 10:20:13 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:204] - INFO: 创建音频合成消息队列线程。2024-03-24 10:20:13 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:1096] - INFO: 文案播放线程运行中...。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:1186] - INFO: 重载所有文案数据。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/gpt_model/claude.py[line:28] - INFO: Claude slack_user_token or bot_user_id 为空，不进行实例化.。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/gpt_model/gpt.py[line:75] - INFO: GPT_MODEL: 进入get方法。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:224] - INFO: ./log/log-2024-3-24.txt 日志文件已存在，跳过。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:233] - INFO: ./log/comment-2024-3-24.txt 弹幕文件已存在，跳过。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:269] - INFO: 创建数据库:data/data.db。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:145] - INFO: 配置数据加载成功。。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/main.py[line:490] - INFO: 单击键盘 Q 按键进行录音喵~ 由于其他任务还要启动，如果按键没有反应，请等待一段时间。2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/main.py[line:820] - INFO: 当前平台：talk。 * Serving Flask app 'main'。 * Debug mode: off。Address already in use。Port 8082 is in use by another program. Either identify and stop that program, or start the server with a different port.。2024-03-24 10:20:36 - /mnt/data2/project/company/AI-Vtuber/main.py[line:445] - INFO: 检测到单击键盘 q，即将开始录音~。2024-03-24 10:20:36 - /mnt/data2/project/company/AI-Vtuber/main.py[line:445] - INFO: 检测到单击键盘 q，即将开始录音~。qALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map。ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。2024-03-24 10:20:38 - /mnt/data2/project/company/AI-Vtuber/main.py[line:326] - INFO: 录音中...。2024-03-24 10:20:38 - /mnt/data2/project/company/AI-Vtuber/main.py[line:326] - INFO: 录音中...。python: src/hostapi/alsa/pa_linux_alsa.c:3641: PaAlsaStreamComponent_BeginPolling: Assertion `ret == self->nfds' failed.。python: src/hostapi/alsa/pa_linux_alsa.c:3641: PaAlsaStreamComponent_BeginPolling: Assertion `ret == self->nfds' failed.。。。> > 在Ubuntu20.0.4环境下 1.使用webui的 文本转语音-通用-试听 合成出的音频在webui中播放正常，声音正常 2.使用webui的 聊天-聊天框-发送/直接复读，log输出正常，如下：。> > ```。> > 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/main.py[line:104] - INFO: API收到数据：{'type': 'reread', 'username': '主人', 'content': '你好'}。> > 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/my_handle.py[line:1021] - INFO: 复读内容：你好。> > 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:809] - INFO: bert_vits2合成成功，合成内容：【你好】，输出到=/media/prayer/chat/AI-Vtuber-20240224/out/bert_vits2_5.wav。> > 2024-03-08 00:16:36 - /media/prayer/chat/AI-Vtuber-20240224/utils/common.py[line:725] - INFO: 内容已成功写入文件:log/字幕.txt。> > ```。> > 。> > 。> >     。> >       。> >     。> > 。> >       。> >     。> > 。> >     。> >   。> > 但是完全没有音频声音。 其实有如下怀疑： 是否是ALSA出现问题？在python webui.py时，有如下奇怪输出：。> > ```。> > Error processing line 1 of /opt/anaconda3/envs/ai/lib/python3.11/site-packages/distutils-precedence.pth:。> > 。> >   Traceback (most recent call last):。> >     File "<frozen site>", line 195, in addpackage。> >     File "<string>", line 1, in <module>。> >   ModuleNotFoundError: No module named '_distutils_hack'。> > 。> > Remainder of file ignored。> > pygame 2.3.0 (SDL 2.24.2, Python 3.11.8)。> > Hello from the pygame community. https://www.pygame.org/contribute.html。> > 2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/utils/audio.py[line:75] - INFO: 文案模式的Audio初始化...。> > 2024-03-08 00:03:24 - /media/prayer/chat/AI-Vtuber-20240224/webui.py[line:3078] - INFO: 本地Live2D模型名列表：['chitose', 'Haru', 'haru2', 'haruto', 'hibiki', 'Hiyori', 'koharu', 'Mao', 'miara_pro_en', 'Natori', 'nito', 'sizuku', 'tororo', 'tsumiki']。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。> > ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'。> > ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> > ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi。> > ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.hdmi.0:CARD=0,AES0=4,AES1=130,AES2=0,AES3=2'。> > ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> > ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM hdmi。> > ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> > ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> > ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0。> > ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> > ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> > ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline:CARD=0,DEV=0。> > ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> > ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> > ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline。> > ALSA lib confmisc.c:1281:(snd_func_refer) Unable to find definition 'cards.USB-Audio.pcm.modem.0:CARD=0'。> > ALSA lib conf.c:4732:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。> > ALSA lib conf.c:5220:(snd_config_expand) Evaluate error: No such file or directory。> > ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM phoneline。> > ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。> > ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。> > ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> > 。> > ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> > 。> > ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。> > ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card。> > NiceGUI ready to go on http://localhost:8081。> > ```。> > 。> > 。> >     。> >       。> >     。> > 。> >       。> >     。> > 。> >     。> >   。> > 执行sudo apt-get reinstall alsa-utils之后仍然报这个错误(感觉还是驱动问题，不识别usb耳机，可是暂时没有3.5mm的音响/耳机测试)。> 。> 博主您好，在Ubuntu20.0.4环境下 1.使用webui的 文本转语音-通用-试听 合成出的音频在webui中播放正常，声音正常 2.使用webui的 聊天-聊天框-发送/直接复读， 声音正常 我遇到的问题如下： 运行程序，按q键进行录音的时候报错，请您看一下报错信息分析下原因，感谢！ 报错信息输出如下： pygame 2.5.2 (SDL 2.28.2, Python 3.10.11) Hello from the pygame community. https://www.pygame.org/contribute.html 2024-03-24 10:20:00 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:75] - INFO: 文案模式的Audio初始化... 2024-03-24 10:20:00 - /mnt/data2/project/company/AI-Vtuber/webui.py[line:3611] - INFO: 本地Live2D模型名列表：['hibiki', 'chitose', 'tsumiki', 'koharu', 'Natori', 'haru2', 'tororo', 'Mao', 'haruto', 'Hiyori', 'Haru'] ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card NiceGUI ready to go on http://localhost:8081 2024-03-24 10:20:12 - /mnt/data2/project/company/AI-Vtuber/webui.py[line:258] - INFO: 程序开始运行 pygame 2.5.2 (SDL 2.28.2, Python 3.10.11) Hello from the pygame community. https://www.pygame.org/contribute.html 2024-03-24 10:20:13 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:75] - INFO: 初始化My_handle... 2024-03-24 10:20:13 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:204] - INFO: 创建音频合成消息队列线程 2024-03-24 10:20:13 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:1096] - INFO: 文案播放线程运行中... 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/audio.py[line:1186] - INFO: 重载所有文案数据 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/gpt_model/claude.py[line:28] - INFO: Claude slack_user_token or bot_user_id 为空，不进行实例化. 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/gpt_model/gpt.py[line:75] - INFO: GPT_MODEL: 进入get方法 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:224] - INFO: ./log/log-2024-3-24.txt 日志文件已存在，跳过 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:233] - INFO: ./log/comment-2024-3-24.txt 弹幕文件已存在，跳过 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:269] - INFO: 创建数据库:data/data.db 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/utils/my_handle.py[line:145] - INFO: 配置数据加载成功。 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/main.py[line:490] - INFO: 单击键盘 Q 按键进行录音喵~ 由于其他任务还要启动，如果按键没有反应，请等待一段时间 2024-03-24 10:20:14 - /mnt/data2/project/company/AI-Vtuber/main.py[line:820] - INFO: 当前平台：talk。> 。> * Serving Flask app 'main'。> * Debug mode: off。>   Address already in use。>   Port 8082 is in use by another program. Either identify and stop that program, or start the server with a different port.。>   2024-03-24 10:20:36 - /mnt/data2/project/company/AI-Vtuber/main.py[line:445] - INFO: 检测到单击键盘 q，即将开始录音~。>   2024-03-24 10:20:36 - /mnt/data2/project/company/AI-Vtuber/main.py[line:445] - INFO: 检测到单击键盘 q，即将开始录音~。>   qALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。>   ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。>   ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。>   ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map。>   ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。>   ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。>   ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。>   ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map。>   ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。>   ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port。>   ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe ALSA lib pcm.c:2642:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map ALSA lib pcm_route.c:869:(find_matching_chmap) Found no matching channel map ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pcm_oss.c:377:(_snd_pcm_oss_open) Unknown field port ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pulse.c:242:(pulse_connect) PulseAudio: Unable to connect: Connection refused。> 。> ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card ALSA lib pcm_usb_stream.c:486:(_snd_pcm_usb_stream_open) Invalid type for card 2024-03-24 10:20:38 - /mnt/data2/project/company/AI-Vtuber/main.py[line:326] - INFO: 录音中... 2024-03-24 10:20:38 - /mnt/data2/project/company/AI-Vtuber/main.py[line:326] - INFO: 录音中... python: src/hostapi/alsa/pa_linux_alsa.c:3641: PaAlsaStreamComponent_BeginPolling: Assertion `ret == self->nfds' failed. python: src/hostapi/alsa/pa_linux_alsa.c:3641: PaAlsaStreamComponent_BeginPolling: Assertion `ret == self->nfds' failed.。。不好说，感觉是麦克风驱动和库的兼容性问题。博主您好，运行时发现文本转语音部分，只能通过显示屏自带声音输出，耳机无声音，应该如何修改配置呢？。![img_v3_029b_91ebc982-fb9c-410e-a1b4-47c06e18fc3g](https://github.com/Ikaros-521/AI-Vtuber/assets/22862171/9a9f2724-8fe1-4548-8ea8-219c43227983)。另外聊天窗口输出正常，可以通过耳机输出：。![57c44fd9-b740-4d96-a410-a39c56eb29d3](https://github.com/Ikaros-521/AI-Vtuber/assets/22862171/b20f1e07-0a8e-49ab-88ea-f0f6e7ff4cab)。。> 博主您好，运行时发现文本转语音部分，只能通过显示屏自带声音输出，耳机无声音，应该如何修改配置呢？ ![img_v3_029b_91ebc982-fb9c-410e-a1b4-47c06e18fc3g](https://private-user-images.githubusercontent.com/22862171/316729024-9a9f2724-8fe1-4548-8ea8-219c43227983.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0MzA0NzYsIm5iZiI6MTcxMTQzMDE3NiwicGF0aCI6Ii8yMjg2MjE3MS8zMTY3MjkwMjQtOWE5ZjI3MjQtOGZlMS00NTQ4LThlYTgtMjE5YzQzMjI3OTgzLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDA1MTYxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTRmN2Y1OTgyNTUzNDYyZGIzMDFhN2U4ZDY4ZDczYjc5Y2QwZmY2MTEwYzliNGY5NTM2YjljYmE3NTdjNzc5ZDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.3pJOdo46k0x-gQDBauzssqo4TbAyBvrgDNl3SHMOhUk) 另外聊天窗口输出正常，可以通过耳机输出： ![57c44fd9-b740-4d96-a410-a39c56eb29d3](https://private-user-images.githubusercontent.com/22862171/316729118-b20f1e07-0a8e-49ab-88ea-f0f6e7ff4cab.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0MzA0NzYsIm5iZiI6MTcxMTQzMDE3NiwicGF0aCI6Ii8yMjg2MjE3MS8zMTY3MjkxMTgtYjIwZjFlMDctMGE4ZS00OWFiLTg4ZWEtZjBmNmU3ZmY0Y2FiLmpwZWc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwMzI2JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDMyNlQwNTE2MTZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT05ZjhlNTU0OTY3NWE4YjEwZmI2OThmM2UwMmVlOTVhYzczNTVjYzQwNDgyMWUyMmM2N2M5ZmI2NTYwZGZmYzA3JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.QifqElJkhvd02tnu2btnjqytZspsgptUd9qjjvS277E)。。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/51dc5663-ef96-4756-b4b1-6101708f0205)。输出选耳机。> > 博主您好，运行时发现文本转语音部分，只能通过显示屏自带声音输出，耳机无声音，应该如何修改配置呢？ ![img_v3_029b_91ebc982-fb9c-410e-a1b4-47c06e18fc3g](https://private-user-images.githubusercontent.com/22862171/316729024-9a9f2724-8fe1-4548-8ea8-219c43227983.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0MzA0NzYsIm5iZiI6MTcxMTQzMDE3NiwicGF0aCI6Ii8yMjg2MjE3MS8zMTY3MjkwMjQtOWE5ZjI3MjQtOGZlMS00NTQ4LThlYTgtMjE5YzQzMjI3OTgzLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDA1MTYxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTRmN2Y1OTgyNTUzNDYyZGIzMDFhN2U4ZDY4ZDczYjc5Y2QwZmY2MTEwYzliNGY5NTM2YjljYmE3NTdjNzc5ZDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.3pJOdo46k0x-gQDBauzssqo4TbAyBvrgDNl3SHMOhUk) 另外聊天窗口输出正常，可以通过耳机输出： ![57c44fd9-b740-4d96-a410-a39c56eb29d3](https://private-user-images.githubusercontent.com/22862171/316729118-b20f1e07-0a8e-49ab-88ea-f0f6e7ff4cab.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0MzA0NzYsIm5iZiI6MTcxMTQzMDE3NiwicGF0aCI6Ii8yMjg2MjE3MS8zMTY3MjkxMTgtYjIwZjFlMDctMGE4ZS00OWFiLTg4ZWEtZjBmNmU3ZmY0Y2FiLmpwZWc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwMzI2JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDMyNlQwNTE2MTZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT05ZjhlNTU0OTY3NWE4YjEwZmI2OThmM2UwMmVlOTVhYzczNTVjYzQwNDgyMWUyMmM2N2M5ZmI2NTYwZGZmYzA3JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.QifqElJkhvd02tnu2btnjqytZspsgptUd9qjjvS277E)。> 。> ![image](https://private-user-images.githubusercontent.com/40910637/316735478-51dc5663-ef96-4756-b4b1-6101708f0205.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0NDQ5MTMsIm5iZiI6MTcxMTQ0NDYxMywicGF0aCI6Ii80MDkxMDYzNy8zMTY3MzU0NzgtNTFkYzU2NjMtZWY5Ni00NzU2LWI0YjEtNjEwMTcwOGYwMjA1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDA5MTY1M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTFmMmJhMzhiNWMyYTRiZmVkZjc4NTcwNWI4OWEyNDQzNjYwNGE2MTEzNzRiYmRlNTE2MmNiY2UzOTgyOTAwMDEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.K-Bb-dHkhi4UvlVyLp_Ku1il2l6TSsQBgFaROgyhqNY) 输出选耳机。。博主，是我先系统都设置好耳机输出，播放视频都正常，运行python webui.py后，聊天窗口正常输出，文本生成部分可以正常生成声音，但是点声音播放时没有声音，同时关闭程序，打开网页视频，也没有声音了。。问题可能在于运行程序时，对系统配置进行了更改，或者是ubuntu下ALSA库哪儿配置的不合理，导致出现了这种情况，请您给予指导排查这个问题，感谢！。> > > 博主您好，运行时发现文本转语音部分，只能通过显示屏自带声音输出，耳机无声音，应该如何修改配置呢？ ![img_v3_029b_91ebc982-fb9c-410e-a1b4-47c06e18fc3g](https://private-user-images.githubusercontent.com/22862171/316729024-9a9f2724-8fe1-4548-8ea8-219c43227983.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0MzA0NzYsIm5iZiI6MTcxMTQzMDE3NiwicGF0aCI6Ii8yMjg2MjE3MS8zMTY3MjkwMjQtOWE5ZjI3MjQtOGZlMS00NTQ4LThlYTgtMjE5YzQzMjI3OTgzLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDA1MTYxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTRmN2Y1OTgyNTUzNDYyZGIzMDFhN2U4ZDY4ZDczYjc5Y2QwZmY2MTEwYzliNGY5NTM2YjljYmE3NTdjNzc5ZDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.3pJOdo46k0x-gQDBauzssqo4TbAyBvrgDNl3SHMOhUk) 另外聊天窗口输出正常，可以通过耳机输出： ![57c44fd9-b740-4d96-a410-a39c56eb29d3](https://private-user-images.githubusercontent.com/22862171/316729118-b20f1e07-0a8e-49ab-88ea-f0f6e7ff4cab.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0MzA0NzYsIm5iZiI6MTcxMTQzMDE3NiwicGF0aCI6Ii8yMjg2MjE3MS8zMTY3MjkxMTgtYjIwZjFlMDctMGE4ZS00OWFiLTg4ZWEtZjBmNmU3ZmY0Y2FiLmpwZWc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwMzI2JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDMyNlQwNTE2MTZaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT05ZjhlNTU0OTY3NWE4YjEwZmI2OThmM2UwMmVlOTVhYzczNTVjYzQwNDgyMWUyMmM2N2M5ZmI2NTYwZGZmYzA3JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.QifqElJkhvd02tnu2btnjqytZspsgptUd9qjjvS277E)。> > 。> > 。> > ![image](https://private-user-images.githubusercontent.com/40910637/316735478-51dc5663-ef96-4756-b4b1-6101708f0205.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0NDQ5MTMsIm5iZiI6MTcxMTQ0NDYxMywicGF0aCI6Ii80MDkxMDYzNy8zMTY3MzU0NzgtNTFkYzU2NjMtZWY5Ni00NzU2LWI0YjEtNjEwMTcwOGYwMjA1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDA5MTY1M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTFmMmJhMzhiNWMyYTRiZmVkZjc4NTcwNWI4OWEyNDQzNjYwNGE2MTEzNzRiYmRlNTE2MmNiY2UzOTgyOTAwMDEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.K-Bb-dHkhi4UvlVyLp_Ku1il2l6TSsQBgFaROgyhqNY) 输出选耳机。> 。> 博主，是我先系统都设置好耳机输出，播放视频都正常，运行python webui.py后，聊天窗口正常输出，文本生成部分可以正常生成声音，但是点声音播放时没有声音，同时关闭程序，打开网页视频，也没有声音了。 问题可能在于运行程序时，对系统配置进行了更改，或者是ubuntu下ALSA库哪儿配置的不合理，导致出现了这种情况，请您给予指导排查这个问题，感谢！。。程序不会修改输出声卡的，是默认声卡输出的。博主，经过大量测试，目前的问题总结如下：。1. 启动程序后，没用一键运行，如何直接点文本生成语音，生成的声音可以用耳机听到。。2. 如果启动程序后一键运行，再用耳机听取声音则会阻塞，一直卡在开始播放那儿。。3. 关闭程序后，耳机能听到文本合成的声音。。4. 启动程序后，一键运行，聊天出能正常播放语音。。根据这些情况，是否是一件运行后系统的声卡配置会变化，我应该如何修改，请您指导下，感谢！ 。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/22862171/996cc455-16ce-437b-9ade-9c0a3a0786d5)。。> 博主，经过大量测试，目前的问题总结如下：。> 。> 1. 启动程序后，没用一键运行，如何直接点文本生成语音，生成的声音可以用耳机听到。。> 2. 如果启动程序后一键运行，再用耳机听取声音则会阻塞，一直卡在开始播放那儿。。> 3. 关闭程序后，耳机能听到文本合成的声音。。> 4. 启动程序后，一键运行，聊天出能正常播放语音。。>    根据这些情况，是否是一件运行后系统的声卡配置会变化，我应该如何修改，请您指导下，感谢！。>    ![image](https://private-user-images.githubusercontent.com/22862171/316847738-996cc455-16ce-437b-9ade-9c0a3a0786d5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0NTQwNjAsIm5iZiI6MTcxMTQ1Mzc2MCwicGF0aCI6Ii8yMjg2MjE3MS8zMTY4NDc3MzgtOTk2Y2M0NTUtMTZjZS00MzdiLTlhZGUtOWMwYTNhMDc4NmQ1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDExNDkyMFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRhNjhlOTZmNzc0YjBmMTA0YTNjODVmZjc3MDY0ZGNiMDMxOTcwYTJjN2U0NDQ0OTRkY2MyNGY2MWMzMzQ0NGUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.f-SQK08_eqF9pAJlKrlqzKSkTjWYT6ZavRFVEjaaINk)。。运行过程中播放由pygame接管，默认声卡播放，照着说法很可能pygame不兼容，但应该不至于，是有人测过ubuntu运行的。不需要播放的就是直接浏览器的。Ubuntu20.04 运行python webui.py 报错。(AI-Vtuber) minwe@minwe:/data/AI/AI-Vtuber$ python webui.py 。pygame 2.5.2 (SDL 2.28.2, Python 3.10.14)。Hello from the pygame community. https://www.pygame.org/contribute.html。Traceback (most recent call last):。  File "/data/AI/AI-Vtuber/webui.py", line 15, in <module>。    from utils.audio import Audio。  File "/data/AI/AI-Vtuber/utils/audio.py", line 16, in <module>。    from elevenlabs import generate, play, set_api_key。ImportError: cannot import name 'generate' from 'elevenlabs' (/data/anaconda3/envs/AI-Vtuber/lib/python3.10/site-packages/elevenlabs/__init__.py)。(AI-Vtuber) minwe@minwe:/data/AI/AI-Vtuber$ pip show elevenlabs。Name: elevenlabs。Version: 1.0.2。Summary: 。Home-page: 。Author: 。Author-email: 。License: 。Location: /data/anaconda3/envs/AI-Vtuber/lib/python3.10/site-packages。Requires: httpx, ipython, pydantic, requests, typing_extensions, websockets。Required-by: 。> Ubuntu20.04 运行python webui.py 报错
> (AI-Vtuber) minwe@minwe:/data/AI/AI-Vtuber$ python webui.py 
> pygame 2.5.2 (SDL 2.28.2, Python 3.10.14)
> Hello from the pygame community. https://www.pygame.org/contribute.html
> Traceback (most recent call last):
>   File "/data/AI/AI-Vtuber/webui.py", line 15, in <module>
>     from utils.audio import Audio
>   File "/data/AI/AI-Vtuber/utils/audio.py", line 16, in <module>
>     from elevenlabs import generate, play, set_api_key
> ImportError: cannot import name 'generate' from 'elevenlabs' (/data/anaconda3/envs/AI-Vtuber/lib/python3.10/site-packages/elevenlabs/__init__.py)
> (AI-Vtuber) minwe@minwe:/data/AI/AI-Vtuber$ pip show elevenlabs
> Name: elevenlabs
> Version: 1.0.2
> Summary: 
> Home-page: 
> Author: 
> Author-email: 
> License: 
> Location: /data/anaconda3/envs/AI-Vtuber/lib/python3.10/site-packages
> Requires: httpx, ipython, pydantic, requests, typing_extensions, websockets
> Required-by: 

降低elevenlabs到0.xx。> > 博主，经过大量测试，目前的问题总结如下：。> > 。> > 1. 启动程序后，没用一键运行，如何直接点文本生成语音，生成的声音可以用耳机听到。。> > 2. 如果启动程序后一键运行，再用耳机听取声音则会阻塞，一直卡在开始播放那儿。。> > 3. 关闭程序后，耳机能听到文本合成的声音。。> > 4. 启动程序后，一键运行，聊天出能正常播放语音。。> >    根据这些情况，是否是一件运行后系统的声卡配置会变化，我应该如何修改，请您指导下，感谢！。> >    ![image](https://private-user-images.githubusercontent.com/22862171/316847738-996cc455-16ce-437b-9ade-9c0a3a0786d5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0NTQwNjAsIm5iZiI6MTcxMTQ1Mzc2MCwicGF0aCI6Ii8yMjg2MjE3MS8zMTY4NDc3MzgtOTk2Y2M0NTUtMTZjZS00MzdiLTlhZGUtOWMwYTNhMDc4NmQ1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDExNDkyMFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRhNjhlOTZmNzc0YjBmMTA0YTNjODVmZjc3MDY0ZGNiMDMxOTcwYTJjN2U0NDQ0OTRkY2MyNGY2MWMzMzQ0NGUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.f-SQK08_eqF9pAJlKrlqzKSkTjWYT6ZavRFVEjaaINk)。> 。> 运行过程中播放由pygame接管，默认声卡播放，照着说法很可能pygame不兼容，但应该不至于，是有人测过ubuntu运行的 不需要播放的就是直接浏览器的。。有什么好的调试方案或者查询办法，目前卡在程序一运行就没声音了，求助。> > > 博主，经过大量测试，目前的问题总结如下：。> > > 。> > > 1. 启动程序后，没用一键运行，如何直接点文本生成语音，生成的声音可以用耳机听到。。> > > 2. 如果启动程序后一键运行，再用耳机听取声音则会阻塞，一直卡在开始播放那儿。。> > > 3. 关闭程序后，耳机能听到文本合成的声音。。> > > 4. 启动程序后，一键运行，聊天出能正常播放语音。。> > >    根据这些情况，是否是一件运行后系统的声卡配置会变化，我应该如何修改，请您指导下，感谢！。> > >    ![image](https://private-user-images.githubusercontent.com/22862171/316847738-996cc455-16ce-437b-9ade-9c0a3a0786d5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTE0NTQwNjAsIm5iZiI6MTcxMTQ1Mzc2MCwicGF0aCI6Ii8yMjg2MjE3MS8zMTY4NDc3MzgtOTk2Y2M0NTUtMTZjZS00MzdiLTlhZGUtOWMwYTNhMDc4NmQ1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzI2VDExNDkyMFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRhNjhlOTZmNzc0YjBmMTA0YTNjODVmZjc3MDY0ZGNiMDMxOTcwYTJjN2U0NDQ0OTRkY2MyNGY2MWMzMzQ0NGUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.f-SQK08_eqF9pAJlKrlqzKSkTjWYT6ZavRFVEjaaINk)。> > 。> > 。> > 运行过程中播放由pygame接管，默认声卡播放，照着说法很可能pygame不兼容，但应该不至于，是有人测过ubuntu运行的 不需要播放的就是直接浏览器的。> 。> 有什么好的调试方案或者查询办法，目前卡在程序一运行就没声音了，求助。。pygame的调用实现其实就几行代码，没啥东西，具体为什么导致声音没了这也没法说，跑到pygame库里倒腾也不现实，要么试试换audio player对接试试，基于pyaudio实现的。pygetwindow不支持linux，你们怎么解决的？。> pygetwindow不支持linux，你们怎么解决的？

注释相关功能（图像识别页）。lxc容器内跑起不来，必须要有GUI的linux吗，虚拟机能跑吗？。root@AI:~/AI-Vtuber# python3 webui.py。pygame 2.5.2 (SDL 2.28.2, Python 3.10.12)。Hello from the pygame community. https://www.pygame.org/contribute.html。2024-04-24 08:04:32 - /root/AI-Vtuber/utils/audio.py[line:77] - INFO: 文案模式的Audio初始化...。2024-04-24 08:04:32 - /root/AI-Vtuber/webui.py[line:4692] - INFO: 本地Live2D模型名列表：['Hiyori', 'Mao', 'tororo', 'Haru', 'koharu', 'haruto', 'Natori', 'haru2', 'tsumiki', 'hibiki', 'chitose']。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM sysdefault。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM sysdefault。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround40。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround41。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround50。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround51。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround71。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM default。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM default。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_id returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM dmix。2024-04-24 08:04:32 - /root/AI-Vtuber/utils/data_analysis.py[line:86] - WARNING: 数据库：data/data.db 不存在，如果您是第一次启动项目，且没有 运行的情况下，那么请忽略此报错信息，正常运行后，会自动创建数据库，无须担心。2024-04-24 08:04:32 - /root/AI-Vtuber/utils/data_analysis.py[line:154] - WARNING: 数据库：data/data.db 不存在，如果您是第一次启动项目，且没有 运行的情况下，那么请忽略此报错信息，正常运行后，会自动创建数据库，无须担心。2024-04-24 08:04:32 - /root/AI-Vtuber/utils/data_analysis.py[line:318] - WARNING: 数据库：data/data.db 不存在，如果您是第一次启动项目，且没有 运行的情况下，那么请忽略此报错信息，正常运行后，会自动创建数据库，无须担心。NiceGUI ready to go on http://localhost:8081。> lxc容器内跑起不来，必须要有GUI的linux吗，虚拟机能跑吗？ root@AI:~/AI-Vtuber# python3 webui.py pygame 2.5.2 (SDL 2.28.2, Python 3.10.12) Hello from the pygame community. https://www.pygame.org/contribute.html 2024-04-24 08:04:32 - /root/AI-Vtuber/utils/audio.py[line:77] - INFO: 文案模式的Audio初始化... 2024-04-24 08:04:32 - /root/AI-Vtuber/webui.py[line:4692] - INFO: 本地Live2D模型名列表：['Hiyori', 'Mao', 'tororo', 'Haru', 'koharu', 'haruto', 'Natori', 'haru2', 'tsumiki', 'hibiki', 'chitose'] ALSA lib confmisc.c:855:(parse_card) cannot find card '0' ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM sysdefault ALSA lib confmisc.c:855:(parse_card) cannot find card '0' ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM sysdefault ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround40 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround41 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround50 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround51 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround71 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958 ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline ALSA lib confmisc.c:855:(parse_card) cannot find card '0' ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM default ALSA lib confmisc.c:855:(parse_card) cannot find card '0' ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM default ALSA lib confmisc.c:855:(parse_card) cannot find card '0' ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_id returned error: No such file or directory ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM dmix 2024-04-24 08:04:32 - /root/AI-Vtuber/utils/data_analysis.py[line:86] - WARNING: 数据库：data/data.db 不存在，如果您是第一次启动项目，且没有 运行的情况下，那么请忽略此报错信息，正常运行后，会自动创建数据库，无须担心 2024-04-24 08:04:32 - /root/AI-Vtuber/utils/data_analysis.py[line:154] - WARNING: 数据库：data/data.db 不存在，如果您是第一次启动项目，且没有 运行的情况下，那么请忽略此报错信息，正常运行后，会自动创建数据库，无须担心 2024-04-24 08:04:32 - /root/AI-Vtuber/utils/data_analysis.py[line:318] - WARNING: 数据库：data/data.db 不存在，如果您是第一次启动项目，且没有 运行的情况下，那么请忽略此报错信息，正常运行后，会自动创建数据库，无须担心 NiceGUI ready to go on http://localhost:8081。。没桌面 约等于没法用，1.没画面，2.没声音。虚拟机应该是可以的，但依然需要桌面+声卡。大佬，请问一键启动后异常报错，这个要怎么解决？。。python: 3.10.12。系统: Ubuntu 22.04。。。Exception in thread Thread-2 (key_listener):。Traceback (most recent call last):。  File "/usr/lib/python3.10/threading.py", line 1016, in _bootstrap_inner。    self.run()。2024-04-25 07:47:08 - /home/bob/Applications/AI-Vtuber/main.py[line:1021] - INFO: 当前平台：bilibili2。  File "/usr/lib/python3.10/threading.py", line 953, in run。    self._target(*self._args, **self._kwargs)。  File "/home/bob/Applications/AI-Vtuber/main.py", line 516, in key_listener。    keyboard.on_press(on_key_press)。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/__init__.py", line 474, in on_press。    return hook(lambda e: e.event_type == KEY_UP or callback(e), suppress=suppress)。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/__init__.py", line 461, in hook。 * Serving Flask app 'main'。 * Debug mode: off。    append(callback)。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_generic.py", line 67, in add_handler。    self.start_if_necessary()。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_generic.py", line 35, in start_if_necessary。    self.init()。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/__init__.py", line 196, in init。    _os_keyboard.init()。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 113, in init。    build_device()。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 109, in build_device。    ensure_root()。  File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_nixcommon.py", line 174, in ensure_root。    raise ImportError('You must be root to use this library on linux.')。ImportError: You must be root to use this library on linux.。Traceback (most recent call last):。  File "/home/bob/Applications/AI-Vtuber/main.py", line 2639, in <module>。    start_server()。  File "/home/bob/Applications/AI-Vtuber/main.py", line 1272, in start_server。    import blivedm.models.open_live as open_models。ModuleNotFoundError: No module named 'blivedm.models.open_live'; 'blivedm.models' is not a package。2024-04-25 07:47:18 - /home/bob/.local/lib/python3.10/site-packages/werkzeug/_internal.py[line:96] - INFO: WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.。。> 大佬，请问一键启动后异常报错，这个要怎么解决？
> 
> python: 3.10.12
> 系统: Ubuntu 22.04
> 
> 
> Exception in thread Thread-2 (key_listener):
> Traceback (most recent call last):
>   File "/usr/lib/python3.10/threading.py", line 1016, in _bootstrap_inner
>     self.run()
> 2024-04-25 07:47:08 - /home/bob/Applications/AI-Vtuber/main.py[line:1021] - INFO: 当前平台：bilibili2
>   File "/usr/lib/python3.10/threading.py", line 953, in run
>     self._target(*self._args, **self._kwargs)
>   File "/home/bob/Applications/AI-Vtuber/main.py", line 516, in key_listener
>     keyboard.on_press(on_key_press)
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/__init__.py", line 474, in on_press
>     return hook(lambda e: e.event_type == KEY_UP or callback(e), suppress=suppress)
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/__init__.py", line 461, in hook
>  * Serving Flask app 'main'
>  * Debug mode: off
>     append(callback)
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_generic.py", line 67, in add_handler
>     self.start_if_necessary()
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_generic.py", line 35, in start_if_necessary
>     self.init()
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/__init__.py", line 196, in init
>     _os_keyboard.init()
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 113, in init
>     build_device()
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 109, in build_device
>     ensure_root()
>   File "/home/bob/.local/lib/python3.10/site-packages/keyboard/_nixcommon.py", line 174, in ensure_root
>     raise ImportError('You must be root to use this library on linux.')
> ImportError: You must be root to use this library on linux.
> Traceback (most recent call last):
>   File "/home/bob/Applications/AI-Vtuber/main.py", line 2639, in <module>
>     start_server()
>   File "/home/bob/Applications/AI-Vtuber/main.py", line 1272, in start_server
>     import blivedm.models.open_live as open_models
> ModuleNotFoundError: No module named 'blivedm.models.open_live'; 'blivedm.models' is not a package
> 2024-04-25 07:47:18 - /home/bob/.local/lib/python3.10/site-packages/werkzeug/_internal.py[line:96] - INFO: WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
> 

root用户启动 另外库版本不对。
[issue#521] 新增 谷歌 Gemini 的接入；新增UI美化；新增docker（但暂时并不适用）。
[issue#522] 更新思维导图。
[issue#523] TTS新增gradio模式，用于直接配置传参等信息，来适应绝大多数的有gradio接口的tts项目。
[issue#524] 接入 微信视频号（暂时只有弹幕和入场数据）。
[issue#525] 更新多个gpt3.5的模型。
[issue#526] 过滤新增 弹幕过滤前后缀，用于直播间直接聊天而不触发LLM；删减违禁词。
[issue#527] 新增bert-vits2 v2.3 hiyori UI的API对接；优化tts部分代码实现（有点小改动，可能有bug，待测）。
[issue#528] 给log增加颜色，看日志舒服了。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/c8047659-9a7e-4de8-962b-1e9de70d921b)。。
[issue#529] 新增 助播模式（仅后端）；优化音频播放逻辑，之前哪些直接插队的本地音频将会老实排队，等前面文本先合成。
[issue#530] 助播页面前端功能实现，默认关闭助播模式。（需要注意的是此功能的本地问答-文本 情况下语音区分暂未实现）。
[issue#531] 新增配置检测函数，用于防止用户瞎配置导致无法使用（暂时只开了个头，后续推进功能实现）。
[issue#532] blivedm。
[issue#533] 哔哩哔哩开放平台，blivedm初始化房间失败。https://github.com/Ikaros-521/AI-Vtuber/pull/534。
[issue#534] 修复b站2 开放平台 appid数据类型错误问题。
[issue#535] 修改日志INFO等级颜色为白色，自定义请修改logger.py。
[issue#536] 异常报警 新增 平台异常、TTS异常的后端实现；webui尝试实现api接口，还在功能尝试中，请勿调用；。
[issue#537] 优化chatgpt返回内容；异常报警新增llm，平台，svc的后端实现；补充异常报警语音。
[issue#538] 优化chatgpt的测试程序。
[issue#539] webui实现异常报警功能；修复闲时任务随机列表无法关闭的bug。
[issue#540] text-gen新增类型配置，默认为coyude；修改LLM函数统一为get_resp；删减违禁词。
[issue#541] 针对文案内容被弹幕打断后顺序会错乱问题进行了修改，改为打断后恢复会重载整个数据列表，仍有大量的问题，暂时凑合。
[issue#542] 助播模式 音频匹配新增 匹配算法选项，提供可用性；优化整理了部分代码。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/2c78df8a-6eda-4596-9079-63af9af8317c)。。
[issue#543] 修复json键错误问题。
[issue#544] 助播模式 新增类型自定义选择，可以选择那些数据会触发助播，增加可用性；修复红血球佬的在线tts调用失败问题（ssl禁用）。
[issue#545] 点歌模式新增相似度配置项，优化文件搜索函数，不被拓展名干扰。
[issue#546] webui新增webui配置（IP、端口、标题）。
[issue#547] 使用chatglm3生成sd提示词异常。
[issue#548] 新增最大用户名长度，在主要应用的版本实现此功能，防止有的用户名过长，影响观感。
[issue#549] 新增普通音频播放时间间隔配置项（如果你感觉音频和音频之间太快或太慢，可以自行调节间隔时间）。
[issue#550] SD配置项补充其他LLM；新增答谢板块的随机开关（后端未实现）；删减违禁词。
[issue#551] 完成 答谢板块 随机文案的开关功能。
[issue#552] 聊天页新增调教功能，用于在直播中动态调教LLM而不进行TTS合成。
[issue#553] 异常报警新增 开始报警错误数、自动重启错误数的配置项，优化报警逻辑。 页面配置 新增 自动运行 功能。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/def4a41e-05c1-4dd1-a242-4fad906d1038)。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/bca10627-2a64-4080-84d3-aa8830301b93)。。
[issue#554] 闲时任务日志输出优化。
[issue#555] 更新投资人。
[issue#556] text-gen新增官方api的对接并新增传参top_p、top_k、温度、seed。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/944a80c4-f678-44bf-823b-8dae5804ae96)。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/775a5729-2fa2-41b8-bebd-572ea2df0bd1)。。
[issue#557] 🚀 按键映射功能优化。https://github.com/Ikaros-521/AI-Vtuber/pull/704。
[issue#558] 修复积分页UI错误问题；修改默认配置，关闭所有异常报警。
[issue#559] 异常报警计数改到函数内部计数，提高逻辑性。
[issue#560] 聊天模式 新增 faster_whisper的接入，即可不使用魔法，不用花钱，本地进行语音转文本；聊天页 增加部分新配置方便自定义。
[issue#561] 删除torch相关的库，请手动安装。
[issue#562] 🐛 助播开启后，如果同时开启念用户名，他会一直回复以上回复助播。https://github.com/Ikaros-521/AI-Vtuber/pull/563。
[issue#563] 助播内容不再触发念用户名功能（脑测没bug）。
[issue#564] 修复SD加载LLM异常的bug。
[issue#565] SD新增保存图片到本地相关功能，优化其UI布局。
[issue#566] 🙋 【SD报错】ERROR: unrecognized data stream contents when reading image file。SD确认加载了模型，然后在webui内随便画一个画激活一下就没问题了。
[issue#567] SD追加虚拟摄像头创建的日志输出，方便用户使用。
[issue#568] chatgpt配置新增测试按钮，可以测试当前配置是否正确；删减违禁词。
[issue#569] 兼容新版的langchain_chatchat。
[issue#570] 本地问答新增配置项 最大用户名长度，用于自定义限制。
[issue#571] 新增音频播放器选项 audio_player_v2，对接新版播放器功能，具体参考对应项目更新日志；删减违禁词。
[issue#572] 更新思维导图。
[issue#573] 更新思维导图。
[issue#574] 聊天模式新增 按键监听开关；TTS新增GPT_SoVITS的接入。
[issue#575] 删除GPT-SoVITS 参考音频的语种的 自动识别选项。
[issue#576] 修复GPT-SoVITS参考语言配置项的bug；违禁词过滤新增违禁开关、违禁丢弃、违禁替换等功能。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/74e702fa-0e48-430c-a8a4-395479e6d9ca)。。
[issue#577] 修复动态文案无法使用的bug。
[issue#578] 更新投资人。
[issue#579] 🙋 PK、连麦如何配置。开启连续对话模式就方便了。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/e909cfa7-87d3-40f3-bd0e-6b776487166e)。侦听j记得关了。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/d2431ba2-520b-4f92-8aef-37dd40d5aa91)。。
[issue#580] 聊天页 新增 复读音频插队，配合audio_player_v2可以使用。
[issue#581] 更新投资人。
[issue#582] 按键映射 新增 礼物映射按键，可玩性增加。
[issue#583] 文案页 新增 文案文本加载相关的功能，合成功能开发中。
[issue#584] 过滤新增表情弹幕过滤，就是[]包裹的内容；优化日志输出。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/4f895289-a01f-426c-8584-ccbaa63bd1e9)。。
[issue#585] 文案页新增 文案音频合成功能（类似旧版GUI实现）；bert-vits2风格文本配置项错误修复。
[issue#586] SD板块新增翻译功能，源自翻译页配置，暂时仅有百度翻译。。
[issue#587] Tendou arisu。
[issue#588] 聊天类型新增 alice（Fataldemon tendou arisu。
[issue#589] 延长聊天页 按键监听时长为0.5s，降低误触概率；美化注释。
[issue#590] 修改WenxinWorkshop和blivedm到码云仓库，方便用户安装。
[issue#591] 补充遗漏的alice配置项。
[issue#592] 优化webui排版；补充原文字幕的配置项；新增谷歌翻译，接入通用翻译和SD翻译。
[issue#593] 针对tts出现无权限打开播放的问题进行了时间函数修改，理论上10s内的合成不会出现重复情况（待实测。
[issue#594] 修改音频文件命名法为循环计数，彻底杜绝时间上可能的重复性问题。
[issue#595] 优化文案播放逻辑，文案播放过程中进行播放列表索引值记录，在被打断时，会从被打断的播放列表恢复播放（待大数据测试。![%)O_LFHW{(4{}H3Z`_9 LS5](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/4fb83ece-2c00-48f4-a398-04df8cac8e17)  。。![EN`~N5ZMM%Z F J%`V{FUFR](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/d85f8a84-dfb9-409f-bc9b-96d77382e200)。。。
[issue#596] pydantic与elevenlabs和confection 的适配问题。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/cf38a735-a39d-4ee4-9cc8-a6aee15e64b6)。。
[issue#597] 平台：哔哩哔哩2 融合聊天模式，可以变监听直播间，边监听按键触发语音聊天（待大规模测试。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/0ee6e2dc-5900-4969-80cb-f4362df2b4a7)。一起使用的时候记得打开开关，不用就关上。
[issue#598] ERROR:    [Errno 13] error while attempting to bind on address ('127.0.0.1', 8081): 以一种访问权限不允许的方式做了一个访问套接字的尝试。题。。。 | [Bug] Some problem...。已经解决。
[issue#599] 🐛 一些问题。。。 | [Bug] Some problem...。ModuleNotFoundError: No module named 'pygtrans'。
[issue#600] 🐛 一些问题。。。 | [Bug] 无法写入配置文件！ 'alice'。> #### 您使用的版本？ | Your usage version?。> 20240125。> 。> #### 您使用的python版本&系统环境？ | Your usage python version & system?。> python(anaconda)：3.11.5 系统：win11。> 。> #### 您使用的场景？ | Your usage scenarios?。> 在WebUI里点击'保存配置'。> 。> #### 您做了什么操作？ | What did you do?。> 点击'保存配置'。> 。> #### 您遇到了什么问题？ | What are your problems?。> 系统提示: 无法写入配置文件！ 'alice' 命令行提示 : 2024-01-29 07:46:01 - \AI-Vtuber-20240125\webui.py[line:1385] - ERROR: 无法写入配置文件！ 'alice' 2024-01-29 07:46:01 - \AI-Vtuber-20240125\webui.py[line:1387] - ERROR: Traceback (most recent call last): File "\AI-Vtuber-20240125\webui.py", line 949, in save_config config_data["alice"]["api_ip_port"] = input_alice_api_ip_port.value KeyError: 'alice'。> 。> #### 您期望的结果是怎样的？ | What is your expected outcome?。> 希望处理,或告知操作。。更新源码，整合包使用2-1的脚本。
[issue#601] 更新投资人。
[issue#602] 🐛 一些问题。。。 | [Bug] Some problem...。安装缺失的依赖库。
[issue#603] 优化翻译前原文字幕的保存实现。
[issue#604] 页面配置新增 板块显影配置（实际显影功能还未实现，待推进，后续可能做成显示+功能开关）。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/156ed27e-546e-4c6a-b8f5-d9312a81e34f)。。
[issue#605] 🙋 问题交流 不应该局限在几个选择上。> 应该提供通用的web接口，让用户自己去实现。 比如xuniren这个接口，不需要局限只能对接xuniren。 完全可以把AI-VTuber当做一个中间通信规范， 然后支持任意其他的虚拟身体软件，只要实现对应的web接口。。本身就没啥局限，要接别的 开发就行了。。本来协议就是不同的，也没法随便对接用。
[issue#606] 更新投资人。
[issue#607] webui实现板块显影功能。
[issue#608] Live2D移到虚拟身体，新增模型名配置，可以自动检索模型名，进行模型加载。
[issue#609] 用户仅发送点歌命令的情况下，优化命令错误的提示语。
[issue#610] webui 文案页 文案音频合成新增合成后音频在页面试听和删除的功能；本地问答库-json新增积分的回答内容。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/cd53b5b4-3cc2-4576-8ab4-4ff9bd1bf01d)。。
[issue#611] 智谱新增glm3-turbo和glm4的接入。
[issue#612] 🐛 新版gpt-sovits无法对接使用。中间版本这样改，具体啥版本得看你webui显示有没有相关的内容。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/c8f10291-a204-408a-bc0d-47d55917b286)。修改my_tts.py的 fn_index 的 值 为 3即可。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/d763b504-1706-4a49-9e68-04d360a9b5fd)。。2-2：。这版本的话，这样改。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/45eee700-b291-420c-aaa9-6a1bb9847874)。。建议使用官方api对接：。https://github.com/Ikaros-521/AI-Vtuber/pull/613。脚本参考：。```。runtime\python.exe api.py -s "F:\GPT-SoVITS\SoVITS_weights\ikaros_e8_s280.pth" -g "F:\GPT-SoVITS\GPT_weights\ikaros-e15.ckpt" -dr "F:\GPT-SoVITS\raws\ikaros\21.wav" -dt "マスター、どうりょくろか、いいえ、なんでもありません" -dl "ja"。pause。。```。
[issue#613] gpt-sovits新增官方api对接，更加方便高效。
[issue#614] 修复gpt-sovits gradio模式下无法使用的bug。
[issue#615] gpt-sovits对接CyberWon的WebTTS版的API。
[issue#616] 新增 数据分析 页面，统计分析最热弹幕词云、积分榜单、礼物榜单；webui右下角新增返回顶部按钮。
[issue#617] webui优化文档和关于。
[issue#618] 补充缺失的依赖。
[issue#619] 抖音平台融合聊天模式。
[issue#620] 🙋 聊天页 谷歌语音识别失败，报错：ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。问题起因：魔法不稳定，或 没开魔法。解决方案：更换魔法 / 切换节点。
[issue#621] 抖音平台 在没有启动监听程序的情况下 优化提示日志，并不结束程序，用户可以通过webui重启。
[issue#622] 🐛 一些问题。。。 | [Bug] 问答未播放完毕即恢复文案自动播放；文案自动播放没有被问答打断。1. 打断就是说一半被打断，而不是等待第一个播放完了再下一个。如果需要让每一个都完整播放，请使用 audio_player_v2 做为播放器使用。。2. 正常情况下，文案是会在回答触发的情况下打断，而不会出现无法打断的情况，具体问题2中描述的情况暂时无法复现。。3.  问题1和问题2在功能上存在冲突，一个不要打断，一个又要，绷。我自己理解的需求：。一般来说自动播放的文案都是预先设计好的，因此自动播放的文案是需要被更高优先级的问答所打断。因为这些问答都是直播间里面的用户进来了之后发送一些关键词触发的。。但是这些问答播放的时候应该是不能够被自动播放的文案所打断的。。其实一句话就是：高优先级的（这里是问答）不能被低优先级的（自动文案）打断，而低优先级的可以被高优先级的打断。。但是现在的问题是当高优先级的（问答）时长超过了一定数值的时候，例如20多秒，那么就会被低优先级的（自动文案）的播放打断。。。另外在我本地跑的时候，确实出现了低优先级的（自动文案）只有在首次才可以被高优先级（问答）打断。一旦首次打断之后问答超过一定秒数之后被低优先级的（自动文案）打断之后。那么之后低优先级的（自动文案）就不能再被高优先级的（问答）打断了。。。。。47978212。***@***.***。。。。&nbsp;。。。。。------------------&nbsp;原始邮件&nbsp;------------------。发件人:                                                                                                                        "Ikaros-521/AI-Vtuber"                                                                                    ***@***.***&gt;;。发送时间:&nbsp;2024年2月7日(星期三) 下午5:31。***@***.***&gt;;。***@***.******@***.***&gt;;。主题:&nbsp;Re: [Ikaros-521/AI-Vtuber] 🐛 一些问题。。。 | [Bug] 问答未播放完毕即恢复文案自动播放；文案自动播放没有被问答打断 (Issue #622)。。。。。。  。打断就是说一半被打断，而不是等待第一个播放完了再下一个。如果需要让每一个都完整播放，请使用 audio_player_v2 做为播放器使用。。 。正常情况下，文案是会在回答触发的情况下打断，而不会出现无法打断的情况，具体问题2中描述的情况暂时无法复现。。 。问题1和问题2在功能上存在冲突，一个不要打断，一个又要，绷。  。—。Reply to this email directly, view it on GitHub, or unsubscribe.。You are receiving this because you authored the thread.Message ID: ***@***.***&gt;。> 我自己理解的需求： 一般来说自动播放的文案都是预先设计好的，因此自动播放的文案是需要被更高优先级的问答所打断。因为这些问答都是直播间里面的用户进来了之后发送一些关键词触发的。 但是这些问答播放的时候应该是不能够被自动播放的文案所打断的。 其实一句话就是：高优先级的（这里是问答）不能被低优先级的（自动文案）打断，而低优先级的可以被高优先级的打断。 但是现在的问题是当高优先级的（问答）时长超过了一定数值的时候，例如20多秒，那么就会被低优先级的（自动文案）的播放打断 另外在我本地跑的时候，确实出现了低优先级的（自动文案）只有在首次才可以被高优先级（问答）打断。一旦首次打断之后问答超过一定秒数之后被低优先级的（自动文案）打断之后。那么之后低优先级的（自动文案）就不能再被高优先级的（问答）打断了 47978212 ***@***.*** &nbsp;。> […](#)。> ------------------&nbsp;原始邮件&nbsp;------------------ 发件人: "Ikaros-521/AI-Vtuber" ***@***.***&gt;; 发送时间:&nbsp;2024年2月7日(星期三) 下午5:31 ***@***.***&gt;; ***@***.******@***.***&gt;; 主题:&nbsp;Re: [Ikaros-521/AI-Vtuber] 🐛 一些问题。。。 | [Bug] 问答未播放完毕即恢复文案自动播放；文案自动播放没有被问答打断 (Issue #622) 打断就是说一半被打断，而不是等待第一个播放完了再下一个。如果需要让每一个都完整播放，请使用 audio_player_v2 做为播放器使用。 正常情况下，文案是会在回答触发的情况下打断，而不会出现无法打断的情况，具体问题2中描述的情况暂时无法复现。 问题1和问题2在功能上存在冲突，一个不要打断，一个又要，绷 — Reply to this email directly, view it on GitHub, or unsubscribe. You are receiving this because you authored the thread.Message ID: ***@***.***&gt;。。文案不会打断 弹幕问答的呀。。。 啥时候有文案打断弹幕问答的情况了。另外你说的打断机制，其实这目前就是没有做好，整一块文案逻辑还在构思重写的过程中，具体要实现真正的优先级打断机制以目前的架构是做不了的，建议自行重构文案播放逻辑。
[issue#623] 新增平台 tiktok的接入（支持数据有：弹幕，礼物，入场）。
[issue#624] 恢复TikTok关闭的日志信息。
[issue#625] 修复tiktok日志输出代码错误。
[issue#626] 接入clone-voice（新TTS）。
[issue#627] 更新思维导图。
[issue#628] 投资人更新。
[issue#629] 更新投资人。
[issue#630] 文档新增一个vercel的备份。
[issue#631] 助播模式新增语音合成配置，可以自定义文本匹配后用的语音合成类型，从而区分助播和主播的声音。
[issue#632] 文案页-文案音频合成新增语音合成类型选择，可以自定义TTS进行合成，不需要保存就可以切换。
[issue#633] TTS页新增通用板块，目前增加了试听功能，可以在没有运行的情况下，进行对应类型的TTS合成。
[issue#634] 修改so-vits-svc和ddsp-svc音频输出路径为绝对路径。
[issue#635] 🐛 AttributeError: 'str' object has no attribute 'choices'。这个就是接口没有返回正常的数据导致的数据解析失败，得确认密钥等配置是否正常可用。
[issue#636] 按键映射功能改为按键/文案映射，其中新增了按键触发、文案触发控制，可以实现关键词或礼物触发对应文案。其实这个文案映射的部分也类似 本地文案的功能了。但是把礼物直接做到本地文案会导致弹幕触发匹配的情况，所以合到了按键映射中，可能会有点不利于理解。
[issue#637] 更新投资人。
[issue#638] 兼容kimi chat API调用（复用ChatGPT）。
[issue#639] 更新文档和思维导图。
[issue#640] 更新投资人。
[issue#641] 对接 QAnything。
[issue#642] 更新投资人。
[issue#643] 更新依赖文件。
[issue#644] 更新投资人。
[issue#645] 接入 在线版qanything；audio修改成员变量到类变量（后期应用使用。
[issue#646] 🚀 回答弹幕问题时，可以将用户名作为内容的一部分。https://github.com/Ikaros-521/AI-Vtuber/pull/652。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/34d4cb1f-65b3-4215-88db-5da1d7355771)。。
[issue#647] 合并各平台到单程序，减低冗余（待测试）。
[issue#648] 🐛 运行快手，报错: If this call came from a _pb2.py file, your generated code is out of date and must be regenerated with protoc >= 3.19.0.。降低protobuf版本，参考命令。`pip install protobuf==3.20.3`。
[issue#649] 删除各平台程序，减低冗余。
[issue#650] 聊天页 新增 播放中不录音的配置，方便在本地做AI客服等场景应用时避免循环录音错误问题。
[issue#651] protobuf改为3.20.3。
[issue#652] 新增配置项 弹幕模板，可以在发送给LLM前对弹幕内容进行包装，如携带用户名等。
[issue#653] 删除测试日志输出。
[issue#654] 🐛 ModuleNotFoundError: No module named 'requests'。先安装 requests。`pip install requests`。。
[issue#655] 🐛 安装依赖冲突（pip install -r requirements.txt）报错：ERROR: Cannot install -r requirements.txt (line 18) and -r requirements.txt (line 74) because these package versions have conflicting dependencies.。删除requirements.txt里面的langchain 、gradio ，完成安装后，手动安装冲突库。一般高版本向下兼容低版本。。```。ERROR: Cannot install -r requirements.txt (line 3), -r requirements.txt (line 38), -r requirements.txt (line 39), -r requirements.txt (line 6) and aiohttp==3.9.1 because these package versions have conflicting dependencies.。。The conflict is caused by:。    The user requested aiohttp==3.9.1。    edge-tts 6.1.6 depends on aiohttp>=3.8.0。    langchain 0.0.142 depends on aiohttp<4.0.0 and >=3.8.3。    blivedm 0.1.1 depends on aiohttp。    bilibili-api-python 16.2.0 depends on aiohttp~=3.9.3。    The user requested aiohttp==3.9.1。    edge-tts 6.1.6 depends on aiohttp>=3.8.0。    langchain 0.0.142 depends on aiohttp<4.0.0 an。```。> ```。> ERROR: Cannot install -r requirements.txt (line 3), -r requirements.txt (line 38), -r requirements.txt (line 39), -r requirements.txt (line 6) and aiohttp==3.9.1 because these package versions have conflicting dependencies.。> 。> The conflict is caused by:。>     The user requested aiohttp==3.9.1。>     edge-tts 6.1.6 depends on aiohttp>=3.8.0。>     langchain 0.0.142 depends on aiohttp<4.0.0 and >=3.8.3。>     blivedm 0.1.1 depends on aiohttp。>     bilibili-api-python 16.2.0 depends on aiohttp~=3.9.3。>     The user requested aiohttp==3.9.1。>     edge-tts 6.1.6 depends on aiohttp>=3.8.0。>     langchain 0.0.142 depends on aiohttp<4.0.0 an。> ```。。删除 aiohttp后，安装完再手动安装。```。Collecting PyYAML>=5.4.1 (from langchain==0.0.142->-r requirements.txt (line 38))。  Downloading PyYAML-5.4.1.tar.gz (175 kB)。     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 175.1/175.1 kB 8.2 MB/s eta 0:00:00。  Installing build dependencies ... done。  Getting requirements to build wheel ... error。  error: subprocess-exited-with-error。。  × Getting requirements to build wheel did not run successfully.。  │ exit code: 1。  ╰─> [48 lines of output]。      running egg_info。      writing lib3/PyYAML.egg-info/PKG-INFO。      writing dependency_links to lib3/PyYAML.egg-info/dependency_links.txt。      writing top-level names to lib3/PyYAML.egg-info/top_level.txt。      Traceback (most recent call last):。        File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 353, in <module>。          main()。        File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 335, in main。          json_out['return_val'] = hook(**hook_input['kwargs'])。        File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 118, in get_requires_for_build_wheel。          return hook(config_settings)。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/build_meta.py", line 325, in get_requires_for_build_wheel。          return self._get_build_requires(config_settings, requirements=['wheel'])。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/build_meta.py", line 295, in _get_build_requires。          self.run_setup()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/build_meta.py", line 311, in run_setup。          exec(code, locals())。        File "<string>", line 271, in <module>。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/__init__.py", line 103, in setup。          return distutils.core.setup(**attrs)。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/core.py", line 185, in setup。          return run_commands(dist)。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/core.py", line 201, in run_commands。          dist.run_commands()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/dist.py", line 969, in run_commands。          self.run_command(cmd)。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/dist.py", line 963, in run_command。          super().run_command(command)。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/dist.py", line 988, in run_command。          cmd_obj.run()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 321, in run。          self.find_sources()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 329, in find_sources。          mm.run()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 550, in run。          self.add_defaults()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 588, in add_defaults。          sdist.add_defaults(self)。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/sdist.py", line 102, in add_defaults。          super().add_defaults()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/command/sdist.py", line 251, in add_defaults。          self._add_defaults_ext()。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/command/sdist.py", line 336, in _add_defaults_ext。          self.filelist.extend(build_ext.get_source_files())。        File "<string>", line 201, in get_source_files。        File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/cmd.py", line 107, in __getattr__。          raise AttributeError(attr)。      AttributeError: cython_sources。      [end of output]。。  note: This error originates from a subprocess, and is likely not a problem with pip.。error: subprocess-exited-with-error。。× Getting requirements to build wheel did not run successfully.。│ exit code: 1。╰─> See above for output.。。note: This error originates from a subprocess, and is likely not a problem with pip.。```。> ```。> Collecting PyYAML>=5.4.1 (from langchain==0.0.142->-r requirements.txt (line 38))。>   Downloading PyYAML-5.4.1.tar.gz (175 kB)。>      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 175.1/175.1 kB 8.2 MB/s eta 0:00:00。>   Installing build dependencies ... done。>   Getting requirements to build wheel ... error。>   error: subprocess-exited-with-error。> 。>   × Getting requirements to build wheel did not run successfully.。>   │ exit code: 1。>   ╰─> [48 lines of output]。>       running egg_info。>       writing lib3/PyYAML.egg-info/PKG-INFO。>       writing dependency_links to lib3/PyYAML.egg-info/dependency_links.txt。>       writing top-level names to lib3/PyYAML.egg-info/top_level.txt。>       Traceback (most recent call last):。>         File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 353, in <module>。>           main()。>         File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 335, in main。>           json_out['return_val'] = hook(**hook_input['kwargs'])。>         File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 118, in get_requires_for_build_wheel。>           return hook(config_settings)。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/build_meta.py", line 325, in get_requires_for_build_wheel。>           return self._get_build_requires(config_settings, requirements=['wheel'])。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/build_meta.py", line 295, in _get_build_requires。>           self.run_setup()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/build_meta.py", line 311, in run_setup。>           exec(code, locals())。>         File "<string>", line 271, in <module>。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/__init__.py", line 103, in setup。>           return distutils.core.setup(**attrs)。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/core.py", line 185, in setup。>           return run_commands(dist)。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/core.py", line 201, in run_commands。>           dist.run_commands()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/dist.py", line 969, in run_commands。>           self.run_command(cmd)。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/dist.py", line 963, in run_command。>           super().run_command(command)。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/dist.py", line 988, in run_command。>           cmd_obj.run()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 321, in run。>           self.find_sources()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 329, in find_sources。>           mm.run()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 550, in run。>           self.add_defaults()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/egg_info.py", line 588, in add_defaults。>           sdist.add_defaults(self)。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/command/sdist.py", line 102, in add_defaults。>           super().add_defaults()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/command/sdist.py", line 251, in add_defaults。>           self._add_defaults_ext()。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/command/sdist.py", line 336, in _add_defaults_ext。>           self.filelist.extend(build_ext.get_source_files())。>         File "<string>", line 201, in get_source_files。>         File "/tmp/pip-build-env-y3bo8iwd/overlay/lib/python3.10/site-packages/setuptools/_distutils/cmd.py", line 107, in __getattr__。>           raise AttributeError(attr)。>       AttributeError: cython_sources。>       [end of output]。> 。>   note: This error originates from a subprocess, and is likely not a problem with pip.。> error: subprocess-exited-with-error。> 。> × Getting requirements to build wheel did not run successfully.。> │ exit code: 1。> ╰─> See above for output.。> 。> note: This error originates from a subprocess, and is likely not a problem with pip.。> ```。。删除langchain，bilibili-api-python，装完后手动补。```。Stored in directory: /home/ikaros/.cache/pip/wheels/79/9e/b6/ab96803f552f38c341a3f07f12ae49f7cbf9d406a4c70200fa。  Building wheel for PyAudio (pyproject.toml) ... error。  error: subprocess-exited-with-error。。  × Building wheel for PyAudio (pyproject.toml) did not run successfully.。  │ exit code: 1。  ╰─> [18 lines of output]。      running bdist_wheel。      running build。      running build_py。      creating build。      creating build/lib.linux-x86_64-cpython-310。      creating build/lib.linux-x86_64-cpython-310/pyaudio。      copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。      running build_ext。      building 'pyaudio._portaudio' extension。      creating build/temp.linux-x86_64-cpython-310。      creating build/temp.linux-x86_64-cpython-310/src。      creating build/temp.linux-x86_64-cpython-310/src/pyaudio。      gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。      src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。          9 | #include "portaudio.h"。            |          ^~~~~~~~~~~~~。      compilation terminated.。      error: command '/usr/bin/gcc' failed with exit code 1。      [end of output]。。  note: This error originates from a subprocess, and is likely not a problem with pip.。  ERROR: Failed building wheel for PyAudio。  Building wheel for pyautogui (pyproject.toml) ... done。  Created wheel for pyautogui: filename=PyAutoGUI-0.9.54-py3-none-any.whl size=37576 sha256=7ce43232eebcdce900d1c370886c23ee82c2ceada93cd0e814b90274e8ce12eb。  Stored in directory: /home/ikaros/.cache/pip/wheels/23/a7/1c/5a51aaff3bbe110be4ddf766d429cc9d2fae7a72fc1b843e56。  Building wheel for jieba (setup.py) ... done。  Created wheel for jieba: filename=jieba-0.42.1-py3-none-any.whl size=19314458 sha256=e1f96b86030cc41c04cfb6b610368f6571670d6389d76e8dc435cac253a3fb15。  Stored in directory: /home/ikaros/.cache/pip/wheels/c9/69/31/d56d90b22a1777b0b231e234b00302a55be255930f8bd92dcd。  Building wheel for ffmpy (setup.py) ... done。  Created wheel for ffmpy: filename=ffmpy-0.3.2-py3-none-any.whl size=5582 sha256=6ba42a5ca14e9f9b2a291299d137b21a6954c70ff575e11644bd2c37d98e78ab。  Stored in directory: /home/ikaros/.cache/pip/wheels/bd/65/9a/671fc6dcde07d4418df0c592f8df512b26d7a0029c2a23dd81。  Building wheel for protobuf3-to-dict (setup.py) ... done。  Created wheel for protobuf3-to-dict: filename=protobuf3_to_dict-0.1.5-py3-none-any.whl size=4009 sha256=44c8d4802991bc07dd03e38e7c0c7e2c59a13fafa99e15eff7149a5487de2a04。  Stored in directory: /home/ikaros/.cache/pip/wheels/12/3e/42/e783cdd4e7b8fda9bfc472eeb465bc9041bda90a3dbece8d74。  Building wheel for pygetwindow (setup.py) ... done。  Created wheel for pygetwindow: filename=PyGetWindow-0.0.9-py3-none-any.whl size=11064 sha256=b2e3acb75df701da2b6d4201c4c6120f1301c71f99c57c85bd3f3df77020c7eb。  Stored in directory: /home/ikaros/.cache/pip/wheels/02/f6/64/c5d427819f80553df2398bfecc351e94e00371c1dcb6edb24e。  Building wheel for pyscreeze (pyproject.toml) ... done。  Created wheel for pyscreeze: filename=PyScreeze-0.1.30-py3-none-any.whl size=14382 sha256=38069024556b881c3f9149ae731d80b8a2c3c24578a4beb3d1fa5a48263e25d1。  Stored in directory: /home/ikaros/.cache/pip/wheels/c4/46/42/d3613adf9880c8b4a780c07a8cf85df12ca04a9a0ca77c6c02。  Building wheel for pytweening (setup.py) ... done。  Created wheel for pytweening: filename=pytweening-1.2.0-py3-none-any.whl size=8009 sha256=dea9f974f99ec42f32db21ff7cd22760e37d20b35698e017e309ffdc37a4420d。  Stored in directory: /home/ikaros/.cache/pip/wheels/22/d7/02/b3e395d93b6dd41a7da54b2fa738ec03e7fb7451f7f22f8213。  Building wheel for mouseinfo (setup.py) ... done。  Created wheel for mouseinfo: filename=MouseInfo-0.1.3-py3-none-any.whl size=10890 sha256=36cf2f01096de31e5e5dec941ce73fb3d88622d34299b6ccc1d3832207b0107c。  Stored in directory: /home/ikaros/.cache/pip/wheels/6e/d5/27/2f1be84b3e6ccee99c82f50e3fe7fe6360dd30417109b49a72。  Building wheel for pymsgbox (pyproject.toml) ... done。  Created wheel for pymsgbox: filename=PyMsgBox-1.0.9-py3-none-any.whl size=7406 sha256=bac1ad777dd1665fe7af88aa18cff33c4bf5520db71b980f975106bd93fdb765。  Stored in directory: /home/ikaros/.cache/pip/wheels/b9/6a/ba/be2d7d78166ec8018c21d07241dffa54446c09652a267759ae。  Building wheel for python3-Xlib (setup.py) ... done。  Created wheel for python3-Xlib: filename=python3_xlib-0.15-py3-none-any.whl size=109501 sha256=03c24a81c9308bc4ee8aed546f3e440eb2818870e2d0b741c7afb4fb2d6b076a。  Stored in directory: /home/ikaros/.cache/pip/wheels/9c/8e/c5/8a93a3415a4a2065f31750a3244db61482b9e508f04ee56e82。  Building wheel for grpclib (pyproject.toml) ... done。  Created wheel for grpclib: filename=grpclib-0.4.7-py3-none-any.whl size=76221 sha256=954f4fc7649c88a54a178eaa76fb3aba8da06f6d7b8215e315e20212b521dfc4。  Stored in directory: /home/ikaros/.cache/pip/wheels/05/c0/1c/3d807409d0c67efeab2949832ba409205b1b6fe03f739ae4c1。  Building wheel for pyperclip (setup.py) ... done。  Created wheel for pyperclip: filename=pyperclip-1.8.2-py3-none-any.whl size=11125 sha256=3ad0b3e966dae0dc9e08e6c06abd9f222f9d00d5fabb75cbc0658d80c65c8c81。  Stored in directory: /home/ikaros/.cache/pip/wheels/04/24/fe/140a94a7f1036003ede94579e6b4227fe96c840c6f4dcbe307。  Building wheel for pyrect (setup.py) ... done。  Created wheel for pyrect: filename=PyRect-0.2.0-py2.py3-none-any.whl size=11179 sha256=ad8ea8cf5faeb0e691033cfde20b9a9f16102054ceda369fe9e31d61b3f94224。  Stored in directory: /home/ikaros/.cache/pip/wheels/d5/4c/bd/42e4e23641afcd185d4e932784da37e6e04505da0cf3f7b832。Successfully built profanity wenxinworkshop blivedm langid websocket-client-py3 pyautogui jieba ffmpy protobuf3-to-dict pygetwindow pyscreeze pytweening mouseinfo pymsgbox python3-Xlib grpclib pyperclip pyrect。Failed to build PyAudio。ERROR: Could not build wheels for PyAudio, which is required to install pyproject.toml-based projects。(aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$。```。> ```。> Stored in directory: /home/ikaros/.cache/pip/wheels/79/9e/b6/ab96803f552f38c341a3f07f12ae49f7cbf9d406a4c70200fa。>   Building wheel for PyAudio (pyproject.toml) ... error。>   error: subprocess-exited-with-error。> 。>   × Building wheel for PyAudio (pyproject.toml) did not run successfully.。>   │ exit code: 1。>   ╰─> [18 lines of output]。>       running bdist_wheel。>       running build。>       running build_py。>       creating build。>       creating build/lib.linux-x86_64-cpython-310。>       creating build/lib.linux-x86_64-cpython-310/pyaudio。>       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。>       running build_ext。>       building 'pyaudio._portaudio' extension。>       creating build/temp.linux-x86_64-cpython-310。>       creating build/temp.linux-x86_64-cpython-310/src。>       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。>       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。>       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。>           9 | #include "portaudio.h"。>             |          ^~~~~~~~~~~~~。>       compilation terminated.。>       error: command '/usr/bin/gcc' failed with exit code 1。>       [end of output]。> 。>   note: This error originates from a subprocess, and is likely not a problem with pip.。>   ERROR: Failed building wheel for PyAudio。>   Building wheel for pyautogui (pyproject.toml) ... done。>   Created wheel for pyautogui: filename=PyAutoGUI-0.9.54-py3-none-any.whl size=37576 sha256=7ce43232eebcdce900d1c370886c23ee82c2ceada93cd0e814b90274e8ce12eb。>   Stored in directory: /home/ikaros/.cache/pip/wheels/23/a7/1c/5a51aaff3bbe110be4ddf766d429cc9d2fae7a72fc1b843e56。>   Building wheel for jieba (setup.py) ... done。>   Created wheel for jieba: filename=jieba-0.42.1-py3-none-any.whl size=19314458 sha256=e1f96b86030cc41c04cfb6b610368f6571670d6389d76e8dc435cac253a3fb15。>   Stored in directory: /home/ikaros/.cache/pip/wheels/c9/69/31/d56d90b22a1777b0b231e234b00302a55be255930f8bd92dcd。>   Building wheel for ffmpy (setup.py) ... done。>   Created wheel for ffmpy: filename=ffmpy-0.3.2-py3-none-any.whl size=5582 sha256=6ba42a5ca14e9f9b2a291299d137b21a6954c70ff575e11644bd2c37d98e78ab。>   Stored in directory: /home/ikaros/.cache/pip/wheels/bd/65/9a/671fc6dcde07d4418df0c592f8df512b26d7a0029c2a23dd81。>   Building wheel for protobuf3-to-dict (setup.py) ... done。>   Created wheel for protobuf3-to-dict: filename=protobuf3_to_dict-0.1.5-py3-none-any.whl size=4009 sha256=44c8d4802991bc07dd03e38e7c0c7e2c59a13fafa99e15eff7149a5487de2a04。>   Stored in directory: /home/ikaros/.cache/pip/wheels/12/3e/42/e783cdd4e7b8fda9bfc472eeb465bc9041bda90a3dbece8d74。>   Building wheel for pygetwindow (setup.py) ... done。>   Created wheel for pygetwindow: filename=PyGetWindow-0.0.9-py3-none-any.whl size=11064 sha256=b2e3acb75df701da2b6d4201c4c6120f1301c71f99c57c85bd3f3df77020c7eb。>   Stored in directory: /home/ikaros/.cache/pip/wheels/02/f6/64/c5d427819f80553df2398bfecc351e94e00371c1dcb6edb24e。>   Building wheel for pyscreeze (pyproject.toml) ... done。>   Created wheel for pyscreeze: filename=PyScreeze-0.1.30-py3-none-any.whl size=14382 sha256=38069024556b881c3f9149ae731d80b8a2c3c24578a4beb3d1fa5a48263e25d1。>   Stored in directory: /home/ikaros/.cache/pip/wheels/c4/46/42/d3613adf9880c8b4a780c07a8cf85df12ca04a9a0ca77c6c02。>   Building wheel for pytweening (setup.py) ... done。>   Created wheel for pytweening: filename=pytweening-1.2.0-py3-none-any.whl size=8009 sha256=dea9f974f99ec42f32db21ff7cd22760e37d20b35698e017e309ffdc37a4420d。>   Stored in directory: /home/ikaros/.cache/pip/wheels/22/d7/02/b3e395d93b6dd41a7da54b2fa738ec03e7fb7451f7f22f8213。>   Building wheel for mouseinfo (setup.py) ... done。>   Created wheel for mouseinfo: filename=MouseInfo-0.1.3-py3-none-any.whl size=10890 sha256=36cf2f01096de31e5e5dec941ce73fb3d88622d34299b6ccc1d3832207b0107c。>   Stored in directory: /home/ikaros/.cache/pip/wheels/6e/d5/27/2f1be84b3e6ccee99c82f50e3fe7fe6360dd30417109b49a72。>   Building wheel for pymsgbox (pyproject.toml) ... done。>   Created wheel for pymsgbox: filename=PyMsgBox-1.0.9-py3-none-any.whl size=7406 sha256=bac1ad777dd1665fe7af88aa18cff33c4bf5520db71b980f975106bd93fdb765。>   Stored in directory: /home/ikaros/.cache/pip/wheels/b9/6a/ba/be2d7d78166ec8018c21d07241dffa54446c09652a267759ae。>   Building wheel for python3-Xlib (setup.py) ... done。>   Created wheel for python3-Xlib: filename=python3_xlib-0.15-py3-none-any.whl size=109501 sha256=03c24a81c9308bc4ee8aed546f3e440eb2818870e2d0b741c7afb4fb2d6b076a。>   Stored in directory: /home/ikaros/.cache/pip/wheels/9c/8e/c5/8a93a3415a4a2065f31750a3244db61482b9e508f04ee56e82。>   Building wheel for grpclib (pyproject.toml) ... done。>   Created wheel for grpclib: filename=grpclib-0.4.7-py3-none-any.whl size=76221 sha256=954f4fc7649c88a54a178eaa76fb3aba8da06f6d7b8215e315e20212b521dfc4。>   Stored in directory: /home/ikaros/.cache/pip/wheels/05/c0/1c/3d807409d0c67efeab2949832ba409205b1b6fe03f739ae4c1。>   Building wheel for pyperclip (setup.py) ... done。>   Created wheel for pyperclip: filename=pyperclip-1.8.2-py3-none-any.whl size=11125 sha256=3ad0b3e966dae0dc9e08e6c06abd9f222f9d00d5fabb75cbc0658d80c65c8c81。>   Stored in directory: /home/ikaros/.cache/pip/wheels/04/24/fe/140a94a7f1036003ede94579e6b4227fe96c840c6f4dcbe307。>   Building wheel for pyrect (setup.py) ... done。>   Created wheel for pyrect: filename=PyRect-0.2.0-py2.py3-none-any.whl size=11179 sha256=ad8ea8cf5faeb0e691033cfde20b9a9f16102054ceda369fe9e31d61b3f94224。>   Stored in directory: /home/ikaros/.cache/pip/wheels/d5/4c/bd/42e4e23641afcd185d4e932784da37e6e04505da0cf3f7b832。> Successfully built profanity wenxinworkshop blivedm langid websocket-client-py3 pyautogui jieba ffmpy protobuf3-to-dict pygetwindow pyscreeze pytweening mouseinfo pymsgbox python3-Xlib grpclib pyperclip pyrect。> Failed to build PyAudio。> ERROR: Could not build wheels for PyAudio, which is required to install pyproject.toml-based projects。> (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$。> ```。。删除pyaudio先。注意注意：pydantic==1.10.13。> > ```。> > Stored in directory: /home/ikaros/.cache/pip/wheels/79/9e/b6/ab96803f552f38c341a3f07f12ae49f7cbf9d406a4c70200fa。> >   Building wheel for PyAudio (pyproject.toml) ... error。> >   error: subprocess-exited-with-error。> > 。> >   × Building wheel for PyAudio (pyproject.toml) did not run successfully.。> >   │ exit code: 1。> >   ╰─> [18 lines of output]。> >       running bdist_wheel。> >       running build。> >       running build_py。> >       creating build。> >       creating build/lib.linux-x86_64-cpython-310。> >       creating build/lib.linux-x86_64-cpython-310/pyaudio。> >       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。> >       running build_ext。> >       building 'pyaudio._portaudio' extension。> >       creating build/temp.linux-x86_64-cpython-310。> >       creating build/temp.linux-x86_64-cpython-310/src。> >       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。> >       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。> >       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。> >           9 | #include "portaudio.h"。> >             |          ^~~~~~~~~~~~~。> >       compilation terminated.。> >       error: command '/usr/bin/gcc' failed with exit code 1。> >       [end of output]。> > 。> >   note: This error originates from a subprocess, and is likely not a problem with pip.。> >   ERROR: Failed building wheel for PyAudio。> >   Building wheel for pyautogui (pyproject.toml) ... done。> >   Created wheel for pyautogui: filename=PyAutoGUI-0.9.54-py3-none-any.whl size=37576 sha256=7ce43232eebcdce900d1c370886c23ee82c2ceada93cd0e814b90274e8ce12eb。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/23/a7/1c/5a51aaff3bbe110be4ddf766d429cc9d2fae7a72fc1b843e56。> >   Building wheel for jieba (setup.py) ... done。> >   Created wheel for jieba: filename=jieba-0.42.1-py3-none-any.whl size=19314458 sha256=e1f96b86030cc41c04cfb6b610368f6571670d6389d76e8dc435cac253a3fb15。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/c9/69/31/d56d90b22a1777b0b231e234b00302a55be255930f8bd92dcd。> >   Building wheel for ffmpy (setup.py) ... done。> >   Created wheel for ffmpy: filename=ffmpy-0.3.2-py3-none-any.whl size=5582 sha256=6ba42a5ca14e9f9b2a291299d137b21a6954c70ff575e11644bd2c37d98e78ab。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/bd/65/9a/671fc6dcde07d4418df0c592f8df512b26d7a0029c2a23dd81。> >   Building wheel for protobuf3-to-dict (setup.py) ... done。> >   Created wheel for protobuf3-to-dict: filename=protobuf3_to_dict-0.1.5-py3-none-any.whl size=4009 sha256=44c8d4802991bc07dd03e38e7c0c7e2c59a13fafa99e15eff7149a5487de2a04。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/12/3e/42/e783cdd4e7b8fda9bfc472eeb465bc9041bda90a3dbece8d74。> >   Building wheel for pygetwindow (setup.py) ... done。> >   Created wheel for pygetwindow: filename=PyGetWindow-0.0.9-py3-none-any.whl size=11064 sha256=b2e3acb75df701da2b6d4201c4c6120f1301c71f99c57c85bd3f3df77020c7eb。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/02/f6/64/c5d427819f80553df2398bfecc351e94e00371c1dcb6edb24e。> >   Building wheel for pyscreeze (pyproject.toml) ... done。> >   Created wheel for pyscreeze: filename=PyScreeze-0.1.30-py3-none-any.whl size=14382 sha256=38069024556b881c3f9149ae731d80b8a2c3c24578a4beb3d1fa5a48263e25d1。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/c4/46/42/d3613adf9880c8b4a780c07a8cf85df12ca04a9a0ca77c6c02。> >   Building wheel for pytweening (setup.py) ... done。> >   Created wheel for pytweening: filename=pytweening-1.2.0-py3-none-any.whl size=8009 sha256=dea9f974f99ec42f32db21ff7cd22760e37d20b35698e017e309ffdc37a4420d。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/22/d7/02/b3e395d93b6dd41a7da54b2fa738ec03e7fb7451f7f22f8213。> >   Building wheel for mouseinfo (setup.py) ... done。> >   Created wheel for mouseinfo: filename=MouseInfo-0.1.3-py3-none-any.whl size=10890 sha256=36cf2f01096de31e5e5dec941ce73fb3d88622d34299b6ccc1d3832207b0107c。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/6e/d5/27/2f1be84b3e6ccee99c82f50e3fe7fe6360dd30417109b49a72。> >   Building wheel for pymsgbox (pyproject.toml) ... done。> >   Created wheel for pymsgbox: filename=PyMsgBox-1.0.9-py3-none-any.whl size=7406 sha256=bac1ad777dd1665fe7af88aa18cff33c4bf5520db71b980f975106bd93fdb765。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/b9/6a/ba/be2d7d78166ec8018c21d07241dffa54446c09652a267759ae。> >   Building wheel for python3-Xlib (setup.py) ... done。> >   Created wheel for python3-Xlib: filename=python3_xlib-0.15-py3-none-any.whl size=109501 sha256=03c24a81c9308bc4ee8aed546f3e440eb2818870e2d0b741c7afb4fb2d6b076a。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/9c/8e/c5/8a93a3415a4a2065f31750a3244db61482b9e508f04ee56e82。> >   Building wheel for grpclib (pyproject.toml) ... done。> >   Created wheel for grpclib: filename=grpclib-0.4.7-py3-none-any.whl size=76221 sha256=954f4fc7649c88a54a178eaa76fb3aba8da06f6d7b8215e315e20212b521dfc4。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/05/c0/1c/3d807409d0c67efeab2949832ba409205b1b6fe03f739ae4c1。> >   Building wheel for pyperclip (setup.py) ... done。> >   Created wheel for pyperclip: filename=pyperclip-1.8.2-py3-none-any.whl size=11125 sha256=3ad0b3e966dae0dc9e08e6c06abd9f222f9d00d5fabb75cbc0658d80c65c8c81。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/04/24/fe/140a94a7f1036003ede94579e6b4227fe96c840c6f4dcbe307。> >   Building wheel for pyrect (setup.py) ... done。> >   Created wheel for pyrect: filename=PyRect-0.2.0-py2.py3-none-any.whl size=11179 sha256=ad8ea8cf5faeb0e691033cfde20b9a9f16102054ceda369fe9e31d61b3f94224。> >   Stored in directory: /home/ikaros/.cache/pip/wheels/d5/4c/bd/42e4e23641afcd185d4e932784da37e6e04505da0cf3f7b832。> > Successfully built profanity wenxinworkshop blivedm langid websocket-client-py3 pyautogui jieba ffmpy protobuf3-to-dict pygetwindow pyscreeze pytweening mouseinfo pymsgbox python3-Xlib grpclib pyperclip pyrect。> > Failed to build PyAudio。> > ERROR: Could not build wheels for PyAudio, which is required to install pyproject.toml-based projects。> > (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$。> > ```。> 。> 删除pyaudio先。。```。(aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$ pip install pyaudio。Collecting pyaudio。  Using cached PyAudio-0.2.14.tar.gz (47 kB)。  Installing build dependencies ... done。  Getting requirements to build wheel ... done。  Preparing metadata (pyproject.toml) ... done。Building wheels for collected packages: pyaudio。  Building wheel for pyaudio (pyproject.toml) ... error。  error: subprocess-exited-with-error。。  × Building wheel for pyaudio (pyproject.toml) did not run successfully.。  │ exit code: 1。  ╰─> [18 lines of output]。      running bdist_wheel。      running build。      running build_py。      creating build。      creating build/lib.linux-x86_64-cpython-310。      creating build/lib.linux-x86_64-cpython-310/pyaudio。      copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。      running build_ext。      building 'pyaudio._portaudio' extension。      creating build/temp.linux-x86_64-cpython-310。      creating build/temp.linux-x86_64-cpython-310/src。      creating build/temp.linux-x86_64-cpython-310/src/pyaudio。      gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。      src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。          9 | #include "portaudio.h"。            |          ^~~~~~~~~~~~~。      compilation terminated.。      error: command '/usr/bin/gcc' failed with exit code 1。      [end of output]。。  note: This error originates from a subprocess, and is likely not a problem with pip.。  ERROR: Failed building wheel for pyaudio。Failed to build pyaudio。ERROR: Could not build wheels for pyaudio, which is required to install pyproject.toml-based projects。```。> > > ```。> > > Stored in directory: /home/ikaros/.cache/pip/wheels/79/9e/b6/ab96803f552f38c341a3f07f12ae49f7cbf9d406a4c70200fa。> > >   Building wheel for PyAudio (pyproject.toml) ... error。> > >   error: subprocess-exited-with-error。> > > 。> > >   × Building wheel for PyAudio (pyproject.toml) did not run successfully.。> > >   │ exit code: 1。> > >   ╰─> [18 lines of output]。> > >       running bdist_wheel。> > >       running build。> > >       running build_py。> > >       creating build。> > >       creating build/lib.linux-x86_64-cpython-310。> > >       creating build/lib.linux-x86_64-cpython-310/pyaudio。> > >       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。> > >       running build_ext。> > >       building 'pyaudio._portaudio' extension。> > >       creating build/temp.linux-x86_64-cpython-310。> > >       creating build/temp.linux-x86_64-cpython-310/src。> > >       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。> > >       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。> > >       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。> > >           9 | #include "portaudio.h"。> > >             |          ^~~~~~~~~~~~~。> > >       compilation terminated.。> > >       error: command '/usr/bin/gcc' failed with exit code 1。> > >       [end of output]。> > > 。> > >   note: This error originates from a subprocess, and is likely not a problem with pip.。> > >   ERROR: Failed building wheel for PyAudio。> > >   Building wheel for pyautogui (pyproject.toml) ... done。> > >   Created wheel for pyautogui: filename=PyAutoGUI-0.9.54-py3-none-any.whl size=37576 sha256=7ce43232eebcdce900d1c370886c23ee82c2ceada93cd0e814b90274e8ce12eb。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/23/a7/1c/5a51aaff3bbe110be4ddf766d429cc9d2fae7a72fc1b843e56。> > >   Building wheel for jieba (setup.py) ... done。> > >   Created wheel for jieba: filename=jieba-0.42.1-py3-none-any.whl size=19314458 sha256=e1f96b86030cc41c04cfb6b610368f6571670d6389d76e8dc435cac253a3fb15。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/c9/69/31/d56d90b22a1777b0b231e234b00302a55be255930f8bd92dcd。> > >   Building wheel for ffmpy (setup.py) ... done。> > >   Created wheel for ffmpy: filename=ffmpy-0.3.2-py3-none-any.whl size=5582 sha256=6ba42a5ca14e9f9b2a291299d137b21a6954c70ff575e11644bd2c37d98e78ab。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/bd/65/9a/671fc6dcde07d4418df0c592f8df512b26d7a0029c2a23dd81。> > >   Building wheel for protobuf3-to-dict (setup.py) ... done。> > >   Created wheel for protobuf3-to-dict: filename=protobuf3_to_dict-0.1.5-py3-none-any.whl size=4009 sha256=44c8d4802991bc07dd03e38e7c0c7e2c59a13fafa99e15eff7149a5487de2a04。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/12/3e/42/e783cdd4e7b8fda9bfc472eeb465bc9041bda90a3dbece8d74。> > >   Building wheel for pygetwindow (setup.py) ... done。> > >   Created wheel for pygetwindow: filename=PyGetWindow-0.0.9-py3-none-any.whl size=11064 sha256=b2e3acb75df701da2b6d4201c4c6120f1301c71f99c57c85bd3f3df77020c7eb。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/02/f6/64/c5d427819f80553df2398bfecc351e94e00371c1dcb6edb24e。> > >   Building wheel for pyscreeze (pyproject.toml) ... done。> > >   Created wheel for pyscreeze: filename=PyScreeze-0.1.30-py3-none-any.whl size=14382 sha256=38069024556b881c3f9149ae731d80b8a2c3c24578a4beb3d1fa5a48263e25d1。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/c4/46/42/d3613adf9880c8b4a780c07a8cf85df12ca04a9a0ca77c6c02。> > >   Building wheel for pytweening (setup.py) ... done。> > >   Created wheel for pytweening: filename=pytweening-1.2.0-py3-none-any.whl size=8009 sha256=dea9f974f99ec42f32db21ff7cd22760e37d20b35698e017e309ffdc37a4420d。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/22/d7/02/b3e395d93b6dd41a7da54b2fa738ec03e7fb7451f7f22f8213。> > >   Building wheel for mouseinfo (setup.py) ... done。> > >   Created wheel for mouseinfo: filename=MouseInfo-0.1.3-py3-none-any.whl size=10890 sha256=36cf2f01096de31e5e5dec941ce73fb3d88622d34299b6ccc1d3832207b0107c。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/6e/d5/27/2f1be84b3e6ccee99c82f50e3fe7fe6360dd30417109b49a72。> > >   Building wheel for pymsgbox (pyproject.toml) ... done。> > >   Created wheel for pymsgbox: filename=PyMsgBox-1.0.9-py3-none-any.whl size=7406 sha256=bac1ad777dd1665fe7af88aa18cff33c4bf5520db71b980f975106bd93fdb765。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/b9/6a/ba/be2d7d78166ec8018c21d07241dffa54446c09652a267759ae。> > >   Building wheel for python3-Xlib (setup.py) ... done。> > >   Created wheel for python3-Xlib: filename=python3_xlib-0.15-py3-none-any.whl size=109501 sha256=03c24a81c9308bc4ee8aed546f3e440eb2818870e2d0b741c7afb4fb2d6b076a。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/9c/8e/c5/8a93a3415a4a2065f31750a3244db61482b9e508f04ee56e82。> > >   Building wheel for grpclib (pyproject.toml) ... done。> > >   Created wheel for grpclib: filename=grpclib-0.4.7-py3-none-any.whl size=76221 sha256=954f4fc7649c88a54a178eaa76fb3aba8da06f6d7b8215e315e20212b521dfc4。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/05/c0/1c/3d807409d0c67efeab2949832ba409205b1b6fe03f739ae4c1。> > >   Building wheel for pyperclip (setup.py) ... done。> > >   Created wheel for pyperclip: filename=pyperclip-1.8.2-py3-none-any.whl size=11125 sha256=3ad0b3e966dae0dc9e08e6c06abd9f222f9d00d5fabb75cbc0658d80c65c8c81。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/04/24/fe/140a94a7f1036003ede94579e6b4227fe96c840c6f4dcbe307。> > >   Building wheel for pyrect (setup.py) ... done。> > >   Created wheel for pyrect: filename=PyRect-0.2.0-py2.py3-none-any.whl size=11179 sha256=ad8ea8cf5faeb0e691033cfde20b9a9f16102054ceda369fe9e31d61b3f94224。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/d5/4c/bd/42e4e23641afcd185d4e932784da37e6e04505da0cf3f7b832。> > > Successfully built profanity wenxinworkshop blivedm langid websocket-client-py3 pyautogui jieba ffmpy protobuf3-to-dict pygetwindow pyscreeze pytweening mouseinfo pymsgbox python3-Xlib grpclib pyperclip pyrect。> > > Failed to build PyAudio。> > > ERROR: Could not build wheels for PyAudio, which is required to install pyproject.toml-based projects。> > > (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$。> > > ```。> > 。> > 。> > 删除pyaudio先。> 。> ```。> (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$ pip install pyaudio。> Collecting pyaudio。>   Using cached PyAudio-0.2.14.tar.gz (47 kB)。>   Installing build dependencies ... done。>   Getting requirements to build wheel ... done。>   Preparing metadata (pyproject.toml) ... done。> Building wheels for collected packages: pyaudio。>   Building wheel for pyaudio (pyproject.toml) ... error。>   error: subprocess-exited-with-error。> 。>   × Building wheel for pyaudio (pyproject.toml) did not run successfully.。>   │ exit code: 1。>   ╰─> [18 lines of output]。>       running bdist_wheel。>       running build。>       running build_py。>       creating build。>       creating build/lib.linux-x86_64-cpython-310。>       creating build/lib.linux-x86_64-cpython-310/pyaudio。>       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。>       running build_ext。>       building 'pyaudio._portaudio' extension。>       creating build/temp.linux-x86_64-cpython-310。>       creating build/temp.linux-x86_64-cpython-310/src。>       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。>       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。>       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。>           9 | #include "portaudio.h"。>             |          ^~~~~~~~~~~~~。>       compilation terminated.。>       error: command '/usr/bin/gcc' failed with exit code 1。>       [end of output]。> 。>   note: This error originates from a subprocess, and is likely not a problem with pip.。>   ERROR: Failed building wheel for pyaudio。> Failed to build pyaudio。> ERROR: Could not build wheels for pyaudio, which is required to install pyproject.toml-based projects。> ```。。`sudo apt-get install portaudio19-dev`。> > > ```。> > > Stored in directory: /home/ikaros/.cache/pip/wheels/79/9e/b6/ab96803f552f38c341a3f07f12ae49f7cbf9d406a4c70200fa。> > >   Building wheel for PyAudio (pyproject.toml) ... error。> > >   error: subprocess-exited-with-error。> > > 。> > >   × Building wheel for PyAudio (pyproject.toml) did not run successfully.。> > >   │ exit code: 1。> > >   ╰─> [18 lines of output]。> > >       running bdist_wheel。> > >       running build。> > >       running build_py。> > >       creating build。> > >       creating build/lib.linux-x86_64-cpython-310。> > >       creating build/lib.linux-x86_64-cpython-310/pyaudio。> > >       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。> > >       running build_ext。> > >       building 'pyaudio._portaudio' extension。> > >       creating build/temp.linux-x86_64-cpython-310。> > >       creating build/temp.linux-x86_64-cpython-310/src。> > >       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。> > >       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。> > >       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。> > >           9 | #include "portaudio.h"。> > >             |          ^~~~~~~~~~~~~。> > >       compilation terminated.。> > >       error: command '/usr/bin/gcc' failed with exit code 1。> > >       [end of output]。> > > 。> > >   note: This error originates from a subprocess, and is likely not a problem with pip.。> > >   ERROR: Failed building wheel for PyAudio。> > >   Building wheel for pyautogui (pyproject.toml) ... done。> > >   Created wheel for pyautogui: filename=PyAutoGUI-0.9.54-py3-none-any.whl size=37576 sha256=7ce43232eebcdce900d1c370886c23ee82c2ceada93cd0e814b90274e8ce12eb。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/23/a7/1c/5a51aaff3bbe110be4ddf766d429cc9d2fae7a72fc1b843e56。> > >   Building wheel for jieba (setup.py) ... done。> > >   Created wheel for jieba: filename=jieba-0.42.1-py3-none-any.whl size=19314458 sha256=e1f96b86030cc41c04cfb6b610368f6571670d6389d76e8dc435cac253a3fb15。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/c9/69/31/d56d90b22a1777b0b231e234b00302a55be255930f8bd92dcd。> > >   Building wheel for ffmpy (setup.py) ... done。> > >   Created wheel for ffmpy: filename=ffmpy-0.3.2-py3-none-any.whl size=5582 sha256=6ba42a5ca14e9f9b2a291299d137b21a6954c70ff575e11644bd2c37d98e78ab。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/bd/65/9a/671fc6dcde07d4418df0c592f8df512b26d7a0029c2a23dd81。> > >   Building wheel for protobuf3-to-dict (setup.py) ... done。> > >   Created wheel for protobuf3-to-dict: filename=protobuf3_to_dict-0.1.5-py3-none-any.whl size=4009 sha256=44c8d4802991bc07dd03e38e7c0c7e2c59a13fafa99e15eff7149a5487de2a04。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/12/3e/42/e783cdd4e7b8fda9bfc472eeb465bc9041bda90a3dbece8d74。> > >   Building wheel for pygetwindow (setup.py) ... done。> > >   Created wheel for pygetwindow: filename=PyGetWindow-0.0.9-py3-none-any.whl size=11064 sha256=b2e3acb75df701da2b6d4201c4c6120f1301c71f99c57c85bd3f3df77020c7eb。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/02/f6/64/c5d427819f80553df2398bfecc351e94e00371c1dcb6edb24e。> > >   Building wheel for pyscreeze (pyproject.toml) ... done。> > >   Created wheel for pyscreeze: filename=PyScreeze-0.1.30-py3-none-any.whl size=14382 sha256=38069024556b881c3f9149ae731d80b8a2c3c24578a4beb3d1fa5a48263e25d1。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/c4/46/42/d3613adf9880c8b4a780c07a8cf85df12ca04a9a0ca77c6c02。> > >   Building wheel for pytweening (setup.py) ... done。> > >   Created wheel for pytweening: filename=pytweening-1.2.0-py3-none-any.whl size=8009 sha256=dea9f974f99ec42f32db21ff7cd22760e37d20b35698e017e309ffdc37a4420d。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/22/d7/02/b3e395d93b6dd41a7da54b2fa738ec03e7fb7451f7f22f8213。> > >   Building wheel for mouseinfo (setup.py) ... done。> > >   Created wheel for mouseinfo: filename=MouseInfo-0.1.3-py3-none-any.whl size=10890 sha256=36cf2f01096de31e5e5dec941ce73fb3d88622d34299b6ccc1d3832207b0107c。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/6e/d5/27/2f1be84b3e6ccee99c82f50e3fe7fe6360dd30417109b49a72。> > >   Building wheel for pymsgbox (pyproject.toml) ... done。> > >   Created wheel for pymsgbox: filename=PyMsgBox-1.0.9-py3-none-any.whl size=7406 sha256=bac1ad777dd1665fe7af88aa18cff33c4bf5520db71b980f975106bd93fdb765。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/b9/6a/ba/be2d7d78166ec8018c21d07241dffa54446c09652a267759ae。> > >   Building wheel for python3-Xlib (setup.py) ... done。> > >   Created wheel for python3-Xlib: filename=python3_xlib-0.15-py3-none-any.whl size=109501 sha256=03c24a81c9308bc4ee8aed546f3e440eb2818870e2d0b741c7afb4fb2d6b076a。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/9c/8e/c5/8a93a3415a4a2065f31750a3244db61482b9e508f04ee56e82。> > >   Building wheel for grpclib (pyproject.toml) ... done。> > >   Created wheel for grpclib: filename=grpclib-0.4.7-py3-none-any.whl size=76221 sha256=954f4fc7649c88a54a178eaa76fb3aba8da06f6d7b8215e315e20212b521dfc4。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/05/c0/1c/3d807409d0c67efeab2949832ba409205b1b6fe03f739ae4c1。> > >   Building wheel for pyperclip (setup.py) ... done。> > >   Created wheel for pyperclip: filename=pyperclip-1.8.2-py3-none-any.whl size=11125 sha256=3ad0b3e966dae0dc9e08e6c06abd9f222f9d00d5fabb75cbc0658d80c65c8c81。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/04/24/fe/140a94a7f1036003ede94579e6b4227fe96c840c6f4dcbe307。> > >   Building wheel for pyrect (setup.py) ... done。> > >   Created wheel for pyrect: filename=PyRect-0.2.0-py2.py3-none-any.whl size=11179 sha256=ad8ea8cf5faeb0e691033cfde20b9a9f16102054ceda369fe9e31d61b3f94224。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/d5/4c/bd/42e4e23641afcd185d4e932784da37e6e04505da0cf3f7b832。> > > Successfully built profanity wenxinworkshop blivedm langid websocket-client-py3 pyautogui jieba ffmpy protobuf3-to-dict pygetwindow pyscreeze pytweening mouseinfo pymsgbox python3-Xlib grpclib pyperclip pyrect。> > > Failed to build PyAudio。> > > ERROR: Could not build wheels for PyAudio, which is required to install pyproject.toml-based projects。> > > (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$。> > > ```。> > 。> > 。> > 删除pyaudio先。> 。> ```。> (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$ pip install pyaudio。> Collecting pyaudio。>   Using cached PyAudio-0.2.14.tar.gz (47 kB)。>   Installing build dependencies ... done。>   Getting requirements to build wheel ... done。>   Preparing metadata (pyproject.toml) ... done。> Building wheels for collected packages: pyaudio。>   Building wheel for pyaudio (pyproject.toml) ... error。>   error: subprocess-exited-with-error。> 。>   × Building wheel for pyaudio (pyproject.toml) did not run successfully.。>   │ exit code: 1。>   ╰─> [18 lines of output]。>       running bdist_wheel。>       running build。>       running build_py。>       creating build。>       creating build/lib.linux-x86_64-cpython-310。>       creating build/lib.linux-x86_64-cpython-310/pyaudio。>       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。>       running build_ext。>       building 'pyaudio._portaudio' extension。>       creating build/temp.linux-x86_64-cpython-310。>       creating build/temp.linux-x86_64-cpython-310/src。>       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。>       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。>       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。>           9 | #include "portaudio.h"。>             |          ^~~~~~~~~~~~~。>       compilation terminated.。>       error: command '/usr/bin/gcc' failed with exit code 1。>       [end of output]。> 。>   note: This error originates from a subprocess, and is likely not a problem with pip.。>   ERROR: Failed building wheel for pyaudio。> Failed to build pyaudio。> ERROR: Could not build wheels for pyaudio, which is required to install pyproject.toml-based projects。> ```。。`sudo apt-get install portaudio19-dev`。。> > > ```。> > > Stored in directory: /home/ikaros/.cache/pip/wheels/79/9e/b6/ab96803f552f38c341a3f07f12ae49f7cbf9d406a4c70200fa。> > >   Building wheel for PyAudio (pyproject.toml) ... error。> > >   error: subprocess-exited-with-error。> > > 。> > >   × Building wheel for PyAudio (pyproject.toml) did not run successfully.。> > >   │ exit code: 1。> > >   ╰─> [18 lines of output]。> > >       running bdist_wheel。> > >       running build。> > >       running build_py。> > >       creating build。> > >       creating build/lib.linux-x86_64-cpython-310。> > >       creating build/lib.linux-x86_64-cpython-310/pyaudio。> > >       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。> > >       running build_ext。> > >       building 'pyaudio._portaudio' extension。> > >       creating build/temp.linux-x86_64-cpython-310。> > >       creating build/temp.linux-x86_64-cpython-310/src。> > >       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。> > >       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。> > >       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。> > >           9 | #include "portaudio.h"。> > >             |          ^~~~~~~~~~~~~。> > >       compilation terminated.。> > >       error: command '/usr/bin/gcc' failed with exit code 1。> > >       [end of output]。> > > 。> > >   note: This error originates from a subprocess, and is likely not a problem with pip.。> > >   ERROR: Failed building wheel for PyAudio。> > >   Building wheel for pyautogui (pyproject.toml) ... done。> > >   Created wheel for pyautogui: filename=PyAutoGUI-0.9.54-py3-none-any.whl size=37576 sha256=7ce43232eebcdce900d1c370886c23ee82c2ceada93cd0e814b90274e8ce12eb。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/23/a7/1c/5a51aaff3bbe110be4ddf766d429cc9d2fae7a72fc1b843e56。> > >   Building wheel for jieba (setup.py) ... done。> > >   Created wheel for jieba: filename=jieba-0.42.1-py3-none-any.whl size=19314458 sha256=e1f96b86030cc41c04cfb6b610368f6571670d6389d76e8dc435cac253a3fb15。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/c9/69/31/d56d90b22a1777b0b231e234b00302a55be255930f8bd92dcd。> > >   Building wheel for ffmpy (setup.py) ... done。> > >   Created wheel for ffmpy: filename=ffmpy-0.3.2-py3-none-any.whl size=5582 sha256=6ba42a5ca14e9f9b2a291299d137b21a6954c70ff575e11644bd2c37d98e78ab。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/bd/65/9a/671fc6dcde07d4418df0c592f8df512b26d7a0029c2a23dd81。> > >   Building wheel for protobuf3-to-dict (setup.py) ... done。> > >   Created wheel for protobuf3-to-dict: filename=protobuf3_to_dict-0.1.5-py3-none-any.whl size=4009 sha256=44c8d4802991bc07dd03e38e7c0c7e2c59a13fafa99e15eff7149a5487de2a04。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/12/3e/42/e783cdd4e7b8fda9bfc472eeb465bc9041bda90a3dbece8d74。> > >   Building wheel for pygetwindow (setup.py) ... done。> > >   Created wheel for pygetwindow: filename=PyGetWindow-0.0.9-py3-none-any.whl size=11064 sha256=b2e3acb75df701da2b6d4201c4c6120f1301c71f99c57c85bd3f3df77020c7eb。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/02/f6/64/c5d427819f80553df2398bfecc351e94e00371c1dcb6edb24e。> > >   Building wheel for pyscreeze (pyproject.toml) ... done。> > >   Created wheel for pyscreeze: filename=PyScreeze-0.1.30-py3-none-any.whl size=14382 sha256=38069024556b881c3f9149ae731d80b8a2c3c24578a4beb3d1fa5a48263e25d1。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/c4/46/42/d3613adf9880c8b4a780c07a8cf85df12ca04a9a0ca77c6c02。> > >   Building wheel for pytweening (setup.py) ... done。> > >   Created wheel for pytweening: filename=pytweening-1.2.0-py3-none-any.whl size=8009 sha256=dea9f974f99ec42f32db21ff7cd22760e37d20b35698e017e309ffdc37a4420d。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/22/d7/02/b3e395d93b6dd41a7da54b2fa738ec03e7fb7451f7f22f8213。> > >   Building wheel for mouseinfo (setup.py) ... done。> > >   Created wheel for mouseinfo: filename=MouseInfo-0.1.3-py3-none-any.whl size=10890 sha256=36cf2f01096de31e5e5dec941ce73fb3d88622d34299b6ccc1d3832207b0107c。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/6e/d5/27/2f1be84b3e6ccee99c82f50e3fe7fe6360dd30417109b49a72。> > >   Building wheel for pymsgbox (pyproject.toml) ... done。> > >   Created wheel for pymsgbox: filename=PyMsgBox-1.0.9-py3-none-any.whl size=7406 sha256=bac1ad777dd1665fe7af88aa18cff33c4bf5520db71b980f975106bd93fdb765。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/b9/6a/ba/be2d7d78166ec8018c21d07241dffa54446c09652a267759ae。> > >   Building wheel for python3-Xlib (setup.py) ... done。> > >   Created wheel for python3-Xlib: filename=python3_xlib-0.15-py3-none-any.whl size=109501 sha256=03c24a81c9308bc4ee8aed546f3e440eb2818870e2d0b741c7afb4fb2d6b076a。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/9c/8e/c5/8a93a3415a4a2065f31750a3244db61482b9e508f04ee56e82。> > >   Building wheel for grpclib (pyproject.toml) ... done。> > >   Created wheel for grpclib: filename=grpclib-0.4.7-py3-none-any.whl size=76221 sha256=954f4fc7649c88a54a178eaa76fb3aba8da06f6d7b8215e315e20212b521dfc4。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/05/c0/1c/3d807409d0c67efeab2949832ba409205b1b6fe03f739ae4c1。> > >   Building wheel for pyperclip (setup.py) ... done。> > >   Created wheel for pyperclip: filename=pyperclip-1.8.2-py3-none-any.whl size=11125 sha256=3ad0b3e966dae0dc9e08e6c06abd9f222f9d00d5fabb75cbc0658d80c65c8c81。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/04/24/fe/140a94a7f1036003ede94579e6b4227fe96c840c6f4dcbe307。> > >   Building wheel for pyrect (setup.py) ... done。> > >   Created wheel for pyrect: filename=PyRect-0.2.0-py2.py3-none-any.whl size=11179 sha256=ad8ea8cf5faeb0e691033cfde20b9a9f16102054ceda369fe9e31d61b3f94224。> > >   Stored in directory: /home/ikaros/.cache/pip/wheels/d5/4c/bd/42e4e23641afcd185d4e932784da37e6e04505da0cf3f7b832。> > > Successfully built profanity wenxinworkshop blivedm langid websocket-client-py3 pyautogui jieba ffmpy protobuf3-to-dict pygetwindow pyscreeze pytweening mouseinfo pymsgbox python3-Xlib grpclib pyperclip pyrect。> > > Failed to build PyAudio。> > > ERROR: Could not build wheels for PyAudio, which is required to install pyproject.toml-based projects。> > > (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$。> > > ```。> > 。> > 。> > 删除pyaudio先。> 。> ```。> (aivtb) ikaros@Ikaros-PC:/mnt/f/wsl_pro/AI-Vtuber$ pip install pyaudio。> Collecting pyaudio。>   Using cached PyAudio-0.2.14.tar.gz (47 kB)。>   Installing build dependencies ... done。>   Getting requirements to build wheel ... done。>   Preparing metadata (pyproject.toml) ... done。> Building wheels for collected packages: pyaudio。>   Building wheel for pyaudio (pyproject.toml) ... error。>   error: subprocess-exited-with-error。> 。>   × Building wheel for pyaudio (pyproject.toml) did not run successfully.。>   │ exit code: 1。>   ╰─> [18 lines of output]。>       running bdist_wheel。>       running build。>       running build_py。>       creating build。>       creating build/lib.linux-x86_64-cpython-310。>       creating build/lib.linux-x86_64-cpython-310/pyaudio。>       copying src/pyaudio/__init__.py -> build/lib.linux-x86_64-cpython-310/pyaudio。>       running build_ext。>       building 'pyaudio._portaudio' extension。>       creating build/temp.linux-x86_64-cpython-310。>       creating build/temp.linux-x86_64-cpython-310/src。>       creating build/temp.linux-x86_64-cpython-310/src/pyaudio。>       gcc -pthread -B /home/ikaros/miniconda3/envs/aivtb/compiler_compat -Wno-unused-result -Wsign-compare -DNDEBUG -fwrapv -O2 -Wall -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -O2 -isystem /home/ikaros/miniconda3/envs/aivtb/include -fPIC -I/usr/local/include -I/usr/include -I/home/ikaros/miniconda3/envs/aivtb/include/python3.10 -c src/pyaudio/device_api.c -o build/temp.linux-x86_64-cpython-310/src/pyaudio/device_api.o。>       src/pyaudio/device_api.c:9:10: fatal error: portaudio.h: No such file or directory。>           9 | #include "portaudio.h"。>             |          ^~~~~~~~~~~~~。>       compilation terminated.。>       error: command '/usr/bin/gcc' failed with exit code 1。>       [end of output]。> 。>   note: This error originates from a subprocess, and is likely not a problem with pip.。>   ERROR: Failed building wheel for pyaudio。> Failed to build pyaudio。> ERROR: Could not build wheels for pyaudio, which is required to install pyproject.toml-based projects。> ```。。`sudo apt-get install portaudio19-dev`。```。Traceback (most recent call last):。  File "/mnt/f/wsl_pro/AI-Vtuber/webui.py", line 3735, in <module>。    goto_func_page()。  File "/mnt/f/wsl_pro/AI-Vtuber/webui.py", line 3206, in goto_func_page。    select_talk_device_index = ui.select(。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/select.py", line 57, in __init__。    super().__init__(options=options, value=value, on_change=on_change, validation=validation)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/validation_element.py", line 9, in __init__。    super().__init__(**kwargs)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/choice_element.py", line 18, in __init__。    super().__init__(tag=tag, value=value, on_value_change=on_change)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/value_element.py", line 33, in __init__。    self.on(f'update:{self.VALUE_PROP}', handle_change, [None], throttle=throttle)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/element.py", line 420, in on。    self.update()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/choice_element.py", line 34, in update。    self._update_options()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/choice_element.py", line 30, in _update_options。    self.value = before_value if before_value in self._values else None。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/binding.py", line 155, in __set__。    self._change_handler(owner, value)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/value_element.py", line 14, in <lambda>。    on_change=lambda sender, value: cast(Self, sender)._handle_value_change(value))  # pylint: disable=protected-access。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/validation_element.py", line 50, in _handle_value_change。    self.validate()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/validation_element.py", line 36, in validate。    if callable(self.validation):。AttributeError: 'Select' object has no attribute 'validation'. Did you mean: 'validate'?。```。```。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM sysdefault。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM sysdefault。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround21。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround40。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround41。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround50。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround51。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.surround71。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.iec958。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.hdmi。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.modem。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.phoneline。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM default。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_inum returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM default。ALSA lib confmisc.c:855:(parse_card) cannot find card '0'。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_card_id returned error: No such file or directory。ALSA lib confmisc.c:422:(snd_func_concat) error evaluating strings。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_concat returned error: No such file or directory。ALSA lib confmisc.c:1334:(snd_func_refer) error evaluating name。ALSA lib conf.c:5178:(_snd_config_evaluate) function snd_func_refer returned error: No such file or directory。ALSA lib conf.c:5701:(snd_config_expand) Evaluate error: No such file or directory。ALSA lib pcm.c:2664:(snd_pcm_open_noupdate) Unknown PCM dmix。```。> ```。> Traceback (most recent call last):。>   File "/mnt/f/wsl_pro/AI-Vtuber/webui.py", line 3735, in <module>。>     goto_func_page()。>   File "/mnt/f/wsl_pro/AI-Vtuber/webui.py", line 3206, in goto_func_page。>     select_talk_device_index = ui.select(。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/select.py", line 57, in __init__。>     super().__init__(options=options, value=value, on_change=on_change, validation=validation)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/validation_element.py", line 9, in __init__。>     super().__init__(**kwargs)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/choice_element.py", line 18, in __init__。>     super().__init__(tag=tag, value=value, on_value_change=on_change)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/value_element.py", line 33, in __init__。>     self.on(f'update:{self.VALUE_PROP}', handle_change, [None], throttle=throttle)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/element.py", line 420, in on。>     self.update()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/choice_element.py", line 34, in update。>     self._update_options()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/choice_element.py", line 30, in _update_options。>     self.value = before_value if before_value in self._values else None。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/binding.py", line 155, in __set__。>     self._change_handler(owner, value)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/value_element.py", line 14, in <lambda>。>     on_change=lambda sender, value: cast(Self, sender)._handle_value_change(value))  # pylint: disable=protected-access。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/validation_element.py", line 50, in _handle_value_change。>     self.validate()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/elements/mixins/validation_element.py", line 36, in validate。>     if callable(self.validation):。> AttributeError: 'Select' object has no attribute 'validation'. Did you mean: 'validate'?。> ```。`pip install nicegui==1.4.5`。。```。Traceback (most recent call last):。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/xauth.py", line 43, in __init__。    raw = open(filename, 'rb').read()。FileNotFoundError: [Errno 2] No such file or directory: '/home/ikaros/.Xauthority'。。During handling of the above exception, another exception occurred:。。Traceback (most recent call last):。  File "/mnt/f/wsl_pro/AI-Vtuber/main.py", line 31, in <module>。    from utils.my_handle import My_handle。  File "/mnt/f/wsl_pro/AI-Vtuber/utils/my_handle.py", line 7, in <module>。    import pyautogui。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pyautogui/__init__.py", line 246, in <module>。    import mouseinfo。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/mouseinfo/__init__.py", line 223, in <module>。    _display = Display(os.environ['DISPLAY'])。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/display.py", line 80, in __init__。    self.display = _BaseDisplay(display)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/display.py", line 62, in __init__。    display.Display.__init__(*(self, ) + args, **keys)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/protocol/display.py", line 60, in __init__。    auth_name, auth_data = connect.get_auth(self.socket,。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/support/connect.py", line 91, in get_auth。    return mod.get_auth(sock, dname, host, dno)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/support/unix_connect.py", line 103, in new_get_auth。    au = xauth.Xauthority()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/xauth.py", line 45, in __init__。    raise error.XauthError('~/.Xauthority: %s' % err)。Xlib.error.XauthError: ~/.Xauthority: [Errno 2] No such file or directory: '/home/ikaros/.Xauthority'。```。> ```。> Traceback (most recent call last):。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/xauth.py", line 43, in __init__。>     raw = open(filename, 'rb').read()。> FileNotFoundError: [Errno 2] No such file or directory: '/home/ikaros/.Xauthority'。> 。> During handling of the above exception, another exception occurred:。> 。> Traceback (most recent call last):。>   File "/mnt/f/wsl_pro/AI-Vtuber/main.py", line 31, in <module>。>     from utils.my_handle import My_handle。>   File "/mnt/f/wsl_pro/AI-Vtuber/utils/my_handle.py", line 7, in <module>。>     import pyautogui。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pyautogui/__init__.py", line 246, in <module>。>     import mouseinfo。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/mouseinfo/__init__.py", line 223, in <module>。>     _display = Display(os.environ['DISPLAY'])。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/display.py", line 80, in __init__。>     self.display = _BaseDisplay(display)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/display.py", line 62, in __init__。>     display.Display.__init__(*(self, ) + args, **keys)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/protocol/display.py", line 60, in __init__。>     auth_name, auth_data = connect.get_auth(self.socket,。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/support/connect.py", line 91, in get_auth。>     return mod.get_auth(sock, dname, host, dno)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/support/unix_connect.py", line 103, in new_get_auth。>     au = xauth.Xauthority()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/xauth.py", line 45, in __init__。>     raise error.XauthError('~/.Xauthority: %s' % err)。> Xlib.error.XauthError: ~/.Xauthority: [Errno 2] No such file or directory: '/home/ikaros/.Xauthority'。> ```。。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/b8fd5981-c084-4713-8896-3f0372698241)。。> > ```。> > Traceback (most recent call last):。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/xauth.py", line 43, in __init__。> >     raw = open(filename, 'rb').read()。> > FileNotFoundError: [Errno 2] No such file or directory: '/home/ikaros/.Xauthority'。> > 。> > During handling of the above exception, another exception occurred:。> > 。> > Traceback (most recent call last):。> >   File "/mnt/f/wsl_pro/AI-Vtuber/main.py", line 31, in <module>。> >     from utils.my_handle import My_handle。> >   File "/mnt/f/wsl_pro/AI-Vtuber/utils/my_handle.py", line 7, in <module>。> >     import pyautogui。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pyautogui/__init__.py", line 246, in <module>。> >     import mouseinfo。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/mouseinfo/__init__.py", line 223, in <module>。> >     _display = Display(os.environ['DISPLAY'])。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/display.py", line 80, in __init__。> >     self.display = _BaseDisplay(display)。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/display.py", line 62, in __init__。> >     display.Display.__init__(*(self, ) + args, **keys)。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/protocol/display.py", line 60, in __init__。> >     auth_name, auth_data = connect.get_auth(self.socket,。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/support/connect.py", line 91, in get_auth。> >     return mod.get_auth(sock, dname, host, dno)。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/support/unix_connect.py", line 103, in new_get_auth。> >     au = xauth.Xauthority()。> >   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/Xlib/xauth.py", line 45, in __init__。> >     raise error.XauthError('~/.Xauthority: %s' % err)。> > Xlib.error.XauthError: ~/.Xauthority: [Errno 2] No such file or directory: '/home/ikaros/.Xauthority'。> > ```。> 。> ![image](https://private-user-images.githubusercontent.com/40910637/307538614-b8fd5981-c084-4713-8896-3f0372698241.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDg3OTUyNDYsIm5iZiI6MTcwODc5NDk0NiwicGF0aCI6Ii80MDkxMDYzNy8zMDc1Mzg2MTQtYjhmZDU5ODEtYzA4NC00NzEzLTg4OTYtM2YwMzcyNjk4MjQxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAyMjQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMjI0VDE3MTU0NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWQwZDRiZWVjNTYzY2MyYmY1MzQ1ZjY4MDlmMzZmMzM4OWY1YjYyNDUxZTc5YzBlZDk2MjIwYTA3Mzc2NWVkYTMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.rEZl-KbwuNsJMmdb036ESkf45WXbKrLh9v8atNUuxXc)。。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/0871424b-e12f-47ac-a796-baca39f43e25)。。```。Traceback (most recent call last):。2024-02-25 01:18:20 - /mnt/f/wsl_pro/AI-Vtuber/main.py[line:782] - INFO: 当前平台：bilibili2。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 1016, in _bootstrap_inner。    self.run()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 953, in run。    self._target(*self._args, **self._kwargs)。  File "/mnt/f/wsl_pro/AI-Vtuber/main.py", line 476, in key_listener。    keyboard.on_press(on_key_press)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 474, in on_press。    return hook(lambda e: e.event_type == KEY_UP or callback(e), suppress=suppress)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 461, in hook。    append(callback)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 67, in add_handler。    self.start_if_necessary()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 35, in start_if_necessary。    self.init()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 196, in init。 * Serving Flask app 'main'。    _os_keyboard.init()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 113, in init。 * Debug mode: off。    build_device()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 109, in build_device。    ensure_root()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixcommon.py", line 174, in ensure_root。    raise ImportError('You must be root to use this library on linux.')。ImportError: You must be root to use this library on linux.。```。```。During handling of the above exception, another exception occurred:。。Traceback (most recent call last):。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi。    result = await app(  # type: ignore[func-returns-value]。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__。    return await self.app(scope, receive, send)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__。    await super().__call__(scope, receive, send)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__。    await self.middleware_stack(scope, receive, send)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/middleware/errors.py", line 176, in __call__。    response = await self.handler(request, exc)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/nicegui.py", line 131, in _exception_handler_500。    return client.build_response(request, 500)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/client.py", line 102, in build_response。    return templates.TemplateResponse('index.html', {。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/templating.py", line 230, in TemplateResponse。    return _TemplateResponse(。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/templating.py", line 41, in __init__。    super().__init__(content, status_code, headers, media_type, background)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/responses.py", line 42, in __init__。    self.init_headers(headers)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/responses.py", line 59, in init_headers。    for k, v in headers.items()。AttributeError: 'int' object has no attribute 'items'。```。> ```。> Traceback (most recent call last):。> 2024-02-25 01:18:20 - /mnt/f/wsl_pro/AI-Vtuber/main.py[line:782] - INFO: 当前平台：bilibili2。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 1016, in _bootstrap_inner。>     self.run()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 953, in run。>     self._target(*self._args, **self._kwargs)。>   File "/mnt/f/wsl_pro/AI-Vtuber/main.py", line 476, in key_listener。>     keyboard.on_press(on_key_press)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 474, in on_press。>     return hook(lambda e: e.event_type == KEY_UP or callback(e), suppress=suppress)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 461, in hook。>     append(callback)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 67, in add_handler。>     self.start_if_necessary()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 35, in start_if_necessary。>     self.init()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 196, in init。>  * Serving Flask app 'main'。>     _os_keyboard.init()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 113, in init。>  * Debug mode: off。>     build_device()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 109, in build_device。>     ensure_root()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixcommon.py", line 174, in ensure_root。>     raise ImportError('You must be root to use this library on linux.')。> ImportError: You must be root to use this library on linux.。> ```。。以root用户启动。> ```。> During handling of the above exception, another exception occurred:。> 。> Traceback (most recent call last):。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi。>     result = await app(  # type: ignore[func-returns-value]。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__。>     return await self.app(scope, receive, send)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__。>     await super().__call__(scope, receive, send)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/applications.py", line 123, in __call__。>     await self.middleware_stack(scope, receive, send)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/middleware/errors.py", line 176, in __call__。>     response = await self.handler(request, exc)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/nicegui.py", line 131, in _exception_handler_500。>     return client.build_response(request, 500)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/nicegui/client.py", line 102, in build_response。>     return templates.TemplateResponse('index.html', {。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/templating.py", line 230, in TemplateResponse。>     return _TemplateResponse(。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/templating.py", line 41, in __init__。>     super().__init__(content, status_code, headers, media_type, background)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/responses.py", line 42, in __init__。>     self.init_headers(headers)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/starlette/responses.py", line 59, in init_headers。>     for k, v in headers.items()。> AttributeError: 'int' object has no attribute 'items'。> ```。。pip install starlette==0.27.0。```。/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work。  warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)。```。> ```。> /home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/pydub/utils.py:170: RuntimeWarning: Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work。>   warn("Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work", RuntimeWarning)。> ```。。sudo apt install ffmpeg。```。/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py:110: UserWarning: Failed to create a device file using `uinput` module. Sending of events may be limited or unavailable depending on plugged-in devices.。  device = aggregate_devices('kbd')。2024-03-03 13:43:03 - /mnt/f/wsl_pro/AI-Vtuber/main.py[line:782] - INFO: 当前平台：bilibili2。Exception in thread Thread-5 (key_listener):。Traceback (most recent call last):。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 1016, in _bootstrap_inner。    self.run()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 953, in run。    self._target(*self._args, **self._kwargs)。  File "/mnt/f/wsl_pro/AI-Vtuber/main.py", line 476, in key_listener。    keyboard.on_press(on_key_press)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 474, in on_press。    return hook(lambda e: e.event_type == KEY_UP or callback(e), suppress=suppress)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 461, in hook。    append(callback)。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 67, in add_handler。    self.start_if_necessary()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 35, in start_if_necessary。    self.init()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 196, in init。    _os_keyboard.init()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 113, in init。    build_device()。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 110, in build_device。    device = aggregate_devices('kbd')。  File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixcommon.py", line 168, in aggregate_devices。    assert fake_device。AssertionError。```。> ```。> /home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py:110: UserWarning: Failed to create a device file using `uinput` module. Sending of events may be limited or unavailable depending on plugged-in devices.。>   device = aggregate_devices('kbd')。> 2024-03-03 13:43:03 - /mnt/f/wsl_pro/AI-Vtuber/main.py[line:782] - INFO: 当前平台：bilibili2。> Exception in thread Thread-5 (key_listener):。> Traceback (most recent call last):。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 1016, in _bootstrap_inner。>     self.run()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/threading.py", line 953, in run。>     self._target(*self._args, **self._kwargs)。>   File "/mnt/f/wsl_pro/AI-Vtuber/main.py", line 476, in key_listener。>     keyboard.on_press(on_key_press)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 474, in on_press。>     return hook(lambda e: e.event_type == KEY_UP or callback(e), suppress=suppress)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 461, in hook。>     append(callback)。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 67, in add_handler。>     self.start_if_necessary()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_generic.py", line 35, in start_if_necessary。>     self.init()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/__init__.py", line 196, in init。>     _os_keyboard.init()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 113, in init。>     build_device()。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixkeyboard.py", line 110, in build_device。>     device = aggregate_devices('kbd')。>   File "/home/ikaros/miniconda3/envs/aivtb/lib/python3.10/site-packages/keyboard/_nixcommon.py", line 168, in aggregate_devices。>     assert fake_device。> AssertionError。> ```。。wsl问题，具体自行查阅。
[issue#656] 🙋 闲时任务处理逻辑。> ### 你使用了哪个版本？。> 20240125。> 。> ### 您使用的python版本&系统环境？。> python：3.10.11 系统：win10 整合包 音频播放：pygame。> 。> ### 描述。> 闲时任务是播放音频，如果音频很长，一旦开始播放就无法自动中断。此时有人发弹幕，弹幕无法被立即处理，必须等到闲时任务音频播放完。。> 。> 我认为闲时任务的优先级应该最低，当有人发弹幕时应该立即中断闲时任务（中断音频播放），优先处理其他的任务。。> 。> 参考解决方案：设置一个全局变量保存当前播放的音频路径，在播放音频时进行赋值，在处理弹幕任务时判断当前播放的音频路径是否为闲时任务设置的音频路径，如果是则停止音频播放。。。可以在audio.py进行开发，期待pr。配合 https://github.com/Ikaros-521/audio_player 自定义数据播放优先级。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/6745777c-3750-4823-9f66-667981d0f989)。。[【大改】新增待合成音频消息队列结构大改，queue改list，支持消息优先级插队，待稳定性测试；闲时任务新增刷新计时类型；gpt-sovits新增gradio0322版本接口对接，但是！gradio版本需要更新，会库冲突！ #753](https://github.com/Ikaros-521/AI-Vtuber/pull/753)。https://github.com/Ikaros-521/AI-Vtuber/pull/753。
[issue#657] 更新ChatGPT模型。
[issue#658] 对接Azure TTS。
[issue#659] 简单的一些小改动/完善，无关紧要。
[issue#660] 对接koboldcpp。
[issue#661] 🚀 Azure OpenAI 支持| [Feature]Some feature...。暂未开通权限，等待协助者提供密钥等。
[issue#662] 补充动态文案和闲时任务默认数据；更新投资人信息。
[issue#663] 删除PyQT相关源码。
[issue#664] 智谱AI新增 应用 功能的对接；动态文案 前端新增文案组添加删除功能，新增LLM类型，可以指定动态文案选用的LLM。
[issue#665] 测试例程更新。
[issue#666] 弹幕模板新增{cur_time}参数，用于动态传入当前时间点，做特别应用。
[issue#667] 对接EasyAIVtuber。
[issue#668] 更新文档。
[issue#669] 🚀 按键映射扩展功能请求（礼物触发播放指定音频）。功能可行，有空的时候再推进。礼物触发指定文本的已经实现了。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/91ada28f-1098-4a16-be69-5b0be4c5f8a7)。。
[issue#670] 动态文案 生成的文案内容 默认进行 违禁词、链接、纯标点的过滤。
[issue#671] 🐛 Edge-TTS无法使用，ERROR: cannot schedule new futures after interpreter shutdown。https://github.com/Ikaros-521/AI-Vtuber/pull/672。
[issue#672] main程序在聊天模式下 主线程运行完没有等待子线程运行导致的edge-tts运行问题修复。
[issue#673] 优化文档。
[issue#674] 更新最新的依赖参考。
[issue#675] 🙋 Tiktok监听失败，报错：TikTokLive.types.errors.FailedFetchRoomInfo: Failed to fetch room id from Webcast, see stacktrace for more info.。开启魔法，启动TUN模式，如果开了还是这个报错，请更换节点。推荐v2 vless协议。
[issue#676] 新增 通义千问官方API的调用；恢复 web类型下 通义千问 白嫖调用。
[issue#677] 补充文档；修复源码部分内容被篡改问题。
[issue#678] 补充通义千问遗漏的模型配置项。
[issue#679] 通义千问 补充大模型常用配置项 和 联网搜索功能。
[issue#680] ＂＂修改通义千问api默认配置。
[issue#681] 优化数据分析 页面运转 数据库不存在的异常提示。
[issue#682] 修改qwen-alice为qwen，适配qwen官方库openai_api接口。
[issue#683] 修复 文本转语音页面 通用的测试音频合成 gpt-sovits无法合成测试音频的bug。
[issue#684] 更新投资人；删除重复依赖。
[issue#685] 修复本地问答下 用户名变成助播的bug。
[issue#686] 🙋 glm3接入时出错：UnicodeEncodeError:'ascii' code can't encode characters in position 7-11: ordinal not in range(128)。密钥配置成 英文数字。
[issue#687] [解决方案]关于运行ChatGLM3整合包时遇到的报错。> 整合包地址（源自luna ai） python版本&系统环境 python：3.12 系统：win11 在运行webui.bat时出现报错 报错内容： File "G:\chatglm3\chatglm3\web_demo.py", line 89, in user_input = gr.Textbox(show_label=False, placeholder="Input...", lines=10).style( AttributeError: 'Textbox' object has no attribute 'style'. 解决方法： 将第89行改成：user_input = gr.Textbox(show_label=False, placeholder="Input...", lines=10) 改掉之后项目运行正常，目测无问题。。。glm3的报错为什么在这提issue。。。  。虽然是个好事，但 这。。。  。![}0~@AXLP NBLL0BHV(_FD2](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/a3c206b4-a426-41c6-a0dc-86cda81b778c)。让我很没有面子。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/9316f278-288d-44bd-af64-032b3f757a72)。。
[issue#688] 新增 虚拟身体 数字人视频播放器。
[issue#689] 🐛 文案页 文案组共2组的情况下，被打断无法恢复到打断的组。
[issue#690] 讯飞星火 支持v3.5。
[issue#691] 支持讯飞星火助手API。
[issue#692] 🙋 如何对接fastgpt。在线：https://doc.fastgpt.in/。![)H_J(@6F098VPSWZ5{B2NM8](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/378db8a3-ee98-4c03-ae66-e8c2759f1969)。![MX YVW9$}E_F_Z1XX%95T2E](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/4c055109-5fee-478e-9bdb-89c3182b8b09)。
[issue#693] 更新文档和思维导图。
[issue#694] username大一统 将会迎来巨大的危机，请各位更新的幸运儿留意。
[issue#695] claude配置页 合并2个板块。
[issue#696] 对接 fish-speech。
[issue#697] 🐛 一些问题。。。 | [Bug] ConnectionRefusedError: [Errno 10061] Connect call failed ('127.0.0.1', 8800)lem...。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/a8daac3d-7f06-455c-926a-a09ad4bd721f)。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/a399fb1f-eeb9-45a3-abfb-1070e623a331)。。
[issue#698] TTS中的vits、bert-vits2、gpt-sovits的float类型的相关参数支持范围语法。
[issue#699] chatgpt配置项 大标题补充说明兼容的项目和模型。
[issue#700] gpt-sovits新增模型配置项，支持动态加载模型。
[issue#701] 新增 图像识别 板块，使用多模态模型（Gemini）的能力实现，暂时仅支持n秒后截图识别内容，未来会继续拓展。
[issue#702] 图像识别 新增循环定时截图触发功能，方便实现游戏解说、画面讲解等功能，自主触发，丰富直播内容。
[issue#703] 新增 自定义命令板块，实现API调用解析获取数据，能动性很高，所以也会有点安全风险；数字人视频播放器新增Sadtalker、GeneFace++。
[issue#704] 按键映射 新增 组增减功能，新增单句触发单次按钮，针对表情控制时不希望一句话有多个关键词，表情乱变的情况发生。
[issue#705] webui chatgpt的llm模型下拉框支持搜索、自定义添加模型名（配合ollama这种，方便自定义模型名）。
[issue#706] 🙋 如何对接 Ollama。
[issue#707] 录音按键支持删除和输入，方便找到对应按键。
[issue#708] 修复gpt-SoVITS模型路径无法保存的bug。
[issue#709] 聊天页 新增聊天记录，默认显示最新100条的聊天记录，在前端直接可以看到交互数据，舒服。
[issue#710] 更新思维导图。
[issue#711] 补充webui聊天记录回调内容，优化代码实现；复读处理新增type传参，动态文案数据附带type。
[issue#712] 音频随机变速合并入 音频播放板块。
[issue#713] 快手用户进入直播间的消息解析缺失，能否补充一些。暂时无法实现。
[issue#714] 千帆大模型支持千帆AppBuilder，可以接入自定义应用（对接请更新WenxinWorkshop。
[issue#715] 字幕写入文件的日志不显示；音频处理函数会对文本内容的\n进行去除。
[issue#716] 修复tts_ai_lab_top，增加新的选项 语言。
[issue#717] 优化webui的文档。
[issue#718] 图像识别 新增摄像头截图功能，核心功能类似窗口截图，配合CV2实现摄像头识别和截图；补充遗漏的 闲时任务、图像识别的遗忘配置；修复自定义命令默认配置API过期问题。
[issue#719] 🙋 系统最低配置收集表。> ![S7YMW8E0@YHVCD~WCG}V4$R_tmb](https://private-user-images.githubusercontent.com/40910637/316046420-ab7cea23-9edd-4cde-bd96-730d6c5f2307.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTExMTY5NTIsIm5iZiI6MTcxMTExNjY1MiwicGF0aCI6Ii80MDkxMDYzNy8zMTYwNDY0MjAtYWI3Y2VhMjMtOWVkZC00Y2RlLWJkOTYtNzMwZDZjNWYyMzA3LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMjIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzIyVDE0MTA1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWJmN2EzYjY1NGMzZmU5NWRiMWQ4YmU2NmI0ZGEwMTk2YzI4MTU2NDA5MWFkOWQ5OTViZDE0M2EzMWFmMmJjOGEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.b9xIBl2FQdDhzlVnfa4GmSTZ3ppjbumkfbdIHSM5FYU) +OBS+网易云+live2d 带不动。。去除无关紧要的内容后 可以带得动，基本上2核CPU是最低要求了。我就是2g cpu ，是云主机。想问下，部署这个项目不需要gpu算力吗？只要2核cpu主机就可以吗？。> 想问下，部署这个项目不需要gpu算力吗？只要2核cpu主机就可以吗？

项目本身不需要，外挂的llm tts需要。@Ikaros-521 ,谢谢repo主的解答，那么部署虚拟人的部分也是要有显卡的哈，大概配置多少算力的显卡可以跑nvidia的那个虚拟audio2face的接口。。> @Ikaros-521 ,谢谢repo主的解答，那么部署虚拟人的部分也是要有显卡的哈，大概配置多少算力的显卡可以跑nvidia的那个虚拟audio2face的接口。。4090。Okay， thanks alot，现在看来这些大模型相关的，都是需要各种性能怪兽啊。> Okay， thanks alot，现在看来这些大模型相关的，都是需要各种性能怪兽啊。。是这样的，低算力的比如图像合成视频这种 目前倒是有压的比较低的方案。
[issue#720] 定时任务 修改定时时间为最小最大时间段内随机，并且新增了按钮来增删任务组。
[issue#721] 定时任务、闲时任务、动态文案，支持新语法[1|2|3]，括号中随机一个结果做拼接；闲时任务加了time动态变量。
[issue#722] 闲时任务 时间改成最大最小值内随机，新增了文案模式，纯进行闲时的文案内容复读。
[issue#723] 定时任务的数据类型改为schedule，为配合audio player区分数据使用。
[issue#724] 修复sd没选翻译也走谷歌翻译的bug。
[issue#725] 🙋 Stable Diffusion功能如何使用。
[issue#726] 对接 AnythingLLM；更新投资人&文档。
[issue#727] vits新增gpt-sovits的兼容（vits-simple-api）。
[issue#728] tts vits板块新增检索说话人按钮，点击后会调用api的获取说话人接口来更新说话人ID下拉框，不同类型下更新对应的数据。
[issue#729] 助播 触发类型转换为中文，追加了几个类型，更方便用户理解。
[issue#730] 新增主题 蓝天白云。
[issue#731] 🙋 QAnything 在线API功能，暂时无法使用。
[issue#732] 🐛 快手 直播间号和浏览器打开的直播间不一致。快手自带的检测机制导致的 请求过快不让访问，然后触发检测机制自动翻页了。暂时换到方案2：https://github.com/Ikaros-521/AI-Vtuber/pull/736。
[issue#733] 新增 联动程序板块，支持在运行webui的时候协同运行其他程序，省得点来点去；违禁词删减部分。
[issue#734] 修复 联动程序无法禁用的bug。
[issue#735] win环境安装gemini 的pysam的问题。别瞎装。
[issue#736] 新增 快手2 方案，配合油猴脚本使用，暂时仅支持弹幕信息。
[issue#737] pygame音频加载播放增加异常捕获，给予用户一定报错问题的原因猜测。
[issue#738] TIKTOK 获取信息只有大概10-15秒 | [Bug] Some problem...。还真是。。。。 绝了。应该是有什么检测机制，回头得研究研究。第三方库刚好也更新改版了，不过新版运行有问题。https://github.com/isaackogan/TikTokLive/issues/203。
[issue#739] 通义千问API调用时，预设不能为空，空时默认一个通用预设。
[issue#740] webui新增API，TTS合成、LLM推理。拆出独立的API接口，那么用户即可通过本项目做为中转站实现多项目接口统一管理，集成到自己的项目中使用。
[issue#741] 切换openai测试功能为openai库（之前死活不行，今天一试噶噶顺，醉了。
[issue#742] 更新星火库地址。
[issue#743] 🐛 GPT-SOVITS 报错 : "text_lang": dict_language[text_lang]。刘悦佬新版本的整合包 对接口做了大改 没法兼容。。https://github.com/Ikaros-521/AI-Vtuber/pull/747。
[issue#744] 没有nicegui这个文件啊？。
[issue#745] 🐛 PyGetWindow不支持linux。注释相关代码。https://github.com/Ikaros-521/AI-Vtuber/pull/746。
[issue#746] 部分函数区分操作系统执行；新增部分测试程序。
[issue#747] gpt-sovits新增对刘悦佬0322整合包版本的兼容。
[issue#748] 本地问答库 文本模式补充json文件数据加载异常报错。
[issue#749] 🚀 webui 输入框格式校验【期待pr贡献者】。
[issue#750] webui API地址输入框新增url校验；common新增部分校验函数，用于未来的校验功能实现；删减部分违禁词。
[issue#751] 答谢板块 修复 文案清空时 获取文案失败的bug，空时直接跳过功能；更新启动脚本。
[issue#752] 更新投资人。
[issue#753] 【大改】新增待合成音频消息队列结构大改，queue改list，支持消息优先级插队，待稳定性测试；闲时任务新增刷新计时类型；gpt-sovits新增gradio0322版本接口对接，但是！gradio版本需要更新，会库冲突！。
[issue#754] 聊天页 直接复读-插队首 全播放器适配 并 修复类型未携带的bug；修改默认消息队列保留数为50。
[issue#755] 消息队列优先级数据类型不对导致的bug修复。
[issue#756] 修复队列判空函数的判断错误bug。
[issue#757] 优化faster_whisper模型加载逻辑，大幅提升处理速度。
[issue#758] 完善fish-speech功能。
[issue#759] 支持拼多多 弹幕监听，实现逻辑同快手2一样，采用油猴前端监听。
[issue#760] 更新文档。
[issue#761] 程序内部api调用监听地址改为0.0.0.0，为后期跨网络调用提供服务。
[issue#762] webui 新增 本地路径指定URL路径访问 功能，即添加映射后，可以通过http下载合成的音频。
[issue#763] 兼容CyberWon的webtts-v1.4 v2。
[issue#764] webui 页面配置新增 配置模板；更新投资人；删减违禁词。
[issue#765] 配置模板功能优化。
[issue#766] openai_tts好像有点问题。测了下，没问题，是不是api密钥有问题。使用的第三方中专api，key和api是用第三方的吗？。> 使用的第三方中专api，key和api是用第三方的吗？

对，不过不确定第三方兼容性，得单独拉出来测一测。请问有测试tts的平台吗？我始终在AI-Vtuber上测不通。> 请问有测试tts的平台吗？我始终在AI-Vtuber上测不通。。https://github.com/Ikaros-521/AI-Vtuber/tree/main/tests 。直接跑测试代码，话说你不是加群了吗，为什么不群里说。
[issue#767] 修改openai tts的官方api地址。
[issue#768] 新增平台 大象新闻。
[issue#769] hide。
[issue#770] LLM新增gpt4free，具体哪些供应商好用得自行测试。
[issue#771] 优化报错提示。
[issue#772] 修改默认配置输入框为下拉框，默认读取项目根目录的所有json文件。
[issue#773] 补充遗漏依赖。
[issue#774] 优化openai 测试的报错日志。
[issue#775] 🙋 聊天模式 faster_whisper报错：Could not locate cudnn_ops_infer64_8.dll. Please make sure it is in your library path!。激活conda环境， 重装 torch等 faster_whisper。。继续报错。<img width="483" alt="VX~RGLN`JO3T A8~ZH~SW~A" src="https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/0f998d36-419f-45ea-b489-4b36db4426ec">。。> 继续报错 <img alt="VX~RGLN`JO3T A8~ZH~SW~A" width="483" src="https://private-user-images.githubusercontent.com/40910637/325656303-0f998d36-419f-45ea-b489-4b36db4426ec.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTQwNTY2NTgsIm5iZiI6MTcxNDA1NjM1OCwicGF0aCI6Ii80MDkxMDYzNy8zMjU2NTYzMDMtMGY5OThkMzYtNDE5Zi00NWVhLWI0ODktNGIzNmRiNDQyNmVjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MjUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDI1VDE0NDU1OFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWE1MTA3OWI3NmI0NDMyMGQ2YmExMzgzMmEyMGEyYmUzMjFiNzRiOTNlOGUyMGJkZDY2ZjE3NzM1ZDI1MjdkZGUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.0j66KgooA_OK94jBcbjV_9opulbNGtofY9xswx3tqo0">。。![image](https://github.com/Ikaros-521/AI-Vtuber/assets/40910637/1523ad1a-898e-4b22-8e6a-c93a7cc75125)。。
[issue#776] 优化chatglm标题。
[issue#777] 针对能自定义的下拉选择框，在自定义输入后，重启webui后配置为空的问题，实现追加自定义选项的功能。
[issue#778] 优化能自定义的下拉选择框在自定义输入后，重启webui可以追加自定义选项的功能。
[issue#779] 更新投资人。
[issue#780] 更新投资人。
[issue#781] 闲时任务 本地音频 支持[1|2]单行随机抽取语法。
[issue#782] 🙋 webui多行配置 切分符 空格切分删除。https://github.com/Ikaros-521/AI-Vtuber/pull/786。
[issue#783] 🙋 闲时任务 在短的闲时时间的情况下，会有大量音频堆积。https://github.com/Ikaros-521/AI-Vtuber/pull/788。。
[issue#784] 默认数据 本地问答库 删除过多的问答数据。
[issue#785] 更新说明文档。
[issue#786] webui中多行配置的输入框，改为仅换行符用作分隔符，删除空格切分。
[issue#787] 🐛 点歌停止命令无效，版本20240417。。。 | [Bug] Some problem...。没有问题， 点歌功能的取消点歌并非是单独取消歌曲，而是取消当前播放的音频。这块后期是准备做优化的。
[issue#788] 闲时任务优化，新增待播放音频阈值和计时缩减值，main新增callback接口接收音频播放状态；优化gradio_tts解析能力。
[issue#789] 【重要更新】修改voice_tmp_path_queue 由Queue改为List，待稳定性测试，为后期音频播放优先级打下基础；修复部分功能中含随机抽文案功能，在文案为空时会异常的bug。
[issue#790] 【大更！待稳定性测试】过滤板块-优先级 新增 待播放音频队列，同待合成音频一样，有最大队列长度，共用一个优先级配置。
[issue#791] 队列优先级获取None情况过滤。
[issue#792] 定时任务 空文案情况下随机文案出错bug修复。
[issue#793] 修复webui 多行输入框的字符串切分bug。
[issue#794] 内置的live2d功能移动到main中统一控制，不在需要重启生效。
[issue#795] 🙋 CharacterGLM 智谱API无法使用。
